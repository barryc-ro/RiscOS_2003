REM >SharedSnd
REM SharedSound module
REM
REM To new spec from 0.12 onwards
REM 0.46 Uses CBAI if availble

er$="SSnd"

ON ERROR PROCError

doLog%=FALSE
doCallBack%=TRUE
doCBAI%=FALSE
ROMBuild%=TRUE

LIBRARY "<MakeSSnd$Dir>.o.Vars"
LIBRARY "<MakeSSnd$Dir>.o.Debug"
LIBRARY "<MakeSSnd$Dir>.o.Drivers"
LIBRARY "<MakeSSnd$Dir>.o.Handler"
LIBRARY "<MakeSSnd$Dir>.o.Linear"
IF doLog% THEN LIBRARY "<MakeSSnd$Dir>.o.Log"
LIBRARY "<MakeSSnd$Dir>.o.Memory"
LIBRARY "<MakeSSnd$Dir>.o.Module"
LIBRARY "<MakeSSnd$Dir>.o.SampleRate"
LIBRARY "<MakeSSnd$Dir>.o.SWIS"
LIBRARY "<MakeSSnd$Dir>.o.Volume"

date$=" (05 Nov 1997)"
version$="0.48"
copyRight$="© Expressive Software Projects, Nottingham."+date$
title$="SharedSound"
swiName$="SharedSound"

REM

PRINT "      Making ";title$;" Module"''
PRINT "      Version: "version$
PRINT "      ";copyRight$


DIM Code% 15000
dir$="<MakeSSnd$Dir>."
debug%=FALSE
debug1%=TRUE


IF ROMBuild% AND doLog% THEN PRINT "Cannot do log in ROM version":STOP

PROCSetStart

PROCAssm

PRINT ''"      Code size: &"STR$~(P%-Code%)

PRINT ''"      Save as: ";dir$+"SSound  (Module)"''

OSCLI("Save "+dir$+"SSound "+STR$~(Code%)+" "+STR$~(P%))
OSCLI("SETTYPE "+dir$+"SSound MODULE")


END

DEFPROCAssm

FOR I%=0 TO 2 STEP 2
P%=Code%

PROCModule
PROCSWIS
PROCMemory
PROCSampleRate
PROCVolume
PROCDrivers
PROCLinear
IF doLog% THEN PROCLog
PROCHandler
IF NOT ROMBuild% THEN PROCDebug

NEXT

IF doLog% THEN OSCLI("LOAD "+dir$+"LogTable "+STR$~(logTable%))

ENDPROC


DEFPROCError
PRINT "Error from "er$
REPORT
PRINT " at line: "STR$(ERL)
END

