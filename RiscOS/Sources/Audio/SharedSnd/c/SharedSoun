   10REM >SharedSnd
   20REM SharedSound module
   30REM
   40REM To new spec from 0.12 onwards
   50REM 0.46 Uses CBAI if availble
   60
   70er$="SSnd"
   80
   90ON ERROR PROCError
  100
  110doLog%=FALSE
  120doCallBack%=TRUE
  130doCBAI%=FALSE
  140ROMBuild%=TRUE
  150
  160LIBRARY "<MakeSSnd$Dir>.o.Vars"
  170LIBRARY "<MakeSSnd$Dir>.o.Debug"
  180LIBRARY "<MakeSSnd$Dir>.o.Drivers"
  190LIBRARY "<MakeSSnd$Dir>.o.Handler"
  200LIBRARY "<MakeSSnd$Dir>.o.Linear"
  210IF doLog% THEN LIBRARY "<MakeSSnd$Dir>.o.Log"
  220LIBRARY "<MakeSSnd$Dir>.o.Memory"
  230LIBRARY "<MakeSSnd$Dir>.o.Module"
  240LIBRARY "<MakeSSnd$Dir>.o.SampleRate"
  250LIBRARY "<MakeSSnd$Dir>.o.SWIS"
  260LIBRARY "<MakeSSnd$Dir>.o.Volume"
  270
  280date$=" (05 Nov 1997)"
  290version$="0.48"
  300copyRight$="© Expressive Software Projects, Nottingham."+date$
  310title$="SharedSound"
  320swiName$="SharedSound"
  330
  340REM
  350
  360PRINT "      Making ";title$;" Module"''
  370PRINT "      Version: "version$
  380PRINT "      ";copyRight$
  390
  400
  410DIM Code% 15000
  420dir$="<MakeSSnd$Dir>."
  430debug%=FALSE
  440debug1%=TRUE
  450
  460
  470IF ROMBuild% AND doLog% THEN PRINT "Cannot do log in ROM version":STOP
  480
  490PROCSetStart
  500
  510PROCAssm
  520
  530PRINT ''"      Code size: &"STR$~(P%-Code%)
  540
  550PRINT ''"      Save as: ";dir$+"SSound  (Module)"''
  560
  570OSCLI("Save "+dir$+"SSound "+STR$~(Code%)+" "+STR$~(P%))
  580OSCLI("SETTYPE "+dir$+"SSound MODULE")
  590
  600
  610END
  620
  630DEFPROCAssm
  640
  650FOR I%=0 TO 2 STEP 2
  660P%=Code%
  670
  680PROCModule
  690PROCSWIS
  700PROCMemory
  710PROCSampleRate
  720PROCVolume
  730PROCDrivers
  740PROCLinear
  750IF doLog% THEN PROCLog
  760PROCHandler
  770IF NOT ROMBuild% THEN PROCDebug
  780
  790NEXT
  800
  810IF doLog% THEN OSCLI("LOAD "+dir$+"LogTable "+STR$~(logTable%))
  820
  830ENDPROC
  840
  850
  860DEFPROCError
  870PRINT "Error from "er$
  880REPORT
  890PRINT " at line: "STR$(ERL)
  900END
  910
