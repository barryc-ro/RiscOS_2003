;Assembler header file for FileWatch
;written by DefMod (Jun 30 1995) on Tue May 28 12:59:24 1996
;Simon Middleton

        [       :LNOT: :DEF: Get_Types
        GBLS    Get_Types
        ]
        [       :LNOT: :DEF: Types_Hdr
Get_Types                       SETS    "GET OS:Hdr.Types"
        |
Get_Types                       SETS    ""
        ]
        $Get_Types

        [       :LNOT: :DEF: Get_OS
        GBLS    Get_OS
        ]
        [       :LNOT: :DEF: OS_Hdr
Get_OS                          SETS    "GET OS:Hdr.OS"
        |
Get_OS                          SETS    ""
        ]
        $Get_OS

        [       :LNOT: :DEF: FileWatch_Hdr
        GBLS    FileWatch_Hdr

;Symbols for constants
Error_FileWatchBase             *       &80FB00
Error_FileWatchNoMem            *       &80FB00
Error_FileWatchBadHandle        *       &80FB01
Error_FileWatchWhatFS           *       &80FB02
FileWatch_RegisterInterestFileHandle *       &1

;Symbols for structure offsets and sizes
FileWatch_H                     *       4 ;abstract type
FileWatch_RegisterInterestFlags *       Bits

                                ^       0
FileWatch_RegisterInterestArgs_in_flags #       FileWatch_RegisterInterestFlags
FileWatch_RegisterInterestArgs_in_reasons #       Ptr
FileWatch_RegisterInterestArgs_in_match *       @
FileWatch_RegisterInterestArgs_in_match_file_prefix #       Ptr
                                ^       FileWatch_RegisterInterestArgs_in_match
FileWatch_RegisterInterestArgs_in_match_file_handle #       OS_F
                                ^       0
FileWatch_RegisterInterestArgs_out_handle #       FileWatch_H
FileWatch_RegisterInterestArgs  *       @

FileWatch_DeRegisterInterestFlags *       Bits

                                ^       0
FileWatch_DeRegisterInterestArgs_in_flags #       FileWatch_DeRegisterInterestFlags
FileWatch_DeRegisterInterestArgs_in_handle #       FileWatch_H
FileWatch_DeRegisterInterestArgs *       @

FileWatch_PollFlags             *       Bits

                                ^       0
FileWatch_PollArgs_in_flags     #       FileWatch_PollFlags
FileWatch_PollArgs_in_handle    #       FileWatch_H
FileWatch_PollArgs_in_buffer    #       Ptr
FileWatch_PollArgs_in_buffer_size #       Int
                                ^       0
FileWatch_PollArgs_out_reserved #       2*Int
FileWatch_PollArgs_out_updated_buffer #       Ptr
FileWatch_PollArgs_out_updated_buffer_size #       Int
FileWatch_PollArgs_out_file_count #       Int
FileWatch_PollArgs              *       @


;Symbols for SWI's and SWI reason codes
XFileWatch_RegisterInterest     *       &6D240
FileWatch_RegisterInterest      *       &4D240
   ;Entry
   ;  R0 = flags (FileWatch_RegisterInterestFlags)
   ;  R1 -> reasons (Int)
   ;  R2 -> file_prefix (String)
   ;Exit
   ;  R0 = handle (FileWatch_H)

XFileWatch_DeRegisterInterest   *       &6D241
FileWatch_DeRegisterInterest    *       &4D241
   ;Entry
   ;  R0 = flags (FileWatch_DeRegisterInterestFlags)
   ;  R1 = handle (FileWatch_H)

XFileWatch_Poll                 *       &6D242
FileWatch_Poll                  *       &4D242
   ;Entry
   ;  R0 = flags (FileWatch_PollFlags)
   ;  R1 = handle (FileWatch_H)
   ;  R2 = buffer (pointer to data)
   ;  R3 = buffer_size (Int)
   ;Exit
   ;  R2 = updated_buffer (pointer to data)
   ;  R3 = updated_buffer_size (Int)
   ;  R4 = file_count (Int)

        ]
        END
