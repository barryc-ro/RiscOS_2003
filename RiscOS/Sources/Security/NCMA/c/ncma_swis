#include <stdio.h>
#include <string.h>
#include "kernel.h"
#include "swis.h"

#define PROTOTYPES_INTERNAL
#include "ncma_swis.h"
#include "ncma_ncma.h"
#include "ncma_scard.h"
#include "dynalloc.h"
#include "module.h"
#include "DBUG.h"

int ncma_nullswi(_kernel_swi_regs *r)
{
  return(0);
}

int ncma_enquiry(_kernel_swi_regs *r)
{
    if(tag_cache.base == NULL) { /* no tags loaded */
      if(_kernel_swi(NCRegistry_Enquiry, r, r)!=NULL) {
          DBUG_PRINTF(DBUG_LVL_ERROR, "ncma_enquiry: registry read-thru failed\n");
      }
    } else {
        if((r->r[0] = cache_enquiry((char *)r->r[0], (char *)r->r[1], (int)r->r[2]))<0) {
            DBUG_PRINTF(DBUG_LVL_ERROR, "ncma_enquiry: tag cache enquiry failed\n");
        }
    }
      return(0);
}
