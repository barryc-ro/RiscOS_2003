
; Colour LCD controller (CLCD)

; assumed to be driving K6488L DSTN display for now

;
; CLCD registers - offsets from CLCD base address
;
CLCD_Control    *  &000
CLCD_Status     *  &004
CLCD_Mask       *  &008
CLCD_Interrupt  *  &00C
CLCD_DBAR0      *  &010  ; DMA channel 0 base address reg
CLCD_DCAR0      *  &014  ; DMA channel 0 current address reg
CLCD_DBAR1      *  &018  ; DMA channel 1 base address reg
CLCD_DCAR1      *  &01C  ; DMA channel 1 current address reg
CLCD_Timing0    *  &020
CLCD_Timing1    *  &024
CLCD_Timing2    *  &028
CLCD_Timing3    *  &02C
CLCD_Palette    *  &400  ; 256 words

;
; control register bits
;
CLCDCB_LCDEN     * 1        ; CLCD enable
CLCDCB_4BPP      * (0<<1)   ; 4 bits per pixel
CLCDCB_8BPP      * (1<<1)   ; 8 bits per pixel
CLCDCB_16BPP     * (2<<1)   ; 16 bits per pixel (12-bits palettized)
CLCDCB_LCDDUAL   * (1<<6)   ; dual panel STN
CLCDCB_BGR       * (1<<12)  ; swap red,blue
CLCDCB_LCDPWR    * (1<<22)  ; power
CLCDCB_LCDMUX    * (1<<23)  ; lower panel on MLD pins
CLCDCB_TFTLOWMUX * (1<<24)  ; TFT low data pin multiplexing
;CLCDCB_LCDVCOMP  * (3<<18)  ; interrupt at start of front porch
CLCDCB_LCDVCOMP  * (0<<18)  ; interrupt at start of vsync
;
; status/mask/interrupt register bits
;
CLCDSB_LFUFU    * 1        ; FIFO underflow, upper panel
CLCDSB_LFUFL    * 2        ; FIFO underflow, lower panel
CLCDSB_LNBU     * 4        ; LCD next base update
CLCDSB_VCOMP    * 8        ; vertical timing trigger (normally vsync)

; -----------------------------------------------------------------------------------

CLCD_IRQ        * 7         ; interrupt (device) number

CLCD_CLK        * 73728     ; clock to divide for pixel clock, in kHz

CLCD_DUALOFFSET * 640*480/2 ; offset to second half of panel, in pixels

; -----------------------------------------------------------------------------------

; mjs - this had better agree with the format specified in kernel s.vdu.vdumodes

;
; format of a VIDC list type 3
;
                                ^       4
VIDCList3_PixelDepth            #       4
VIDCList3_HorizSyncWidth        #       4
VIDCList3_HorizBackPorch        #       4
VIDCList3_HorizLeftBorder       #       4
VIDCList3_HorizDisplaySize      #       4
VIDCList3_HorizRightBorder      #       4
VIDCList3_HorizFrontPorch       #       4
VIDCList3_VertiSyncWidth        #       4
VIDCList3_VertiBackPorch        #       4
VIDCList3_VertiTopBorder        #       4
VIDCList3_VertiDisplaySize      #       4
VIDCList3_VertiBottomBorder     #       4
VIDCList3_VertiFrontPorch       #       4
VIDCList3_PixelRate             #       4
VIDCList3_SyncPol               #       4  ; sync polarity/flag bits
VIDCList3_ControlList           #       0  ; possibly empty list of pairs of index,value words
;
; and VIDCList3 is terminated by a -1 word
;
; Indices in VIDCList3_ControlList
;
                                ^       1
ControlList_LCDMode             #       1
ControlList_LCDDualPanelMode    #       1
ControlList_LCDOffset0          #       1
ControlList_LCDOffset1          #       1
ControlList_HiResMode           #       1
ControlList_DACControl          #       1
ControlList_RGBPedestals        #       1
ControlList_ExternalRegister    #       1
ControlList_HClockSelect        #       1
ControlList_RClockFrequency     #       1
ControlList_DPMSState           #       1
ControlList_Interlaced          #       1
ControlList_OutputFormat        #       1
ControlList_InvalidReason       #       0

; bits/flags in VIDCList3_SyncPol word:
;
SyncPol_InvertHSync        *  1
SyncPol_InvertVSync        *  2
SyncPol_InterlaceSpecified *  4   ; if set, interlace bit has been specified, else filled in by kernel
SyncPol_Interlace          *  8   ; set=interlaced, either specified by service call claimant or filled in from *TV by kernel

; -----------------------------------------------------------------------------------


       END
