/************************************************************************/
/* File:    WimpReg.c++                                                 */
/* Purpose: Register with Wimp Registry object for ANT URL message.     */
/*                                                                      */
/* Author:  Neil Bingham (mailto:NBingham@acorn.com)                    */
/* History: 0.01  Fri 25th September 1998                               */
/*                Created.                                              */
/************************************************************************/


/* -------------------------------------- LIBRARY IMPORTS --------------------------------------- */

#include "Email/Mailbox/WimpRegistry.h"

/* ---------------------------------- PRE-PROCESSOR DIRECTIVES ---------------------------------- */

#define Local_wimp_MOPENURL           0x4AF80
/* -------------------------------------- GLOBAL VARIABLES -------------------------------------- */


/* ----------------------------------------- FUNCTIONS ------------------------------------------ */

// Register with WimpRegistry
class webmail_wimp_register
{
  public:
    webmail_wimp_register (void);
    static uint32 hack2(void);
  private:
    static uint32 unused_global[];
};

webmail_wimp_register::webmail_wimp_register(void)
{
    WimpRegistry::Instance()->RegisterMessage(Local_wimp_MOPENURL);
}
webmail_wimp_register webmail_wr;	// private static var that on construction
				// registers with WimpRegistry so that
				// before main() is entered, WimpRegistry
				// is set up.

uint32 webmail_wimp_register::unused_global[] = { 1, 2, 3};

uint32 webmail_wimp_register::hack2(void)
{
  uint32 l = 5;

  l += unused_global[1];

  return l;
}

extern "C" void hack_round_linker(void)
{
  uint32 localvar = 1;

  localvar += webmail_wimp_register::hack2();
}
