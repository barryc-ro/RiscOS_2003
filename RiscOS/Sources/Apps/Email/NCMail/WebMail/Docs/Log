LogFile
=======

--------------------------------------------------------------------------------
Mon 21st September 1998
-----------------------

Library is now capable of building the Inbox files in a RiscOS environment.  
Currently the library assumes that there is no mailbox processed and says
processing mailbox or if offline a comment about connect to fetch mail.


Wed 23rd September 1998
-----------------------

Library now sets its states correctly for Inbox processed and Inbox
unprocessed. Code added to support button presses in the Inbox screen, and
for entering the email client.

** Library now put in suitable state for Build Tree **

Header file added with BAL's browser interface code.  The code to call when
entering the email client, and the Compose, NetLink, Exit and "Read" buttons
on the Inbox implemented.  Compose, Read & Exit do not do anything, but
Netlink should inform the engine.

Added condition to redraw cbf that if the user is in the Inbox and it is
unprocessed when this FN is called a redraw will occur.

Removed the dependency -DRISC_OS which passed files to the RAM Disc.  Now
the !SetPaths file sets up a variable NCMailOutput$Dir where the files will
go.  In !SetPaths the variable is setup to point to RAM::.

Thu 24th September 1998
-----------------------
Library now talks cleanly to Email engine, pulls down an Inbox and does a 
limited display of the data into a debug window.

** Added to CVS.

Fri 25th September 1998
-----------------------
Inbox display code now outputting to HTML.  Date is now being displayed in
the desired format but will require Internationalisation checking.

Emails with no subject are being properly trapped, and the INBOX_No_Subject
tag substituted so that there is something for the user to click on.

All text in the Inbox is escaped.

** Checked in as 0.03


Mon 28th September 1998
-----------------------
Read message HTML added.
Docs.Tags file updated to reflect Read Message tags.

Beginnings of ReadMsg code added to WebMail.

Added fix to stop user clicks being processed if the user has clicked Read
on a message.  Now state must be State_Inbox or State_Inbox_Unprocessed for
clicks to be responded to on the Inbox screen.

Added Debug.  ncmail:?page=Debug  will put the state machine details out
to the current debugging stream.

Tue 29th September 1998
-----------------------

Read Message code now complete in all respects except the attachment code.
All buttons on the read screen are functioning with the message ID's being
embedded in the HTML.  The To:, From:, Date:, CC, & Subject: fields are
filled in correctly, and escaped.

An extra parameter (void *) has been added to parser_parse_file() to allow
calling sub-components to pass data through to the relevant 
<component>_active_comment_found() function.  E.g. the Read Message screen
passes a pointer to the MessageDescriptor for the message being output
so that it isn't stored in globals.

Debugging links added to the bottom of the Inbox & Read screen which will
output data to the current debug stream when clicked.

** Checked in as 0.04

Wed 30th September 1998
-----------------------
Fixed bug where the correct icon wasn't being displayed in the Inbox screen
due to misunderstanding about the NEW bit in the MessageDescriptor.flags
var.

Bug in delete code fixed.

UI wasn't telling the engine when the UI was exited.

Error handling code now implemented.  If a page cannot be rendered for 
some reason then an attempt is made to render the Inbox.  If this fails
(or the failing page is the Inbox), then the HTML File ERROR.html is
displayed.  A list of error codes can be found in Docs.ErrorCodes.

Support for MessageDescriptor.fromreal & MessageDescriptor.fromaddr added.
Support for EntityDescriptor.flags added.

Read message screen now displays only attachments that the EmailLib understands
or best attempt views.

Checked in as 0.05

Fri 02nd October 1998
---------------------

Fixed grammar in Messages file to do with non-viewable attachments.
Added Compose HTML page.
Documented all tags in Compose.html and added necessary bits to Messages file.

Checked in as 0.06

Mon 05th October 1998
---------------------

Added support to truncate From & Subject text in the Inbox to prevent wrapping.
Fixed bug where Attachment type wasn't always being displayed correctly.

Checked in as 0.07

Fixed bug where first line of every attachment was indented by one space.
Added Popup dialogue HTML and added tags to Docs.Tags.

Checked in as 0.08


Tue 06th October 1998
---------------------

Added support to lock-down the UI as soon as a click is received until the
new page has been rendered etc.

Added debugging to check eng_get_mailbox_list() return codes.

Checked in as 0.09

Beginnings of support for PopUp dialogues added.  Doesn't work yet due to 
limitations of ANT URL Protocol.

Added support for generic Compose/Reply/MailTo/Forward screens in SendMsg.c
Then added Compose.c which contains compose-specific code.

Compose screen now builds and allows the user to cancel the message.

Feedback.c added which has beginnings of animator support.

Checked in as 0.10.


Thu 08th October 1998
---------------------

WebMail is now capable of sending messages to multiple receipents.

Checked in as 0.11

Added support for initial PopUps.  No text is displayed in the buttons
but functionally working.  BrowserIF doesn't display them as yet.

Checked in as 0.14

Fri 09th October 1998
---------------------

Finished PopUp code.  Added support for eng_register_status() but 
currently only outputs debugging when the callback is called.

Checked in as 0.16

Compose now complete with PopUp support.  Status boxes (PopUps with
no buttons) now implemented.

Checked in as 0.17

Added support in MailTo: to accept requests from browserif.c and 
to exit cleanly if Cancel clicked.

Checked in as 0.18

Proper engine return codes now trapped in ReadMsg screen.  SendMsg 
screen already implemented.

Inbox now traps engine return codes and displays the appropriate
message to the user.  Doing a disconnect during a fetch of an
unprocessed Mailbox's headers isn't quite right yet.

Checked in as 0.19

Mon 12th October 1998
---------------------

PopUp dialogue's HTML improved.
Added support for eng_register_status() to allow the engine to inform the
user of problems.

Completed MailTo support, but untested.

Checked in as 0.21

Added support for retrieving a message on the server while offline.
Engine PopUp code validated
ENG_CONNECTFAILED now trapped in eng_read_message().  This occurs if
the user attempts to cancel a Do you Want to connect to retrieve this
message.
Initial reply code added.

MailTo: support validated.  Small change was required to Compose.html
to fix tag in the wrong place.

Checkin 0.22 was by Ben adding browserif.c++, removing browserif.c and
tidying up.

Checked in as 0.23

Added UserSel.html for User Selection screen.  Initial Tags added to
Messages file too.

Better support for Engine return codes added.

Checked in as 0.24

Thu 15th October 1998
---------------------

Added support for new eng_return struct which replaces eng_rcode in
Callback functions.

Can now only be used with Engine 0.25 & Email Lib 0.49 or above.

Reply code now fully working.  Due to changes in the Engine return codes not
all conditions will be trapped in this build.  This will be rectified in the
next release.

Added Test obey file to setup NCMail to run from NFS on an NC.

Checked in as 0.25

Fri 16th October 1998
---------------------

Modifications made to accept two URLs to exit to; one for Online and one for
Offline.


Sun 18th October 1998
---------------------

Started work on the User Selection screen.  Will now render the screen with 
Dummy information.


Mon 19th October 1998
---------------------

User selection screen code completed.  Currently due to being unable to test
with NCMA, the following can be done:  If NCMALite is not in the modules list
then the function usersel_get_fake_user_details() is called and produces valid
data for you to select from.  When Complete has been selected, the StartEmail
page can be reloaded into Fresco and the Email Client entered.  If NCMALite is
present then it will attempt to communicate properly.  This is untested.
