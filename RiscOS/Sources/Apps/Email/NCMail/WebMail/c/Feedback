/************************************************************************/
/* File:    Feedback.c                                                  */
/* Purpose: Code relating to providing feedback to the user.  This will */
/*          be either the Throbber or the hourglass.                    */
/*                                                                      */
/* Author:  Neil Bingham <mailto:nbingham@acorn.com>                    */
/* History: 0.01  d                                                     */
/*                Created.                                              */
/************************************************************************/


/* -------------------------------------- LIBRARY IMPORTS --------------------------------------- */
#include "Feedback.h"

/* ---------------------------------- PRE-PROCESSOR DIRECTIVES ---------------------------------- */


/* -------------------------------------- GLOBAL VARIABLES -------------------------------------- */

#ifdef TOOLBOX_FEEDBACK
  ObjectId		Feedback_WindowHandle;
#endif

/* ----------------------------------------- FUNCTIONS ------------------------------------------ */

/************************************************************************/
/* feedback_on                                                          */
/*                                                                      */
/* Function turns the feedback on.                                      */
/*                                                                      */
/* Parameters: void.                                                    */
/*                                                                      */
/* Returns:    void.                                                    */
/*                                                                      */
/************************************************************************/
void feedback_on(void)
{
  nb_hourglass(TRUE);
}


/************************************************************************/
/* feedback_off                                                         */
/*                                                                      */
/* Function turns the feedback off.                                     */
/*                                                                      */
/* Parameters: void.                                                    */
/*                                                                      */
/* Returns:    void.                                                    */
/*                                                                      */
/************************************************************************/
void feedback_off(void)
{
  nb_hourglass(FALSE);
}


/* ============================================================================================== */
/* =================================== TOOLBOX FEEDBACK WINDOW ================================== */
/* ============================================================================================== */

/************************************************************************/
/* ncmui_connection_status                                              */
/*                                                                      */
/* Function is called by the Engine to display connection information   */
/* in a popup Toolbox window.                                           */
/*                                                                      */
/* Parameters: info  - Struct containing the data.                      */
/*                                                                      */
/* Returns:    void.                                                    */
/*                                                                      */
/************************************************************************/
void ncmui_connection_status(ProcessStatus *info)
{
#ifdef TOOLBOX_FEEDBACK


#else
  /* TOOLBOX_FEEDBACK not being used to macro the info variable to prevent a warning during
   * compilation.
   */
  NB_UNUSED(info);
#endif
}


#ifdef TOOLBOX_FEEDBACK

  /************************************************************************/
  /* feedback_open_window                                                 */
  /*                                                                      */
  /* Function opens the Feedback toolbox window in the centre of the      */
  /* screen.                                                              */
  /*                                                                      */
  /* Parameters: void.                                                    */
  /*                                                                      */
  /* Returns:    void.                                                    */
  /*                                                                      */
  /************************************************************************/
  void feedback_open_window(void)
  {
    toolbox_show_object(0, Feedback_WindowHandle, Toolbox_ShowObject_Centre, 0, 0, 0);
  }


  /************************************************************************/
  /* feedback_close_window                                                */
  /*                                                                      */
  /* Function closes the Toolbox window when called.                      */
  /*                                                                      */
  /* Parameters: void.                                                    */
  /*                                                                      */
  /* Returns:    void.                                                    */
  /*                                                                      */
  /************************************************************************/
  void feedback_close_window(void)
  {
    toolbox_hide_object(0, Feedback_WindowHandle);
  }


  /************************************************************************/
  /* feedback_initialise                                                  */
  /*                                                                      */
  /* Function is called when the toolbox object is auto created.  Now we  */
  /* must setup the font size, weight etc. for the gadgets.               */
  /*                                                                      */
  /* Parameters: void.                                                    */
  /*                                                                      */
  /* Returns:    void.                                                    */
  /*                                                                      */
  /************************************************************************/
  void feedback_initialise(void)
  {
    button_set_font(0, Feedback_WindowHandle, Feedback_Button_1, Feedback_Font, Feedback_Size,
                    Feedback_Size);
    button_set_font(0, Feedback_WindowHandle, Feedback_Button_2, Feedback_Font, Feedback_Size,
                    Feedback_Size);
  }


  /************************************************************************/
  /* ncmui_register_autocreated                                           */
  /*                                                                      */
  /* Function will be called when an object is auto-created event is      */
  /* received.  We can now register any Toolbox objects in the program.   */
  /*                                                                      */
  /* Parameters: ToolboxEventHandler parameters.                          */
  /*                                                                      */
  /* Returns:    TRUE or FALSE.                                           */
  /*                                                                      */
  /************************************************************************/
  int ncmui_register_autocreated(int event_code,ToolboxEvent *event,IdBlock *id_block, void *handle)
  {
    ToolboxObjectAutoCreatedEvent *created_event=(ToolboxObjectAutoCreatedEvent *) event;

    NB_UNUSED(handle);
    NB_UNUSED(event_code);

    /* Deal with all events on the main window */
    if (strcmp(created_event->template_name, "main_win")==0)
    {
      /* Define handle for main_win */
      Feedback_WindowHandle = id_block->self_id;

      feedback_initialise();
    }
    return (TRUE);
  }

#endif

