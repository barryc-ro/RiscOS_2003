/************************************************************************/
/* File:    Slideshow.c                                                 */
/* Purpose: File contains code to display each animation sequence on    */
/*          Daytona.                                                    */
/*                                                                      */
/* Author:  S. B. Forrest                                               */
/* History: Wed 15th October 1997 - ver 0.01 - Created.                 */
/*          Tue 28th October 1997 - ver 0.02 - Slightly revamped; the   */
/*                                  animation flicker problems have     */
/*                                  now been resolved.                  */
/************************************************************************/


/* -------------------------------------- LIBRARY IMPORTS --------------------------------------- */
#include "Functions.h"

/* ---------------------------------- PRE-PROCESSOR DIRECTIVES ---------------------------------- */


/* -------------------------------------- GLOBAL VARIABLES -------------------------------------- */

/* Animation types, and sequence information */

enum
{
  Incoming,
  Caller_Id,
  RxFax_Pages,
  RxFax_Printing,
  RxFax_Complete,
  RxFax_Complete_Printing,
  RxFax_Complete_Printing_Complete,
  Idle,
  TxFax_WakeUp,
  TxFax_Dialling,
  TxFax_Ringing,
  TxFax_CannotConnect,
  TxFax_Dialling_2,
  TxFax_Ringing_2,
  TxFax_Connected,
  TxFax_Pages,
  TxFax_Complete,
  Idle_2,
  TxEmail_Dialling,
  TxEmail_Ringing,
  TxEmail_Connected,
  TxEmail_Letters,
  TxEmail_Complete,
  RxEmail_Polling,
  RxEmail_Letters,
  RxEmail_Letters_Printing,
  RxEmail_Complete,
  RxEmail_Complete_Printing,
  RxEmail_Complete_Printing_Complete,
  Idle_3,
  End
};

/* ----------------------------------------- FUNCTIONS ------------------------------------------ */

void slideshow(void)
{
  static unsigned int animation = Incoming;

  switch (animation)
  {
    case Idle:
    case Idle_2:
    case Idle_3:
      ui_deregister_animation(1);
      ui_deregister_animation(4);
      ui_register_animation(2, "idle");
      ui_window_title("Home_Title");
      ui_home_set_status(1, NULL, NULL, NULL);
      ui_home_set_status(2, NULL, NULL, NULL);
      break;

    case Incoming:
      ui_register_animation(2, "wake");
      ui_window_title("RxFax_Title");
      ui_home_set_sprite(2, "wake_0");
      ui_home_set_status(1, "RxFax_Connecting", NULL, NULL);
      ui_home_set_status(2, NULL, NULL, NULL);
      break;

    case Caller_Id:
      ui_register_animation(2, "connect");
      ui_home_set_status(1, "RxFax_Name", NULL, NULL);
      ui_home_set_status(2, NULL, NULL, NULL);
      break;

    case RxFax_Pages:
      ui_deregister_animation(2);
      ui_home_set_sprite(2, "idle_1");
      ui_register_animation(4, "faxrx");
      ui_home_set_status(1, "RxFax_Name", NULL, NULL);
      ui_home_set_status(2, "RxFax_2Pages", NULL, NULL);
      break;

    case RxFax_Printing:
      ui_register_animation(1, "print");
      ui_home_set_sprite(2, "idle_0");
      ui_home_set_status(1, "RxFax_Name", NULL, NULL);
      ui_home_set_status(2, "RxFax_5Pg3Pr", NULL, NULL);
      break;

    case RxFax_Complete:
      ui_deregister_animation(1);
      ui_register_animation(12, "okay");
      ui_home_set_status(1, "RxFax_Done", NULL, NULL);
      ui_home_set_status(2, "RxFax_5Pg3Pr", NULL, NULL);
      break;

    case RxFax_Complete_Printing:
      ui_register_animation(1, "print");
      ui_deregister_animation(4);
      ui_home_set_sprite(2, "idle_2");
      ui_home_set_status(1, "RxFax_Done", NULL, NULL);
      ui_home_set_status(2, "RxFax_5Pg3Pr", NULL, NULL);
      break;

    case RxFax_Complete_Printing_Complete:
      ui_deregister_animation(1);
      ui_register_animation(12, "okay");
      ui_home_set_sprite(2, "idle_0");
      ui_home_set_status(1, "RxFax_DoneP", NULL, NULL);
      ui_home_set_status(2, "RxFax_5Pg5Pr", NULL, NULL);
      break;

    case TxFax_WakeUp:
      ui_register_animation(2, "wake");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Input", NULL, NULL);
      ui_home_set_status(2, "TxFax_Search", NULL, NULL);
      break;

    case TxFax_Dialling:
    case TxFax_Dialling_2:
    case TxEmail_Dialling:
      ui_register_animation(2, "dial");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Dial", NULL, NULL);
      ui_home_set_status(2, NULL, NULL, NULL);
      break;

    case TxFax_Ringing:
    case TxFax_Ringing_2:
    case TxEmail_Ringing:
      ui_register_animation(2, "ring");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Dial", NULL, NULL);
      ui_home_set_status(2, "TxFax_Ring", NULL, NULL);
      break;

    case TxFax_Connected:
    case TxEmail_Connected:
      ui_register_animation(2, "connect");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Connect", NULL, NULL);
      ui_home_set_status (2, NULL, NULL, NULL);
      break;

    case TxFax_CannotConnect:
      ui_deregister_animation(2);
      ui_window_title("TxFax_Title");
      ui_home_set_sprite(2, "dialerror");
      ui_home_set_status(1, "TxFax_NoCon", NULL, NULL);
      ui_home_set_status(2, "TxFax_Try", NULL, NULL);
      break;

    case TxFax_Pages:
      ui_deregister_animation(2);
      ui_home_set_sprite(2, "idle_1");
      ui_register_animation(4, "faxtx");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Name", NULL, NULL);
      ui_home_set_status(2, "TxFax_2Pg", NULL, NULL);
      break;

    case TxFax_Complete:
      ui_register_animation(12, "okay");
      ui_home_set_sprite(2, "idle_0");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Done", NULL, NULL);
      ui_home_set_status(2, "TxFax_5Pg", NULL, NULL);
      break;

    case TxEmail_Letters:
      ui_deregister_animation(2);
      ui_register_animation(4, "emailtx");
      ui_home_set_sprite(2, "idle_1");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Name", NULL, NULL);
      ui_home_set_status(2, "TxFax_2Pg", NULL, NULL);
      break;

    case TxEmail_Complete:
      ui_register_animation(12, "okay");
      ui_home_set_sprite(2, "idle_0");
      ui_window_title("TxFax_Title");
      ui_home_set_status(1, "TxFax_Done", NULL, NULL);
      ui_home_set_status(2, "TxFax_2Pg", NULL, NULL);
      break;

    case RxEmail_Polling:
      ui_register_animation(4, "poll");
      ui_window_title("Title_7_0");
      ui_home_set_sprite(2, "idle_1");
      ui_home_set_status(1, "Line1_7_0", NULL, NULL);
      ui_home_set_status(2, NULL, NULL, NULL);
      break;

    case RxEmail_Letters:
      ui_deregister_animation(2);
      ui_register_animation(4, "mail");
      ui_home_set_sprite(2, "idle_1");
      ui_home_set_status(1, "Line1_7_1", NULL, NULL);
      ui_home_set_status(2, "Line2_7_1", NULL, NULL);
      break;

    case RxEmail_Letters_Printing:
      ui_register_animation(1, "print");
      ui_home_set_sprite(2, "idle_0");
      ui_home_set_status(1, "Line1_7_2", NULL, NULL);
      ui_home_set_status(2, "Line2_7_2", NULL, NULL);
      break;

    case RxEmail_Complete:
      ui_deregister_animation(1);
      ui_register_animation(12, "okay");
      ui_home_set_status(1, "Line1_7_3", NULL, NULL);
      ui_home_set_status(2, "Line2_7_3", NULL, NULL);
      break;

    case RxEmail_Complete_Printing:
      ui_register_animation(1, "print");
      ui_deregister_animation(4);
      ui_window_title("Title_7_4");
      ui_home_set_sprite(2, "idle_2");
      ui_home_set_status(1, "Line1_7_4", NULL, NULL);
      ui_home_set_status(2, "Line2_7_4", NULL, NULL);
      break;

    case RxEmail_Complete_Printing_Complete:
      ui_deregister_animation(1);
      ui_register_animation(12, "okay");
      ui_home_set_sprite(2, "idle_0");
      ui_home_set_status(1, "Line1_7_5", NULL, NULL);
      ui_home_set_status(2, "Line2_7_5", NULL, NULL);
      break;
  }

  if (animation++ == End) animation = Incoming;
}
