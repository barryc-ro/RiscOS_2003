
#include "include.h"
#include "tbox.h"
#include "error.h"
#include "globals.h"
#include "misc.h"
#include "miscwimp.h"
#include "swis.h"

char *miscwimp_lookup_message_token (char *tag)
{
  _kernel_oserror *er;
  _kernel_swi_regs r;

  r.r[0] = (int) &message_block;
  r.r[1] = (int) tag;
  r.r[2] = 0;

  er = _kernel_swi (MessageTrans_Lookup, &r, &r);
  if (er != NULL)
  {
    misc_error_check (er);
    return NULL;
  }

  return (char *) r.r[2];
}

/* Auxiliary function to fade/unfade a Button */
void miscwimp_fade_gadget (ObjectId object, ComponentId button,
                           Fade_Action action)
{
  unsigned int flags;
  _kernel_oserror *er;

  er = gadget_get_flags (0, object, button, &flags);
  error_check_error (er);

  if (action == Fade)
    flags |= Gadget_Faded;
  else
    flags &= !(Gadget_Faded);

  er = gadget_set_flags (0, object, button, flags);
  error_check_error (er);
}

