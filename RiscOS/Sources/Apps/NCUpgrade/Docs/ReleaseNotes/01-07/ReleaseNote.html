<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>RISC OS-NC2 Boot ROM Release 01-07</TITLE>
<LINK REV=MADE HREF="mailto:srose@acorn.com">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000ff">

<CENTER><H1>Acorn RISC OS-NC2 Boot ROM Release</H1></CENTER>

<HR>
<P ALIGN=CENTER><STRONG>CONFIDENTIAL</STRONG></P>
<HR>

<CENTER>
<TABLE BORDER=0 WIDTH="60%">                   
<TR><TD>Release:		<TD>Funai 01-07
<TR><TD>Date:			<TD>$Date$
<TR><TD>Project:		<TD>Funai2 (847)
<TR><TD>Author(s):		<TD><A HREF="mailto:srose@acorn.com">Steve Rose</a>
<TR><TD>Classification:		<TD>Acorn Restricted
<TR><TD>Status:			<TD>Released
</TABLE>
</CENTER>

<HR>
<H3>Contents</H3>
<OL>
      <LI><A NAME="toc_copyright" HREF="#copyright">Copyright</A>
      <LI><A NAME="toc_overview" HREF="#overview">Overview</A>
      <LI><A NAME="toc_deliverables" HREF="#deliverables">Deliverables</A>
      <LI><A NAME="toc_operation" HREF="#operation">Operation</A>
      <LI><A NAME="toc_updates" HREF="#updates">Updates</A>
      <LI><A NAME="toc_glossary" HREF="#glossary">Glossary</A>
      <LI><A NAME="toc_references" HREF="#references">References</A>
</OL>
<HR>

<H3><A NAME="copyright" HREF="#toc_copyright">1. Copyright</A></H3>
<P>This document is Copyright 1998 Acorn Computers Ltd.
<HR>

<H3><A NAME="overview" HREF="#toc_overview">2. Overview</A></H3>
<P>This is the third final release candidate of the RISC OS-NC2 Boot ROM for Funai NC2 
hardware.  

<P>Differences between this and the previous release are described in section 5.

<P>Specifications and supporting documentation for the RISC OS-NC2 Boot ROM can be 
obtained by visiting the <a href="http://www.acorn.com/funai2/external/funai2/home.html">
Funai2 project web site</a>.  To avoid confusion with terminology, it should be noted 
that the "RISC OS-NC2 Boot ROM" is referred to as the "Maintenance OS" in most of the 
specifications.  

<P>Section 4 provides a user oriented guide on operation and usage.

<P><strong>The Main OS image on the server must be compressed before it can be downloaded
and programmed into Flash on board the NC. Software for compressing downloadable 
data must be <a href="http://www.cdrom.com/pub/infozip/zlib">ZLib compatible</a>.
</strong>

<HR>

<H3><A NAME="deliverables" HREF="#toc_deliverables">3. Deliverables</A></H3>
<P>The release consists of this release note, a <a href="./???? zip">4MB binary image</a> 
(compressed as a WinZip archive) containing the RISC OS-NC2 Boot ROM described in this 
document, a <a href="./csv.txt">comma-separated-value </a>(CSV) file containing the module 
version numbers that make up the image, and a <a href="./zdeflate.zip">sun-sparc-solaris program </a>
(compressed as a WinZip archive) for compressing the Main OS in a form that is compatible with the 
Upgrade system.

<HR>

<H3><A NAME="operation" HREF="#toc_operation">4. Operation</A></H3>
<P>This section describes how to use the RISC OS-NC2 Boot ROM to upgrade the
Main operating system on your NC2 hardware.

<H4><A NAME="op1" HREF="#op1">4.1 Image Preparation</A></H4>
    <P>You cannot download the Main OS in it's current form and expect a successful
    upgrade.  This is because the Main OS is released as a WinZip archive, rather than
    the ZLib format required by the Upgrade system.
    
    <P>To prepare your Main OS WinZip archive for use by the Upgrade system, follow
    the instructions below.
    <OL>
    <LI>Download and unzip the latest <a href="./../../index.html">Acorn RISC OS-NC2 Main OS</a> release.
    <LI>Download and unzip <a href="./zdeflate.zip">zdeflate.zip</a>.
    <LI>On a sun-sparc-solaris platform, use zdeflate to compress the Main OS image for use by the Upgrade system.
    </OL>
    
    <P>The file produced by zdeflate is what you must use for the actual Upgrade.

<H4><A NAME="op2" HREF="#op2">4.2 Automatic Upgrade</A></H4>
    <P>Automatic upgrade will occur if the Boot ROM is unable to detect a valid 
    Main OS in the on-board Flash memory.  The procedure for automatic upgrade 
    consists of powering on your box and following the steps described in section 
    4.4.  To power on your box, insert the power connector at the back of the
    NC.
    
<H4><A NAME="op3" HREF="#op3">4.3 User Initiated Upgrade</A></H4>
    <P>If you already have a valid Main OS in the on-board Flash memory but would 
    still like to upgrade, the user initiated upgrade procedure must be followed.  
    This consists of holding down the mode select button on the front panel of your 
    NC whilst powering on, and then following the steps described in section 4.4.
    To power on you must insert the power connector at the back of the NC.
    
<H4><A NAME="op4" HREF="#op4">4.4 The Welcome Screen</A></H4>
    <P>Following the initial steps for automatic or user initiated upgrade 
    described above, you should arrive at the welcome screen for the NC
    upgrade process.  The welcome screen contains the Doro TV-Surfer logo,
    and text which reads <em>"You have decided to upgrade your network computer.  Press
    'Continue' to proceed, or press the reset button on the front panel to cancel your
    upgrade."</em>, or <em>"Your machine encountered
    a problem on startup, therefore it is necessary to refresh the software from the 
    upgrade server.  Press 'Continue' to proceed."</em>  Two buttons marked
    Continue and Cancel lie at the bottom of the screen.  Select Contine to 
    enter the setup screens.
    
<H4><A NAME="op5" HREF="#op5">4.5 The Setup Screens</A></H4>

    <H5>4.5.1 Keyboard Options</H5>
    <P>The first setup screen you will see is Keyboard Options.  Here you
    should select the type of keyboard you are using (Denmark, Sweden,
    Finland, UK, Norway, or None if you do not have a keyboard).

    <H5>4.5.2 Dialling Options</H5>

    <P>The second setup screen you will see is Dialling Options.  Here you
    should enter your country code (e.g. 44 for the UK), outside line prefix, 
    wait for dial tone, and call waiting options.  Pressing the <em>Keyb.</em> button 
    on your handset will cause the on-screen keyboard to appear.  You can then use
    the large blue navigation button on your handset to move around and
    select text that you want entered in the fields below.  Use the <em>
    Enter</em> button below the navigation button on your handset to select
    particular keys once you have positioned the cursor correctly over the
    key you wish to select.  If you have entered information incorrectly,
    the system will inform you of the offending field and prevent you
    from proceeding further until a correction has been made.  
    
    <P>Once you have correctly entered your dialling options, click on 
    the button marked Next at the bottom of your screen.  This will take
    you to the ISP Options screen. 
    
    <H5>4.5.3 ISP Options</H5>
    
    <P>The ISP Options screen requires you to enter information pertaining
    to your Internet Service Provider.  This comprises your ISP phone
    number, ISP username and password, up to two space separated DNS
    servers, your local domain (e.g. acorn.co.uk), and a modem dial script.  
    For security reasons your password
    will be echoed as a series of hyphens to prevent onlookers from reading 
    your password.  A modem dial script will appear
    by default, regardless of whether or not you have saved one previously.
    
    <P>The local domain allows you to abbreviate your FTP URL.  For example,
    if you normally type in ftp://ftp.acorn.co.uk/filename.zip and your
    local domain is acorn.co.uk, you can abbreviate the URL to 
    ftp://ftp/filename.zip.
    
    <P>Once you have correctly entered your ISP options, click on the button
    marked Next at the bottom of your screen.  This will take you to the FTP
    Options screen.
    
    <H5>4.5.4 FTP Options</H5>
    
    <P>The FTP Options screen requires you to enter an FTP URL, and an FTP
    username and password.  
    
    <P>Since an FTP URL is required, other URLs such as http:// and file:// will 
    not work.
    
    <P>Once you have correctly entered your FTP options, click on the button
    marked Next at the bottom of your screen.  This will take you to the
    Ready to Upgrade screen.  The Ready to Upgrade screen reads "All Setup
    values entered.  Ready to dial ISP, and upgrade your machine.".  There
    are three buttons at the bottom of the screen marked Back, Upgrade,
    and Cancel, and a "Ready" heading can be seen at the top of the screen.
    
    <H5>4.5.5 Screen to Screen Navigation</H5>
    
    <P>Whilst going through the setup screens you may now have noticed
    that clicking on the Back button allows you to navigate back to
    previous screens and change previously entered details should you
    wish to do so before the upgrade commences.  
    
    <H5>4.5.6 Saving Setup Details</H5>
    
    <P>The information that you have entered on the setup screens will
    be saved when you start the actual upgrade process.  This means that
    on subsequent upgrades, you will not have to re-enter all of the
    setup details.  You will however have the option to make changes,
    should you wish to do so.

<H4><A NAME="op6" HREF="#op6">4.6 Upgrading</A></H4>
    <P>Once you have completed the setup screens and are at the Ready
    to Upgrade screen, click on the Upgrade button at the bottom of the
    screen to begin the actual upgrade process.  It is at this point
    that you will begin to overwrite any valid Main OS that you might 
    previously have had installed.
    
    <P>The start of the actual upgrade process occurs with an "Upgrading
    Your Machine" screen.  A status field displays the current status,
    which to begin with will be "Dialling ISP ..." as the NC dials
    the ISP using information previously entered on the setup screens.
    An estimate of the remaining time is shown to provide some indication 
    of how long the download is expected to take.  A percentage indicator 
    shows the amount of data that has been programmed to Flash.  This indicator 
    does not increment immediately because before any data can be programmed to 
    Flash a connection needs to be established and the first chunk of data
    needs to be downloaded, decompressed, and Flash itself erased.  A
    progress bar also provides graphical indication of progress.
    
    <P>Once a modem connection has been established, the LED marked "Running"
    on the front of your NC will switch on, and will remain on until the
    line has been dropped.  
    
    <P>Shortly after a modem connection has been established you will
    see the on screen status indicator advance to "Connecting to ISP ..."
    and then "Fetching image and writing flash ...".  It will take a 
    little while for the first time estimate to appear. 
    Shortly after the time estimate has appeared you should see
    the percentage indicator start to increment as the first batch of
    data is programmed into Flash.  The progress bar increments in five
    percent intervals.
    
    <P>If the password you entered on the setup screens was incorrect,
    or if a connection could not be established, you will see an error
    popup appear during the earlier stages of the upgrade.  Similarly,
    you will be informed of any other errors that can occur during the
    upgrade process.
    
    <P>If the data being downloaded has been compressed using software
    that is <a href="overview">incompatible</a> with this system, an
    error pop-up will appear indicating that there was a problem with
    the image.  The data received is either not of the format expected 
    by the systems' decompression algorithms, or the data is corrupt. 
    Ensure that you have correctly followed the instructions given in
    section 4.1. 
    
    <P>You can abort the upgrade at any time by clicking on the Stop
    button at the bottom of the screen.  If you do decide to abort
    once an upgrade is in progress, you will be warned that an upgrade
    will be necessary the next time you use your box, since you will
    have left it in a half programmed and therefore unusable state in
    terms of normal system usage.  Should you then decide that you
    want to cancel your abort request, click Continue on the error
    pop-up.  The upgrade process will ignore your abort request and
    continue upgrading.  You cannot carry out a partial upgrade and
    still expect the Main OS to be usable.
    
    <P>The upgrade is complete when the progress indicator has reached
    100 percent and the "Finished Upgrade" screen appears.  You can now 
    reset your box and begin using your newly programmed Main OS.  The
    reset switch is positioned under the flap on the front of your NC
    and is clearly labelled as the Reset button.  
   
<H4><A NAME="op6" HREF="#op7">4.7 Faded Stop Button</A></H4>
    <P>The stop button is greyed out when it is appropriate to do so.  As 
    an example, it is pointless pressing stop whilst disconnect is in progress 
    because the system is already stopping, so at this point in time the stop 
    button is greyed out. 

<H4><A NAME="op8" HREF="#op8">4.8 Front Panel LEDs</A></H4>
    <P>The left LED, marked "Standby", should appear green when the application 
    is running.  The right LED, marked "Running", should be on when the modem is 
    connected, otherwise it should be off.  
    
<H4><A NAME="op9" HREF="#op9">4.9 NVRAM Defaults Following NVRAM Reset</A></H4>    
    <P>Following NVRAM reset the modem dial script should default to 
    <PRE>
    TIMEOUT 5\n"" ATZ\nOK AT*NC\nTIMEOUT 50\nOK ATDT\nogin: \nassword: \n
    </PRE>
    NVRAM reset is achieved by attaching a keyboard and holding down the 
    delete key whilst powering on.
    
<HR>    

<H3><A NAME="updates" HREF="#toc_updates">5. Updates </A></H3>
<P>The following changes have been made since the previous release.

<H4><A NAME="update1" HREF="#update1">5.1 Controllerless Modem</A></H4>
    <P>The software has been changed so that it should pass approvals on "Rev. D"
    or later hardware.
    
    <P>A problem has been fixed in the Cirrus software that caused the modem to
    be unreliable and often drop the line during or shortly after connection.
    
    <P>The modem is not approved for connection to the Public Switched 
    Telephone Network in any country. 
    
<H4><A NAME="update2" HREF="#update1">5.2 Wait for Dialtone Option</A></H4>
    <P>In earlier revisions the application always waits for a dial tone
    before dialling, regardless of the wait for dial tone option on the 
    Dialling Options screen.  This fault has now been corrected.

<HR>

<H3><A NAME="glossary" HREF="#toc_glossary">6. Glossary</A></H3>
<TABLE WIDTH="100%" BORDER=0>
<TR><TD WIDTH="20%">DNS		<TD WIDTH="80%">Domain Name System
<TR><TD>FTP			<TD>File Transfer Protocol
<TR><TD>ISP			<TD>Internet Service Provider
<TR><TD>NC			<TD>Network Computer
<TR><TD>NVRAM			<TD>Non-Volatile Random Access Memory
<TR><TD>URL			<TD>Uniform Resource Locator
<TR><TD>ZLib			<TD>A freely available decompression library.
</TABLE>

<HR>

<H3><A NAME="references" HREF="#toc_references">7. References</A></H3>

<TABLE WIDTH="100%" BORDER=0>
<TR><TD WIDTH="20%">[1] 2205,000/PS	<TD WIDTH="80%">Funai NC2 Product Specification
<TR><TD>[2] 2205,011/FS		<TD>Funai NC2 OS Upgrade Software Functional Specification
<TR><TD>[3] 2205,011/DS		<TD>Funai NC2 OS Upgrade Top Level Software Design Specification
<TR><TD>[4] FTP URLs		<TD><a href="http://www.hut.fi/u/jkorpela/HTML3.2/ftpurl.html">http://www.hut.fi/u/jkorpela/HTML3.2/ftpurl.html</a><br>
</TABLE>

<HR>

</BODY>
</HTML>
