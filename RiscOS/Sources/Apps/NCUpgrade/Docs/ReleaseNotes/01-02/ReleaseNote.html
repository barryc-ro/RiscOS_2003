<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>RISC OS-NC2 Boot ROM Release 01-02</TITLE>
<LINK REV=MADE HREF="mailto:srose@acorn.com">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000ff">

<CENTER><H1>Acorn RISC OS-NC2 Boot ROM Release</H1></CENTER>

<HR>
<P ALIGN=CENTER><STRONG>CONFIDENTIAL</STRONG></P>
<HR>

<CENTER>
<TABLE BORDER=0 WIDTH="60%">
<TR><TD>Release:		<TD>Funai 01-02
<TR><TD>Date:			<TD>$Date$
<TR><TD>Project:		<TD>Funai2 (847)
<TR><TD>Author(s):		<TD><A HREF="mailto:srose@acorn.com">Steve Rose</a>
<TR><TD>Classification:		<TD>Acorn Restricted
<TR><TD>Status:			<TD>DRAFT 
</TABLE>
</CENTER>

<HR>
<H3>Contents</H3>
<OL>
      <LI><A NAME="toc_copyright" HREF="#copyright">Copyright</A>
      <LI><A NAME="toc_overview" HREF="#overview">Overview</A>
      <LI><A NAME="toc_deliverables" HREF="#deliverables">Deliverables</A>
      <LI><A NAME="toc_operation" HREF="#operation">Operation</A>
      <LI><A NAME="toc_problems" HREF="#problems">Known Problems</A>
      <LI><A NAME="toc_references" HREF="#references">References</A>
</OL>
<HR>

<H3><A NAME="copyright" HREF="#toc_copyright">1. Copyright</A></H3>
<P>This document is Copyright 1998 Acorn Computers Ltd.
<HR>

<H3><A NAME="overview" HREF="#toc_overview">2. Overview</A></H3>
<P>This is the first external beta release of the RISC OS-NC2 Boot ROM for Funai NC2 
hardware.  This release is intended to allow system testing and demonstration of the remote 
upgrade process.  It is not the final release candidate and therefore some errors and omissions 
are to be expected.  Errors and omissions currently known are listed in section 5 below. 

<P>Specifications and supporting documentation for the RISC OS-NC2 Boot ROM can be 
obtained by visiting the <a href="http://www.acorn.com/funai2/external/funai2/home.html">
Funai2 project web site</a>.  To avoid confusion with terminology, it should be noted 
that the "RISC OS-NC2 Boot ROM" is referred to as the "Maintenance OS" in most of the 
specifications.  

<P>Section 4 provides a user oriented guide on operation and usage.

<P><strong>The Main OS image on the server must be compressed before it can be downloaded
and programmed into Flash on board the NC. Software for compressing downloadable 
data must be <a href="http://www.cdrom.com/pub/infozip/zlib">ZLib compatible</a>.
(ZLib is a freely available decompression library).  Public domain software for 
compressing your Main OS image can be found at ......</strong>

<HR>

<H3><A NAME="deliverables" HREF="#toc_deliverables">3. Deliverables</A></H3>
<P>The release consists of this release note, a <a href="./xxxxx">4MB binary image</a> 
(compressed as a WinZip archive) containing the RISC OS-NC2 Boot ROM described in this 
document, a <a href="./csvfile">comma-separated-value </a>(CSV) file containing the module 
version numbers that make up the image, and directions on where to find compression software 
that is compatible with this system.

<HR>

<H3><A NAME="operation" HREF="#toc_operation">4. Operation</A></H3>
<P>This section describes how to use the RISC OS-NC2 Boot ROM to upgrade the
Main operating system on your NC2 hardware.

<H4><A NAME="op1" HREF="#op1">4.1 Automatic Upgrade</A></H4>
    <P>Automatic upgrade will occur if the Boot ROM is unable to detect a valid 
    Main OS in the on-board Flash memory.  The procedure for automatic upgrade 
    consists of powering on your box and following the steps described in section 
    4.4.  To power on your box, insert the power connector at the back of the
    NC.
    
<H4><A NAME="op2" HREF="#op2">4.2 User Initiated Upgrade</A></H4>
    <P>If you already have a valid Main OS in the on-board Flash memory but would 
    still like to upgrade, the user initiated upgrade procedure must be followed.  
    This consists of holding down the mode select button on the front panel of your 
    NC whilst powering on, and then following the steps described in section 4.4.
    To power on you must insert the power connector at the back of the NC.
    
<H4><A NAME="op3" HREF="#op3">4.3 The Welcome Screen</A></H4>
    <P>Following the initial steps for automatic or user initiated upgrade 
    described above, you should arrive at the welcome screen for the NC
    upgrade process.  The welcome screen contains the Doro TV-Surfer logo,
    text which reads "You have decided to upgrade your machine.  You may
    cancel, or continue to upgrade your machine.", and two buttons marked
    Continue and Cancel.  Select Contine to enter the setup screens.
    
<H4><A NAME="op4" HREF="#op4">4.4 The Setup Screens</A></H4>

    <H5>4.4.1 Dialling Options</H5>

    <P>The first setup screen you will see is Dialling Options.  Here you
    should enter your country code, outside line prefix, wait for dial tone,
    and call waiting options.  Pressing the <em>Keyb.</em> button on your
    handset will cause the on-screen keyboard to appear.  You can then use
    the large blue navigation button on your handset to move around and
    select text that you want entered in the fields below.  Use the <em>
    Enter</em> button below the navigation button on your handset to select
    particular keys once you have positioned the cursor correctly over the
    key you wish to select.  If you have entered information incorrectly,
    the system will inform you of the offending field and prevent you
    from proceeding further until a correction has been made.  
    
    <P>Once you have correctly entered your dialling options, click on 
    the button marked Next at the bottom of your screen.  This will take
    you to the ISP Options screen. 
    
    <H5>4.4.2 ISP Options</H5>
    
    <P>The ISP Options screen requires you to enter information pertaining
    to your Internet Service Provider.  This comprises your ISP phone
    number, ISP username and password, up to two space separated DNS
    servers, and a modem dial script.  For security reasons your password
    will be echoed as a series of hyphens to prevent onlookers from reading 
    your password.  DNS server addresses are currently unused (refer section 
    5.6), however the system still requires you to enter at least one 
    valid DNS address.  At the present time you can enter 
    111.111.111.111 to comply with user interface data validation,
    although obviously once DNS addresses begin to be used you'll need to
    enter correct DNS server address(es).  A modem dial script will appear
    by default, regardless of whether or not you have saved one previously.
    *** more to add(?) ***
    
    <P>Once you have correctly entered your ISP options, click on the button
    marked Next at the bottom of your screen.  This will take you to the FTP
    Options screen.
    
    <H5>4.4.3 FTP Options</H5>
    
    <P>The FTP Options screen requires you to enter an FTP URL, and an FTP
    username and password.  
    
    <P><strong>Since DNS is currently unused, you must provide an FTP URL in 
    IP address format as opposed to using hostnames.  To give an example, 
    "ftp://136.170.131.2/MainOS" is valid, "ftp://ftp.acorn.co.uk/MainOS" 
    is not.</strong>  
    
    <P>Since an FTP URL is required, other URLs such as http:// and file:// will 
    not work.
    
    <P>Once you have correctly entered your FTP options, click on the button
    marked Next at the bottom of your screen.  This will take you to the
    Ready to Upgrade screen.  The Ready to Upgrade screen reads "All Setup
    values entered.  Ready to dial ISP, and upgrade your machine.".  There
    are three buttons at the bottom of the screen marked Back, Upgrade,
    and Cancel, and a heading at the top of the screen which presently
    reads as "Finished" but will be changed to "Ready" for the next release
    as it is thought that "Finished" in this context is misleading and
    inappropriate.
    
    <H5>4.4.4 Screen to Screen Navigation</H5>
    
    <P>Whilst going through the setup screens you may now have noticed
    that clicking on the Back button allows you to navigate back to
    previous screens and change previously entered details should you
    wish to do so before the upgrade commences.  
    
    <H5>4.4.5 Saving Setup Details</H5>
    
    <P>The information that you have entered on the setup screens will
    be saved when you start the actual upgrade process.  This means that
    on subsequent upgrades, you will not have to re-enter all of the
    setup details.  You will however have the option to make changes,
    should you wish to do so.

<H4><A NAME="op5" HREF="#op5">4.5 Upgrading</A></H4>
    <P>Once you have completed the setup screens and are at the Ready
    to Upgrade screen, click on the Upgrade button at the bottom of the
    screen to begin the actual upgrade process.  It is at this point
    that you will begin to overwrite any valid Main OS that you might 
    previously have had installed.
    
    <P>The start of the actual upgrade process occurs with an "Upgrading
    Your Machine" screen.  A status field displays the current status,
    which to begin with will be "Dialling ISP ..." as the NC dials
    the ISP using information previously entered on the setup screens.
    An estimate of the remaining time is shown to provide some indication 
    of how long the download is expected to take.  A percentage indicator 
    shows the amount of data that has been programmed to Flash.  This indicator 
    does not increment immediately because before any data can be programmed to 
    Flash a connection needs to be established and the first chunk of data
    needs to be downloaded, decompressed, and Flash itself erased.  A
    progress bar also provides graphical indication of progress.
    
    <P>Once a modem connection has been established, the LED marked "Running"
    on the front of your NC will switch on, and will remain on until the
    line has been dropped.  
    
    <P>Shortly after a modem connection has been established you will
    see the on screen status indicator advance to "Connecting to ISP ..."
    and then "Fetching image and writing flash ...".  It will take a 
    little while for the first time estimate to appear. 
    Shortly after the time estimate has appeared you should see
    the percentage indicator start to increment as the first batch of
    data is programmed into Flash.  The progress bar increments in five
    percent intervals.
    
    <P>If the password you entered on the setup screens was incorrect,
    or if a connection could not be established, you will see an error
    popup appear during the earlier stages of the upgrade.  Similarly,
    you will be informed of any other errors that can occur during the
    upgrade process.
    
    <P>If the data being downloaded has been compressed using software
    that is <a href="overview">incompatible</a> with this system, an
    error pop-up will appear indicating that the data received is either 
    not of the format expected by the systems' decompression algorithms, 
    or the data is corrupt.  
    
    <P>You can abort the upgrade at any time by clicking on the Stop
    button at the bottom of the screen.  If you do decide to abort
    once an upgrade is in progress, you will be warned that an upgrade
    will be necessary the next time you use your box, since you will
    have left it in a half programmed and therefore unusable state in
    terms of normal system usage.  Should you then decide that you
    want to cancel your abort request, click Continue on the error
    pop-up.  The upgrade process will ignore your abort request and
    continue upgrading.  You cannot carry out a partial upgrade and
    still expect the Main OS to be usable.
    
    <P>The upgrade is complete when the progress indicator has reached
    100 percent and the "Finished Upgrade" screen appears.  You can now 
    reset your box and begin using your newly programmed Main OS.  
    
    <P>Note: The "Finished Upgrade" screen instructs you to press Continue
    to start using your machine.  There is currently a problem with
    this (refer section 5.4) so you should carry out a hard reset by 
    powering off and on again.
   
<H4><A NAME="op6" HREF="#op6">4.6 Faded Stop Button</A></H4>
    <P>The stop button is greyed out when it is appropriate to do so.  As 
    an example, it is pointless pressing stop whilst disconnect is in progress 
    because the system is already stopping, so at this point in time the stop 
    button is greyed out. 

<H4><A NAME="op7" HREF="#op7">4.7 Front Panel LEDs</A></H4>
    <P>The left LED, marked "Standby", should appear green when the application 
    is running.  The right LED, marked "Running", should be on when the modem is 
    connected, otherwise it should be off.  
    
<H4><A NAME="op8" HREF="#op8">4.8 NVRAM Defaults Following NVRAM Reset</A></H4>    
    <P>Following NVRAM reset the modem dial script should default to 
    <PRE>
    TIMEOUT 5\n"" ATZ\nOK AT*NC2\nTIMEOUT 30\nOK ATDT\nogin: \nassword: \n
    </PRE>
    NVRAM reset is achieved by attaching a keyboard and holding down the 
    delete key whilst powering on.
    
<HR>    
   
<H3><A NAME="problems" HREF="#toc_problems">5. Known Problems </A></H3>
<P>
    
<H4><A NAME="problem1" HREF="#problem1">5.1 Welcome Screen</A></H4>
    <P>The application does not yet distinguish between user-initated
    and automatic upgrades.  Therefore, text seen on the welcome screen
    reads "You have decided to upgrade your machine ...", regardless
    of whether or not it is the user who has decided to upgrade.

<H4><A NAME="problem2" HREF="#problem2">5.2 Line Drop</A></H4>
    <P>On occasion the controllerless modem will drop the line.  Based on
    observations so far, if this is going to happen it will happen at
    the start of the download before a percentage increase in the amount 
    of data programmed to Flash has registered on screen.

<H4><A NAME="problem3" HREF="#problem3">5.3 Restarts</A></H4>
    <P>If an error occurs during download it may be necessary to reset the
    box before re-attempting the upgrade.
    
<H4><A NAME="problem4" HREF="#problem4">5.4 Soft Resets</A></H4>
    <P>Once the upgrade is complete, it is necessary to reset the system by 
    powering off and on again, or by pressing the reset button on the front
    of the NC.
    
<H4><A NAME="problem5" HREF="#problem5">5.5 The 'Try Again' and 'Cancel' Options</A></H4>
    <P>The Try Again and Cancel options which appear on error pop-ups when
    errors occur do not always take you to the right place.  The Cancel 
    option has been corrected and will appear in the next release (not in
    this release).  The Try Again option will be investigated shortly.
    
<H4><A NAME="problem6" HREF="#problem6">5.6 DNS</A></H4>
    <P>Support for DNS lookup has been implemented but requires an additional
    field to be added to the user interface.

<HR>

<H3><A NAME="references" HREF="#toc_references">9. References</A></H3>

<TABLE WIDTH="100%" BORDER=0>
<TR><TD WIDTH="20%">2205,000/PS	<TD WIDTH="80%">Funai NC2 Product Specification
<TR><TD>2205,011/FS		<TD>Funai NC2 OS Upgrade Software Functional Specification
<TR><TD>2205,011/DS		<TD>Funai NC2 OS Upgrade Top Level Software Design Specification
</TABLE>

<HR>

</BODY>
</HTML>
