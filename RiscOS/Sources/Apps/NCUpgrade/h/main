/************************************************************************************/
/*                                                                                  */
/*  File: main.h                                                                    */
/*                                                                                  */
/*  Copyright © 1998 Acorn Computers Ltd., Cambridge, England                       */
/*                                                                                  */
/*  Modification History:                                                           */
/*  Date         Engineer  Change                                                   */
/*  ----         --------  ------                                                   */
/*  xx-Jul-1998  SR        Created                                                  */
/*                                                                                  */
/************************************************************************************/

#ifndef __main_h
#define __main_h

#include "kernel.h"
#include "ui.h"

#define DEVELOPMENT /* Undefine this on final release */
#define TIME_DELAY 5 /* Used in dialler and other simulation(s) */
#define LOGFILE /* Undefine on final release */

#define FALSE 0
#define TRUE 1
#define SUCCESS 0
#define FAILURE 1
#define WARNING 0
#define FATAL 1

#define IMAGESIZE (8 * 1024 * 1024)

enum reason_code {START,
                  CLOSE,
                  ABORT,
                  POLL,
                  HANGUP};

/* These must not conflict with Flash Library return codes */
/* enum was considered but return codes can be flash lib   */
/* codes and other codes as well as those below.           */
#define IN_PROGRESS 10
#define DONE        11
#define ERROR       12

#ifdef LOGFILE
#include <stdio.h>
extern FILE *logfile;
#endif

/******************************************************************************/
/*                            UI Library Callbacks                            */
/******************************************************************************/

extern _kernel_oserror *callback_start_upgrade(unsigned int flags,setup_details_t *defaults);
extern _kernel_oserror *callback_user_abort(unsigned int flags);
extern _kernel_oserror *engine_reboot(unsigned int flags);
extern _kernel_oserror *encountered_error(unsigned int flags,_kernel_oserror *);
extern _kernel_oserror *pause(unsigned int flags);
extern _kernel_oserror *setup_started(unsigned int flags);
extern _kernel_oserror *resume(unsigned int flags);
extern _kernel_oserror *callback_error_action(unsigned int flags,error_action_t error_action);

#endif

