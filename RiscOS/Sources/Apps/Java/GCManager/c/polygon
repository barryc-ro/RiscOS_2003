#include "stdlib.h"
#include "kernel.h"
#include "swis.h"
#include "wimp.h"

#include "GCManager.h"
#include "task.h"
#include "utils.h"

void plot_polygon(GC *gc, Graphics_op *op)
{
    GC_attributes *atts = set_gc_atts(gc, SET_FOREGROUND | SET_PLOT_TYPE);
    int *xpoints = op->data.polygon.xpoints;
    int *ypoints = op->data.polygon.ypoints;
    int npoints = op->data.polygon.npoints;
    int i;

    os_plot(VDU_PLOT_MOVE, gc->ox + *xpoints, gc->oy + *ypoints);

    for(i = 1; i < npoints; i++)
        os_plot(atts->line_style | VDU_PLOT_DRAW,
        		gc->ox + *++xpoints, gc->oy + *++ypoints);

}


void dispose_polygon(Graphics_op *op)
{
    free(op->data.polygon.xpoints);
}
