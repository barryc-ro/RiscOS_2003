<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Experimental 19960712//EN">
<html>
  <!-- ======================================================================= -->
  <!--         Template for software functional specifications.                -->
  <!-- ======================================================================= -->
  <head>
    <title>
      Browser Software Functional Specification
    </title>
  </head>

  <body BGCOLOR="#ffffff">


    <h1 align=center>
      Browser Software Functional Specification 
    </h1>

    <p>
    <hr>
    <p align=center><strong>CONFIDENTIAL</strong></p>
    <hr>

    <CENTER>
      <TABLE BORDER=0 WIDTH="40%">
	  <TR><TD>Document ref:	<TD>2107,800
	  <TR><TD>Project:	<TD>NC101
	  <TR><TD>Revision:	<TD>$Revision$
	  <TR><TD>Date:		<TD>$Date$
	  <TR><TD>Author(s):	<TD><A HREF="mailto:smiddleton@acorn.co.uk">Simon Middleton</a>
	  <TR><TD>Change:		<TD>
	  <TR><TD>Classification:	<TD>Acorn Confidential
      </TABLE>
    </CENTER>

    <!-- ======================================================================= -->

    <hr>
    <h2> Contents </h2>
    <TABLE BORDER=0 WIDTH="100%">
	<TR><TD WIDTH="8%">1.0		<TD><A HREF="#overview">	Overview </A>
	<TR><TD>2.0		<TD><A HREF="#outstanding">	Outstanding issues </A>
	<TR><TD>3.0		<TD><A HREF="#technical">	Technical background </A>
	<TR><TD>4.0		<TD><A HREF="#user">		User interface </A>
	<TR><TD>5.0		<TD><A HREF="#programmer">	Programmer interface </A>
	<TR><TD>6.0		<TD><A HREF="#interchange">     Data interchange </A>
	<TR><TD>7.0             <TD><A HREF="#formats">         Data formats </A>
	<TR><TD>8.0             <TD><A HREF="#external">        External dependencies </A>
	<TR><TD>9.0		<TD><A HREF="#acceptance">	Acceptance test </A>
	<TR><TD>10.0            <TD><A HREF="#noncompliances">  Non compliances </A>
	<TR><TD>11.0		<TD><A HREF="#test">		Development test strategy </A>
	<TR><TD>12.0		<TD><A HREF="#organisation">	Product organisation </A>
	<TR><TD>13.0		<TD><A HREF="#enhancements">	Future enhancements </A>
	<TR><TD>14.0	<TD><A HREF="#glossary">	Glossary </A>
	<TR><TD>15.0	<TD><A HREF="#references">	References </A>
	<TR><TD>16.0	<TD><A HREF="#history">		History </A>
    </TABLE>

    <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="overview"> 1.0 Overview </a> </h2>

    <P> This document contains the software functional specification for
      the Web browser included in the system ROM of the <A HREF="#pdd">NC101
      Network Computer [3]</A>.

    <P>Italicised text is used where issues are still to be decided
      or where contents are liable to change.

    <P>

      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="outstanding"> 2.0 Outstanding issues </a> </h2>

    <OL>
      <LI>The browser reloads the password file on receipt of a
	message. The authenticate module needs to do something
	similar. Preferably without the browser being
	involved. Perhaps a service call should be sent around when
	the user changes as well as the browser message.

      <LI>Need to check that the textarea gadget can do everything that
	is needed of it in terms of RCA functionality and what I promise
	here. We need to be able to
	<UL>
	  <LI>To control foreground, background and cursor
	    colours.
	  <LI>To turn off the scroll bars and the border
	    (so that we can draw a TCE style border around the text).
	  <LI>To control the key shortcut actions.
	  <LI>To control when the cursor goes in and out of the gadget.
	</UL>

      <LI>Need a textarea gadget spec to reference.
    </OL>
    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="technical"> 3.0 Technical background </a> </h2>

    <P>The browser for the NC101 is substantially the same as included
      in NC100 with the addition of some deferred features and better
      support for <A HREF="#java">Java [9]</A> and <A HREF="#shockwave">Shockwave [10]</A> plugins.

    <P>This document describes only new work planned for the NC101
    browser and not, except where necessary, existing behaviour. See
    the previous specifications <A HREF="#model1">[4]</A>, <A
    HREF="rca">[5]</A> for more details.


    <h3><A NAME="auth"> 3.1 Authentication module support</A></h3>

    <P>Other applications, notably Java, require access to the
      database of user names and passwords used by the browser. This
      database is added to whenever a web site asks for a name and
      password before entry.

    <P>A module, <A HREF="#authspec">Authenticate [6]</A>, is written to
      handle this database, and the browser is modified to use this
      module to store its passwords rather than its internal database.

    <P>At the same time the behaviour of the authentication support is
      modified as follows:

    <P>In NC100 the realm name alone identified the user name and
	password. For greater compatibility with Netscape's
	implementation the realm name, host name and port number must
	match for a user name and password to be sent. If the host or
	port differs then the user has to re-enter the password.
<!--
      <LI>In NC100 all the URLs for which a password had been entered
      were stored so that if re-accessed a second authentication
      dialogue with the server need not be entered. This list is not
      kept in NC101. This saves memory when accessing many sites
      that use passwords. The only user visible change is that
      reloading a password protected site is slightly slower.
 -->

    <P>These changes are not visible to the user. Note however that
    there is a change to the server use as the default location for
    the saved passwords is different. Previously this was set by the
    system variable <CODE>NCFresco$Users</CODE>, now it is set by the
    system variable <CODE>Authenticate$File</CODE>. 

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="user"> 4.0 User interface </a> </h2>

    <OL>
      <LI><A HREF="#cutandpasteforms">Text form edit</a>
      <LI><A HREF="#pluginenhance">Other plugin issues</a>
    </OL>

    <P>

    <hr width="30%" noshade>
    <h3><A NAME="cutandpasteforms">4.1 Text form edit</a></h3>

    <h4>4.1.1 Introduction</h4>

    <P>The existing support for text entry in the browser is rather
      basic. It doesn't support common features on other platforms
      such as 

    <UL>
      <LI>Scroll bars
      <LI>Word wrap
      <LI>Selection of text
      <LI>Cut and paste, within or between fields.
    </UL>

    <P>These features have been built into a Toolbox gadget, <A HREF="#textarea">TextArea
    [7]</A> for use by <A HREF="#java">Java [9]</A> so to avoid duplication of work the browser
    is modified to make use of this gadget.

    <P>In NC100 the browser handled all text entry, caret movement and
    redraw of all <A HREF="#html">HTML [1]</A> objects itself. Its object handling is
    extended for NC101 to support toolbox gadgets generally.

    <h4>4.1.2 HTML items affected</h4>

    <P>For NC101 the following HTML items are handled by the
      textarea gadget.
    <UL>
      <LI>TEXTAREA
      <LI>INPUT TYPE=TEXT, except NUMBERS
      <LI>INPUT TYPE=PASSWORD, except NUMBERS
    </UL>

    <P>The NUMBERS extension for TCE changes the default behaviour in
      a number of different ways and so continues to be handled by
      the old code.

    <h4>4.1.3 Usage</h4>

    <P>A TEXTAREA has the following optional attributes 
    <DL>
      <DT>WRAP=off
      <DD>The default setting. No automatic wrapping is
	performed. Lines extend as necessary.

      <DT>WRAP=virtual
      <DD>with this setting the textarea auto wraps as text is edited
	but the text is sent without the end of line markers that are 
	automatically added.

      <DT>WRAP=physical
      <DD>with this setting the textarea auto wraps as text is edited
	and end of line markers are sent where seen on the screen.
    </DL>

    <P>In each case where the user enters a newline explicitly then
      an end of line marker is always sent.

    <h4>4.1.4 Key shortcuts</h4>

    <P>The following key shortcuts are supported whilst the input
      focus is in a textarea gadget.

    <TABLE>
	<TR><TD ROWSPAN=8 WIDTH=100><TD>Ctrl-D<TD>Delete all text
	<TR><TD>Ctrl-Left<TD>Move to start of text area
	<TR><TD>Ctrl-Right<TD>Move to end of text area
	<TR><TD>Ctrl-End<TD>Delete text to right of cursor
	<TR><TD>Ctrl-C<TD>Copy text to clipboard
	<TR><TD>Ctrl-X<TD>Cut text to clipboard
	<TR><TD>Ctrl-V<TD>Paste text from clipboard
	<TR><TD>Shift cursors<TD>Extend selection
    </TABLE>

    <h4>4.1.5 Clipboard</h4>

    <P>The clipboard used for cut and paste actions is the global
      clipboard so text can be transferred between the browser and
      plugins using it.

    <P>
      <!-- ++++++++++ -->

    <hr width="30%" noshade>

    <h3><A NAME="pluginenhance">4.2 Plugin work</A></h3>

    <h4>4.2.1) Input focus</h4>

    <P>Moving the highlight to a plugin and pressing enter transfers
      the input focus to the plugin. Each plugin must define its own
      method for initiating transfer of the the focus back to the
      browser. When the browser receives the MESSAGE_PLUGIN_FOCUS (See
      plugin spec for details) it places the highlight back around the
      plugin in question.

    <h4>4.2.2) Plugin busy notification</h4>

    <P>An extension to the plugin protocol is defined to allow
      plugins to use the browsers busy notification method (spinning
      logo or similar).

    <P>On loading, a plugin specifies whether it has further work to
    do and therefore whether the busy notifier should be on. After
    that the plugin can disable and enable the notifier as it
    requires.

    <h4>4.2.3) Input focus visibility</h4>

    <P>The browser ensures that when the input focus is in a plugin
    and the browser is in discrete highlighting mode then that portion
    of the plugin is always visible. This is true whether or not the
    on screen keyboard or any browser toolbar is visible.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="programmer"> 5.0 Programmer interface </a> </h2>

    <P>There are no changes to the programmer interface.

      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="interchange"> 6.0 Data interchange </a> </h2>
    
    <P>There are no new data interchange protocols defined in this spec.

    <P>
      <!-- ======================================================================= --> 

    <hr  noshade>
    <h2> <a name="formats"> 7.0 Data formats </a> </h2>

    <P>There are no new data formats defined in this spec.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="external"> 8.0 External dependencies </a> </h2>

    <P>There are no external dependencies.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="acceptance"> 9.0 Acceptance test </a> </h2>

    <h3>9.1 Authenticate module</h3>

    <P>Ensure that password protected sites can be accessed.

    <h3>9.2 Textareas</h3>

    <P>The text areas will still be able to support the requirements
      of the TCE CIS in terms of changing their appearance. They will
      support equivalent functionality to the text areas used in
      Netscape and Internet Explorer. 

    <h3>9.3 Plugins</h3>

    <P>The input focus will transfer in and out of a plugin as
      described, even in cases such as plugin being larger than the
      screen or partially off screen.

    <P>The browser busy notification will activate when requested by
      the plugins.

    <P>The input focus will always be visible on screen when discrete
      mode is in operation.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="noncompliances"> 10.0 Non compliances </a> </h2>

    <OL>
      <LI>The following elements of the HTML 3.2 specification are not implemented.
	<DL>
	  <DT>LINK
	  <DD>This element is very rarely used.
	  <DT>INPUT TYPE=FILE
	  <DD>This element is for file upload over HTTP and is not
	    relevant to the NC as there is no local storage.
	</DL>
    </OL>

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="test"> 11.0 Development test strategy </a> </h2>

    <h3>11.1 Authenticate module support</h3>

    <P>The three authentication tests are
    <OL>
      <LI>Accessing a password protected site
      <LI>Using a password protected proxy
      <LI>Accessing a password protected through a password protected
	proxy
    </OL>
    <P>These situations will be created on an internal server and
      tested.
    <P>A second internal server also with password protected pages
      will be used to verify that passwords do not leak from domain to
      domain and from host to host.

    <h3>11.2 Textareas</h3>

    <P>A selection of HTML pages with differing sizes of textarea will
      be created. Small, medium and large values will be used plus
      illegal values (zero and negative bounds). 
    <P>The extended HTML
      defined for NC100 will be tested to still work. 
    <P>The navigation
      methods in and out of the textarea (links on either side, above
      and below) will be tested. 
    <P>Cut and paste between two textareas will be checked.

    <h3>11.3 Plugins</h3>
    <P>Moving the input focus in and out of various Java and Shockwave
      plugins (including ones that have no writeable element) will be
      checked. 

    <P>A simple applet that turns the busy notification on and
      off will be written to check the control message.

    <P>Java applets and shockwave movies of different size with
    writeable fields will be created or located to ensure the focus is
    always visible.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="organisation"> 12.0 Product organisation </a> </h2>

    <P>The browser is built via a Solaris hosted cross-compiling
      version of ARM cc (Acorn port) v5.06. For ROM release a
      partially linked aod file is creat4ed which is imported into
      the RISC OS build tree. The browser runs from ROM.

    <P>There are several support modules.
    <UL>
      <LI>HTTP transport
      <LI>FTP transport
      <LI>Gopher transport
      <LI>Resolver
    </UL>

    <P>These are all written in C and integrated into the build
      tree.

    <P>The SSLeay library that provides SSL support for the HTTP
      module is cross-compiled on Solaris and creates two ALF format
      files that are linked with the HTTP module in the main ROM build.

    <P>
      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="enhancements"> 13.0 Future enhancements </a> </h2>

    <P>See the previous version for a more complete list of future
      enhancements. Here are a few that relate directly to the issues
      being addressed by this specification.

    <UL>
      <LI>Plugin issues
	<UL>
	  <LI>EMBED generic attribute handling.<BR>
	    Currently, EMBED attributes need to be compiled in to be
	    recognised. This could be changed to allow all attributes
	    to be passed to the plugin, although the intention is that
	    the OBJECT tag is used in these cases instead.

	  <LI>Integration of plugin (especially Java) menus with browser
	    menu. 

	  <LI>Control of plugin cut and paste from browser menu.

	  <LI>Allowing the user to remove a plugin forcibly.
	</UL>

      <LI>Use of more toolbox gadgets in forms<BR>eg List selector
	gadget for multiple selection SELECT elements.

      <LI>Selection and cut and paste of text outside forms.
    </UL>

    <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="glossary"> 14.0 Glossary </a> </h2>

    <TABLE WIDTH="100%" BORDER=0>
	<TR><TD WIDTH="20%">AIFF		<TD WIDTH="80%">Standard Macintosh audio format.
	<TR><TD>API	<TD>Application Programmer Interface.
	<TR><TD>Applet	<TD>Small application, usually written in
	    Java, embedded in a web page.
	<TR><TD>Cache		<TD>Area of disk or memory used to
	    store recently accessed files.
	<TR><TD>Caret		<TD>Text cursor.
	<TR><TD>CIS		<TD>Customer Interface Specification.
	<TR><TD>Codec		<TD>COder-DECoder.
	<TR><TD>GIF		<TD>Graphics Interchange Format. A compressed image format.
	<TR><TD>FORM		<TD>An HTML element that allows the
	    user to mnake selections and enter text that is then sent
	    to a server.
	<TR><TD>Frame		<TD>An independently scrollable
	    portion of an HTML page.
	<TR><TD>FTP		<TD>File Transfer Protocol.
	<TR><TD>History		<TD>A list of pages visited by the
	    user recently.
	<TR><TD>HTML		<TD>Hyper Text Markup Language.
	<TR><TD>HTML 3.2	<TD>The current base-line HTML standard.
	<TR><TD>HTTP		<TD>Hyper Text Transport Protocol.
	<TR><TD>Imagemap	<TD>An image where clicking on
	    different areas will launch different URLs.
	<TR><TD>IP		<TD>Internet Protocol.
	<TR><TD>IR		<TD>Infra-Red.
	<TR><TD>JFIF		<TD>JPEG File Interchange
	    Format. Standard file format for most (bti not all) JPEG files.
	<TR><TD>JPEG		<TD>Joint Photographic Experts Group. A compressed image format.
	<TR><TD>LED		<TD>Light Emitting Diode.
	<TR><TD>MIDI		<TD>Musical Instrument DigitalInterface. Standard file format for score based music.
	<TR><TD>MIME		<TD>Multipurpose Internet Mail Extensions.
	<TR><TD>NC		<TD>Network Computer.
	<TR><TD>NTSC		<TD>TV standard used in the USA.
	<TR><TD>NVRAM		<TD>Non-volatile RAM. Maintains its
	    contents when power is off.
	<TR><TD>OS		<TD>Operating System.
	<TR><TD>PAL		<TD>TV standard used in Europe.
	<TR><TD>PDD		<TD>Product Definition Document.
	<TR><TD>PICS		<TD>Platform for Internet Content Selection.
	<TR><TD>Plugins		<TD>A program that
	    extends the browser by handling a particulat type of file
	    embedded in an HTML page.
	<TR><TD>PNG		<TD>Portable Network Graphic. A
	    compressed image format.
	<TR><TD>proxy		<TD>Computer that handles requests for
	    files on behalf of the NC, allowing the NC to have
	    communication with only one other machine.
	<TR><TD>RAM		<TD>Random Access Memory.
	<TR><TD>ROM		<TD>Read Only Memory.
	<TR><TD>SMTP		<TD>Simple Mail Transport Protocol.
	<TR><TD>Sprite		<TD>An Acorn proprietary bitmap
	    graphics file format.
	<TR><TD>SSL		<TD>Secure Sockets Layer.
	<TR><TD>SWI		<TD>Software Interrupt.
	<TR><TD>TCP		<TD>Terminal Connection Protocol.
	<TR><TD>UI		<TD>User Interface.
	<TR><TD>URL		<TD>Uniform Resource Locator.
	<TR><TD>Wave		<TD>Also WAV. Standard Windows audio format.
	<TR><TD>WIMP		<TD>Window Manager.
	<TR><TD>W3C		<TD>World Wide Web Consortium. Closest thing 
	    to a useful standards body for web software.
    </TABLE>

    <P>

      <!-- ======================================================================= -->

    <hr  noshade>
    <h2> <a name="references"> 15.0 References </a> </h2>

    <P>The following external standards are referenced in this spec.

    <DL>

      <DT>[1] <A NAME="html" HREF="http://www.w3.org/pub/WWW/TR/">HTML 3.2
	  Reference Specification</a>
      <DD>The base document for the NCBrowser HTML implementation.

      <DT>[2] <A NAME="cis">CIS</A>
      <DD>NC101 Customer Interface Specification, Thomson Consumer
	Electronics. 

      <DT>[3] <A NAME=pdd>PDD</A>
      <DD>NC100/101 TV Network Computer - Product Definition Document. Thomson Consumer
	Electronics. 

      <DT>[4] <A NAME=model1 HREF="../../../rca_nc100/referenced_soft/apps/browser.html">
	  Browser Software Functional Specification {Model 1]</A>
      <DD>Document ref: 2103,702

      <DT>[5] <A NAME=rca HREF="../../../rca_nc100/software_docs/apps/browserrca.html">
	  Browser Software Functional Specification [NC100]</A>
      <DD>Document ref: 2107,702

      <DT>[6] <A NAME="authspec" HREF="../os/authenticate.html">
	  Authenticate Software Functional Specification [NC101]</A>
      <DD>Document ref: 2107,754

      <DT>[7] 
	  TextArea Gadget Software Functional Specification [NC101]
      <DD>Document ref: [not written yet]

      <DT>[8] <A NAME="pluginspec" HREF="../../../rca_nc100/software_docs/apps/plugin.html">
	  Plugin Protocol Functional Specification [NC100]</A>
      <DD>Document ref: 2107,740

      <DT>[9] <A NAME="java" HREF="../../../rca_nc101/software_docs/apps/java.html">
	  Java Software Functional Specification</A>
      <DD>Document ref: 2207,710

      <DT>[10] 
	  Director Player Functional Specification
      <DD>Document ref: 2107,711


      <DT>
    </DL>

    <P>

      <!-- ======================================================================= -->

    <hr>
    <h2> <a name="history"> 16.0 History </a> </h2>

    <PRE>
1.1 SJM 16-May-97 Created
$Log$
Revision 1.6  1997/08/21 12:25:19  srose
Removed broken link to a spec which was never written (NC101 got
cancelled).

Revision 1.5  1997/08/21 12:24:00  srose
fixed broken url link

Revision 1.4  1997/08/21 12:09:09  srose
removed broken url link to a spec that was never written.

Revision 1.3  1997/08/21 12:06:56  srose
url correction.

Revision 1.2  1997/06/23 09:47:45  smiddle
SECTION: throughout
CHANGE: Added reference numbers and links
REASON: from review
IMPACTS: none

SECTION: 2.0
CHANGE: Removed authenticate spec number issue
REASON: It now has one
IMPACTS: none

SECTION: 3.1
CHANGE: Removed para on URL storage
REASON: Misunderstood code, it is needed
IMPACTS: none

SECTION: 3.1
CHANGE: Rewrote para on server changes.
REASON: from review
IMPACTS: none

SECTION: 4.2
CHANGE: Deleted introductory paragraph
REASON: from review
IMPACTS: none

SECTION: 9.1
CHANGE: Simplified
REASON: from review
IMPACTS: none

SECTION: 9.2
CHANGE: Deleted reference to anti-twitter
REASON: from review
IMPACTS: none

SECTION: 11.2
CHANGE: wide -> side
REASON: typo
IMPACTS: none

    </PRE>

    <hr>
    <P>

    <TABLE BORDER=1 WIDTH="100%">
	<TR>
	  <TD WIDTH="50%" VALIGN=TOP>
	    <SMALL>
	      This document is issued under license and must not be copied, reproduced
	      or disclosed in part or whole outside the terms of the license.
	    </SMALL>
	  <TD WIDTH="50%" VALIGN=TOP>
	    <SMALL>
	      For NC Inc. by Acorn Computers Ltd, UK.<BR>
	      &#169; Acorn Computers Ltd 1997<BR>
	    </SMALL>
    </TABLE>

    <HR>
    <!-- Created: Fri Nov  8 14:19:55 GMT 1996 -->
    <!-- hhmts start -->
Last modified: Mon Jun 23 10:43:51 BST 1997
<!-- hhmts end -->
  </body>
</html>
