/*************************************************************************
Copyright [2000] Pace Micro Technology PLC. All rights reserved.

The copyright in this material is owned by Pace Micro Technology PLC
("Pace"). This material is regarded as highly confidential trade secret
of Pace. It may not be reproduced, used, sold or in any other way exploited
or transferred to any third party without the prior written permission of
Pace.
--------------------------------------------------------------------------
* Purpose:
*
*
--------------------------------------------------------------------------
* History:
*
*
**************************************************************************/

/**************************************************************************
* Include header files
**************************************************************************/
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include "swis.h"
#include "serial/serial.h"
#include "zmodem/zmodem.h"
#include "script.h"





/*********************************************************************************
* function: script_process
*
* description: function to process a BrainLink script file.
*
* Parameters:
* Assumptions:
*
*
*
* Returns:
*
*
*
*
*********************************************************************************/

extern void script_process (FILE* script)
{
   char line[256];
   char terminate[2] = "\r";


   while (fgets (line, 255, script))
   {


      line[strlen (line)] = '\0';

      if (line[0] == 'c' || line[0] == 'C')
      {
         _swix (OS_CLI, _IN(0), &line[2]);
      }
      else if (line[0] == 's' || line[0] == 'S')
      {
         serial_writeString (&line[2]);
         serial_writeString (terminate);
      }
      else if (line[0] == '>')
      {
         directzmodemtx (&line[1]);
      }

   }
}






