//Printer - Calls the BASIC printer test
// 12/2/99  NCE        created

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "kernel.h"
#include "swis.h"

#include "support.h"
#include "module.h"
#include "InputTest.h"
#include "display.h"
#include "msgs.h"

void printer_test(void)
{
  int result;
  extern int test_mode;
  _kernel_swi_regs reg;

  reg.r[0] = 1;
  _kernel_swi(OS_ScreenMode,&reg,&reg);   //read screen mode
  system("<UnitTest$Dir>.Printer");
  reg.r[0] = 0;
  _kernel_swi(OS_ScreenMode,&reg,&reg);   //restore screen mode
  //restore graphics cursor
  _kernel_oswrch(5);
  clear_whole_screen();
  display_refresh();
  display_status(PRINTER,RUNNING);
  display_info(input_test_msg[14]);
  display_instruction(YESNO_INST_LINE,general_msg[02]);
  result=get_yn_responce_timed(1000);
  log_status(PRINTER,result);
  clear_whole_screen();
  display_refresh();
}
