//TestCard - Displays a testcard and asks the user if it looks OK
// 4/2/99  NCE        created

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "kernel.h"
#include "swis.h"

#include "support.h"
#include "module.h"
#include "InputTest.h"
#include "display.h"
#include "msgs.h"
#include "MouseTest.h"

void TestCard(void)
{
  int result;
  _kernel_swi_regs reg;

  display_status(TESTCARD,RUNNING);
  display_info(input_test_msg[20]);
  display_info(input_test_msg[19]);
  display_instruction(YESNO_INST_LINE,(general_msg[0]));
  WaitForOKKey();
  #ifdef SYSSTB3
  //start the testcard as a wimp task
  reg.r[0]=(int)"<UnitTest$Dir>.TestCard";
  _kernel_swi(Wimp_StartTask,&reg,&reg);
  #else
  _kernel_system("<UnitTest$Dir>.TestCard",0);
  #endif
  //restore graphics cursor
  mouse_off();
  _kernel_oswrch(5);
  display_refresh();
  display_status(TESTCARD,RUNNING);
  display_info(input_test_msg[13]);
  display_instruction(YESNO_INST_LINE,general_msg[02]);
  result=get_yn_responce_forever();
  log_status(TESTCARD,result);
  display_refresh();
}
