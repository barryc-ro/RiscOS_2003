//sound.c

//make some noise!

//1.00  11-11-1999 NCE Created

#include "swis.h"
#include "stdio.h"
#include "stdlib.h"
#include "debug.h"

void sound_sound(char *data)
{
  _kernel_swi_regs regs;
  char temp[10];
  int amp,octave,fract,duration;

  deprintf("data: %s\n",data);

  temp[0]=data[0];
  temp[1]=data[1];
  temp[2]=data[2];
  temp[3]=NULL;

  deprintf("temp: %s\n",temp);

  amp=atoi(temp);

  deprintf("amp: %d\n",amp);

  temp[0]=data[3];
  temp[1]=NULL;

  deprintf("temp: %s\n",temp);

  octave=atoi(temp);

  deprintf("octave: %d\n",octave);

  temp[0]=data[4];
  temp[1]=data[5];
  temp[2]=data[6];
  temp[3]=data[7];
  temp[4]=NULL;

  deprintf("temp: %s\n",temp);

  fract=atoi(temp);

  deprintf("fract: %d\n",fract);

  temp[0]=data[8];
  temp[1]=data[9];
  temp[2]=data[10];
  temp[3]=NULL;

  deprintf("temp: %s\n",temp);

  duration=atoi(temp);

  deprintf("duration: %d\n",duration);

  deprintf("pitch: %X\n",(octave <<12)|fract);

  regs.r[0] = 1;           //channel 1
  regs.r[1] = 0x100|amp;
  regs.r[2] = (octave <<12)|fract;
  regs.r[3] = duration;

  _kernel_swi(Sound_Control, &regs, &regs);

}


void sound_stereo(char *data)
{
  int pan;
  _kernel_swi_regs regs;

  pan =atoi(data);

  deprintf("Balance: %d\n",pan);

  regs.r[0]=1;  //channel 1
  regs.r[1]=pan;

  _kernel_swi(Sound_Stereo, &regs, &regs);
}

