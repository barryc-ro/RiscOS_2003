; >s.Descriptor
; Copyright © Pace Micro Technology plc, 2001
; All rights reserved.


DescriptorHandler_OpenStream (R12=client block)
	MOV	R11, R12
	LDR	R12, [R11, #CL_ModuleWorkspace]
;  Claim DSH block (R10)
;  Link into DSH list in parent client block
;  Call client's OpenStream handler
;  Initialise DSH block
;  Return DSH block pointer
	EXIT


DescriptorHandler_DataTransfer (R2=DSH block, R12=client block)
	MOV	R11, R12
	LDR	R12, [R11, #CL_ModuleWorkspace]
	MOV	R10, R2
;  Have we got the PID?
;  Yes:
;    Is there a program element handler installed (i.e. is PID <> -1)?
;    No:
;      Register a program element handler on that PID	(R12=DSH block)
;  Have we got all of the data?
;  Yes:
;    Pass CA private_data_bytes to client
;    Reset buffer pointers to empty
	EXIT


DescriptorHandler_ResetStream (R2=DSH block, R12=client block)
	MOV	R11, R12
	LDR	R12, [R11, #CL_ModuleWorkspace]
	MOV	R10, R2
;  Reset buffer pointers to empty
	EXIT


DescriptorHandler_CloseStream (R2=DSH block, R12=client block)
	MOV	R11, R12
	LDR	R12, [R11, #CL_ModuleWorkspace]
	MOV	R10, R2
;  Call client's CloseStream handler
;  Delink DSH block
;  Free DSH block
	EXIT


	END
