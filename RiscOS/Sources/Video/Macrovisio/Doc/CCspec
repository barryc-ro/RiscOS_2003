                                                    Macrovision_LoadCaptions
                                                                (SWI &4D541)

  Pass data to the SAA7183 chip for encoding on line 21

On entry
  R0 = flags
       Bit     Meaning when set
       0       data is for even fields rather than odd fields
       1       recalculate parity bits
       2       flush the buffer before inserting the new data
       others  reserved, must be zero
  R1 -> bytes to encode
  R2 = number of bytes pointed to by R1

On exit
  All registers preserved

Use
  The NTSC television standard allows two bytes of digital data to be
  encoded on line 21 of each field. These may hold closed captions
  (subtitles for the deaf - there is a legal requirement that all TV sets
  13" or larger sold into the USA since July 1993 must be able to decode
  these), text services (carrying data which is generally not programme-
  related) and extended data service data - packets containing information
  such as:
  * network name and TV station call-letters
  * the current time, date and timezone
  * the delay the TV station applies to network programmes
  * now-and-next programme name, description, category, rating, start time
    and duration
  * the elapsed programme time
  * picture aspect ratio
  * details of audio tracks (language, stereo, etc)
  * VCR control signals

  The odd fields of the video signal are used to carry caption channels 1
  and 2 and text services 1 and 2. The even fields are used for caption
  channels 3 and 4, text services 3 and 4, and the extended data service.

  In each field, two 7-bit, odd parity bytes are transmitted; they are
  preceded by run-in clocks and framing code.

  This SWI places a number of bytes into one of two (small) FIFO buffers,
  out of which data is read 2 bytes at a time, once per frame. If the buffer
  should underrun, null bytes are output (which the TV will ignore), rather
  than leaving the SAA7183 registers at their last value (which would repeat
  every frame) or disabling the line 21 signal (which the TV would detect,
  and clear its overlay memory).

  Flag bit 0 is used to select which field the data is to be output on.

  Flag bit 1 is provided to allow data to be input from a source that does
  not already have parity bits set correctly.

  Flag bit 2 allows the buffer to be flushed before the data is inserted.
  The buffer will still be flushed even if the number of bytes (specified in
  R2) is zero.

  Note that an NTSC macrovision video path must be in use for caption data
  to be output. (Anti-taping is optional.)
