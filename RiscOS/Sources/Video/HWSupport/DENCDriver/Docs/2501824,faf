<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML lang="en">
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>DENCDriver Module Functional Specification</TITLE>
</HEAD>

<BODY bgcolor="#ffffff">

<H1 align="center">DENCDriver Module Functional Specification</H1>

<HR>

<P align="center"><STRONG>CONFIDENTIAL</STRONG>

<HR>

<TABLE border="0" width="50%" align="center">
<TR><TD>Document ref:    <TD>2501,824/FS
<TR><TD>Issue:           <TD>1C
<TR><TD>Date:            <TD>08 Jun 2000
<TR><TD>Author(s):       <TD><A href="mailto:ben.avison@pace.co.uk">Ben Avison</A>
<TR><TD>Change:          <TD>
<TR><TD>Classification:  <TD>Pace Restricted
</TABLE>

<H2>Contents</H2>

<TABLE border="0" width="100%">
<TR><TD width="8%">1 <TD><A href="#overview">       Overview</A>
<TR><TD>2            <TD><A href="#outstanding">    Outstanding issues</A>
<TR><TD>3            <TD><A href="#technical">      Technical background</A>
<TR><TD>4            <TD><A href="#user">           User interface</A>
<TR><TD>5            <TD><A href="#programmer">     Programmer interface</A>
<TR><TD>6            <TD><A href="#interchange">    Data interchange</A>
<TR><TD>7            <TD><A href="#formats">        Data formats</A>
<TR><TD>8            <TD><A href="#external">       External dependencies</A>
<TR><TD>9            <TD><A href="#acceptance">     Acceptance test</A>
<TR><TD>10           <TD><A href="#noncompliances"> Noncompliances</A>
<TR><TD>11           <TD><A href="#test">           Development test strategy</A>
<TR><TD>12           <TD><A href="#organisation">   Product organisation</A>
<TR><TD>13           <TD><A href="#enhancements">   Future enhancements</A>
<TR><TD>14           <TD><A href="#glossary">       Glossary</A>
<TR><TD>15           <TD><A href="#references">     References</A>
<TR><TD>16           <TD><A href="#history">        History</A>
<TR><TD>&nbsp;       <TD><A href="#appendix">       Appendix A: TV Channel Frequencies</A>
</TABLE>

<HR>

<H2><A name="overview">1. Overview</A></H2>

<P>This document describes the software module DENCDriver, which is the hardware driver
for the STB-400<SUP>[1] [2]</SUP> that controls video encoding - in other words, all
aspects of video, bar the ARM VIDC and the MPEG decoder. In this respect, it is analogous
to the Macrovision module<SUP>[3]</SUP> found in earlier STB designs, and so the
DENCDriver API has been designed to embrace and extend that of the Macrovision module.
However, in the interests of brevity, those aspects of the generic API that are not
supported by the DENCDriver are not described here, and the interested reader is referred
to previous documentation<SUP>[3] [4]</SUP>.

<P>The primary components that the DENCDriver controls are the SGS-Thomson STV0119B
DENC<SUP>[5]</SUP> itself, the RF modulator and the Philips TDA8540 video 
switch/amplifier<SUP>[6]</SUP>. <P>As such, the DENCDriver module is responsible for
selecting the analogue video standard (PAL or NTSC) and variant (eg PAL-I), for
S-Video/CVBS/RGB output selection, for controlling Macrovision anti-taping, for disabling
video output during standby mode, and (as a future enhancement) for encoding closed
captioning signals within the video.

<P>A licence from Macrovision
(<A href="http://www.macrovision.com/">http://www.macrovision.com/</A>) is required before
the anti-taping features of the DENCDriver module can be used; the relevant parts of this
document must only be circulated to Macrovision licensees.

<HR>

<H2><A name="outstanding">2. Outstanding issues</A></H2>

<P>There are no outstanding issues.

<HR>

<H2><A name="technical">3. Technical background</A></H2>

<P>In the STB-400, the digital ITU-R BT.601 format video fed into the DENC already
includes both the MPEG video and computer graphics layers; there is no need for the
analogue video paths and switches found in earlier STBs.

<P>As standard, the STB-400 is fitted with a TAMC-G001D<SUP>[7]</SUP>, a generic UHF
modulator which features control of the modulation frequency (and therefore the UHF TV
channel) and the audio subcarrier frequency (allowing a range of video standard variants)
to be controlled in software, via the I&sup2;C bus. This is a new facility not available
in previous STBs. The only officially supported video standards for this modulator will be
PAL-B, PAL-G, PAL-H and PAL-I.

<P>The STB-400 may optionally be fitted instead with a TAMC-H007F<SUP>[8]</SUP>, an NTSC
VHF modulator that is mechanically switchable between U.S. channels 3 (61.25 MHz) and 4
(67.25 MHz). This model has no I&sup2;C interface.

<P>Enabling/disabling either modulator is achieved using bit 3 of the ARM's general
purpose I/O port.

<HR>

<H2><A name="user">4. User interface</A></H2>

<H3>4.1. * Commands</H3>

<H4 align="right">*LoadMacrovisionKey</H4>

<P>Load a new Macrovision key

<H5>Syntax</H5>

<P><CODE>*LoadMacrovisionKey <I>filename</I></CODE>

<H5>Parameters</H5>

<DL>
<DT><CODE><I>filename</I></CODE>
    <DD>a valid pathname, specifying a file of the format described in &sect;7.1
</DL>

<H5>Use</H5>

<P>DENCDriver supports a variant of the "bit method" of Macrovision configuration
maintenance. Configuration maintenance is the method by which Macrovision Corporation
issue updates to the anti-taping specification, as the need arises; numerous
(confidential) specifics of the process are set according to a set of generic parameters
provided by Macrovision themselves. In our variant of the "bit method", these
configuration parameters are held in a file on the server, and downloaded to the STB at
boot time, or as frequently as required.

<P>*LoadMacrovisionKey loads this configuration data from a suitable configuration or
"key" file, and loads it into the appropriate registers in the DENC chip. Until a valid
key has been loaded, any attempt to activate Macrovision using SWI Macrovision_SetState
x,2 will result in all video outputs being blanked instead.

<P>A different key will be required for PAL vs NTSC video, for Macrovision revision 6 vs
revision 7, for enabling/disabling burst inversion, or for any other variants required.
The data required to generate appropriate key files may be obtained direct from
Macrovision Corp.

<H5>Related commands</H5>

<P>None

<H5>Related SWIs</H5>

<P>Macrovision_LoadMacrovisionKey


<H3>4.2. Configuration keywords</H3>

<H4 align="right">*Configure TVStandard</H4>

<P>Configure the TV standard

<H5>Syntax</H5>

<P><CODE>*Configure TVStandard <I>standard</I></CODE>

<H5>Parameters</H5>

<DL>
<DT><CODE><I>standard</I></CODE>
    <DD>a case-insensitive string, of the same form as those returned from SWI
    Macrovision_PlatformFeatures
</DL>

<H5>Use</H5>

<P>The way in which the video circuitry is set up depends upon three factors:

<OL>
<LI>the TV standard in NVRAM (set using this command, using SWI Macrovision_TVSetup, or
    via the engineering menu<SUP>[9]</SUP>)
<LI>the setting of the PAL/NTSC link on the motherboard
<LI>whether the TAMC-G001D (the PAL modulator) is found on the I&sup2;C bus
</OL>

<P>(1) is to be the primary interface for reconfiguring the TV standard in STB-400. This
is because the STB-400 supports so many standards that a single hardware link is
insufficient to configure the box. Normally, a TV will be able to display a TV signal of
the incorrect standard, albeit sometimes in monochrome and/or in the wrong aspect ratio,
but even this is sufficient for the engineering menu to be accessed in order to
reconfigure the box.

<P>The main case where this is not sufficient is when the STB is configured to a 625/50
standard (eg PAL-I), but only a 525/60 standard (eg NTSC-M) TV is available - the signal
will not lock, so the engineering menu will be difficult to use. In this case, the link
(2) can be removed, and the STB will be forced into NTSC-M. Between factors (1) and (2),
both types of production box can be manufactured, yet either type can be switched over to
any desired TV standard for in-house engineering purposes.

<P>(3) is used to determine the fixed aspects of the hardware, notably whether the UHF
output channel can be changed, and whether the DENC should be configured for CVBS/Y/C
output (for NTSC STBs, which have an S-Video connector) or CVBS/R/G/B output (for PAL
STBs, which have a SCART connector).

<P>The video features truth table is as follows:

<TABLE border="1">
<THEAD align="left">
<TR bgcolor="eeeeee"><TH>Autodetected modulator type        <TH>Jumper setting          <TH>TV standard to use                      <TH>TV standards to return from Macrovision_PlatformFeatures 0 (and therefore to offer from the engineering menu)
</THEAD>
<TBODY align="left">
<TR>                 <TD rowspan="2">TAMC-G001D (PAL STBs)  <TD>PAL (not NTSC override) <TD>As configured in NVRAM                  <TD>PAL-B-AU, PAL-G, PAL-H, PAL-I
<TR>                                                        <TD>NTSC                    <TD>NTSC-M (unless configured to NTSC-M-JP) <TD>NTSC-M, NTSC-M-JP
<TR>                 <TD rowspan="2">TAMC-H007F (NTSC STBs) <TD>PAL (not NTSC override) <TD>As configured in NVRAM                  <TD>PAL-B-AU, PAL-G, PAL-H, PAL-I, NTSC-M, NTSC-M-JP <BR>Note: only NTSC-M is available at RF
<TR>                                                        <TD>NTSC                    <TD>NTSC-M (unless configured to NTSC-M-JP) <TD>NTSC-M, NTSC-M-JP <BR>Note: only NTSC-M is available at RF
</TBODY>
</TABLE>

TV standards other than those in the current Macrovision_PlatformFeatures 0 list
<I>can</I> be configured when this command is used from the command line, but this is
purely for engineering purposes and a warning will be printed in such cases. Even then,
the not-NTSC-override link (if removed) still takes precedence.

<P>Note that this configuration option does not take effect until the next time the
DENCDriver module is initialised or re-initialised.

<H5>Example</H5>

<P><CODE>*Configure TVStandard NTSC-M</CODE>

<H5>Related commands</H5>

<P>*Configure TVChannel

<H5>Related SWIs</H5>

<P>Macrovision_TVSetup


<H4 align="right">*Configure TVChannel</H4>

<P>Configure the RF output channel of the modulator

<H5>Syntax</H5>

<P><CODE>*Configure TVChannel <I>channel</I></CODE>

<H5>Parameters</H5>

<DL>
<DT><CODE><I>channel</I></CODE>
    <DD>a case-insensitive string, of the same form as those returned from SWI
    Macrovision_PlatformFeatures
</DL>

<H5>Use</H5>

<P>*Configure TVChannel determines the RF frequency at which the STB's generated video is
to be output from the RF modulator. If the fitted modulator does not offer a choice of TV
channel, an error is generated.

<P>Different TV standards allocate and name their TV channels differently, and
configuration is held internally in terms of the RF frequency. Because of this, the
DENCDriver uses a look-up table appropriate to the <I>currently configured</I> TV standard
(not the currently active TV standard) when this command is issued. Hence, to reconfigure
both TV standard and TV channel, *Configure TVChannel should be used after *Configure
TVStandard.

<P>Note that this configuration option does not take effect until the next time the
DENCDriver module is initialised or re-initialised. 

<H5>Example</H5>

<P><CODE>*Configure TVChannel 27E</CODE>

<H5>Related commands</H5>

<P>*Configure TVStandard

<H5>Related SWIs</H5>

<P>Macrovision_TVSetup


<HR>

<H2><A name="programmer">5. Programmer interface</A></H2>

<H3>5.1. Software Interrupts (SWIs)</H3>

<H4 align="right">Macrovision_SetState
<BR>(SWI &amp;4D540)</H4>

<P>Enable or disable Macrovision anti-taping facility

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>flags:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>bit             <TH>meaning when set
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD>0               <TD>change the Macrovision state immediately
                                                  (rather than wait for the next screen
                                                  mode change) - doesn't apply to the
                                                  pseudo-TV-standard in R2
                      <TR><TD>other&nbsp;bits <TD>reserved, must be zero
                      </TBODY>
                      </TABLE>
<TR><TD>R1 =      <TD>Macrovision state:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>bit(s) <TH colspan="2">interpretation / meaning when set
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD rowspan="3">0-3 <TD>value 0 or 1<TD>=&gt; disable anti-taping
                      <TR>                    <TD>value 2     <TD>=&gt; enable anti-taping
                      <TR>                    <TD>other&nbsp;values<TD>reserved, do not use
                      <TR><TD colspan="3">Bits 4-6 are intended for unit test use only:
                      <TR><TD>4   <TD colspan="2">engage DENC test signal
                      <TR><TD>5   <TD colspan="2">engage modulator test signal
                                                  (not available on TAMC-H007F)
                      <TR><TD>6   <TD colspan="2">disable RF modulator irrespective of
                                                  current standby state (also enables RF
                                                  booster in TAMC-H007F)
                      <TR><TD colspan="3">Bits 7-8 are intended for unit test or
                                          MPEGDriver use only:
                      <TR><TD>7-8 <TD colspan="2">voltage level to output on SCART pin 8
                                                  (set by hardware depending upon the two
                                                  output signals from the TDA8540):
                      <TR><TD>&nbsp; <TD>0 <TD>=&gt; preserve existing state
                      <TR><TD>&nbsp; <TD>1 <TD>=&gt; 0-2 V (TV AV input deasserted)
                      <TR><TD>&nbsp; <TD>2 <TD>=&gt; 5-8 V (TV AV input asserted,
                                               anamorphic widescreen mode)
                      <TR><TD>&nbsp; <TD>3 <TD>=&gt; 9.5-12V (TV AV input asserted,
                                               non-anamorphic mode)
                      <TR><TD>other&nbsp;bits <TD colspan="2">reserved, must be zero
                      </TBODY>
                      </TABLE>
<TR><TD>R2        <TD>pseudo TV standard:
                      <TABLE cellspacing="2">
                      <TBODY align="left" valign="top">
                      <TR><TD>0&nbsp;=&gt; <TD>625/50 ("PAL")
                      <TR><TD>1 =&gt;      <TD>525/60 ("NTSC")
                      </TBODY>
                      </TABLE>
</TBODY>
</TABLE>

<H5>On exit</H5>

<P>All registers preserved

<H5>Use</H5>

<P>This call's primary function is to enable or disable Macrovision anti-taping. There are
no longer any special restrictions on screen mode, and it is no longer necessary to change
screen mode to enable or disable anti-taping (but the change is still deferred to the next
mode change by default, for compatibility with existing software).

<P>However, when anti-taping is enabled, all video outputs may instead be blanked; this
will happen if one or more of the following is true:

<UL>
<LI>No Macrovision key has yet been loaded (see *LoadMacrovisionKey and SWI
    Macrovision_LoadMacrovisionKey)
<LI>The CRC check of the Macrovision key failed, or the key was invalid in some other way
<LI>The DENC reported itself as an STV0118 chip instead of STV0119 (the two are
    pin-compatible, but the former has no anti-taping functionality, and might conceivably
    have been installed in an attempt to circumvent Macrovision)
</UL>

<P>On earlier STBs, running a version of the Macrovision module prior to 0.29, switching
to Macrovision mode also entailed the imposition of a non-standard palette. Also, a
maximum of eight non-transparent logical colours was available when Macrovision was
active, and the transparency of each logical colour was fixed. These restrictions do not
apply to the DENCDriver.

<P>For enhanced compatibility with the DENCDriver, version 0.29 and later of the
Macrovision module always select the standard default palette after mode changes, and
allow transparency to be selected using the same PaletteV and VDU 19 interfaces as the
DENCDriver, irrespective of whether Macrovision is enabled. (Note, however, that the
hardware restriction of 8 distinct colours visible at any one time on the Macrovision
video path still applies to pre-STB-400 STBs.)

<P>The pseudo TV standard in R2 is for when it is required to play individual PAL or NTSC
clips on an STB of the opposite type. On the next screen mode change, the "closest" TV
standard of the opposite frame-rate type is selected instead. The primary intended use of
this function is to select PAL-60 when a PAL STB is used to play an NTSC clip.


<H4 align="right">Macrovision_LoadCaptions
<BR>(SWI &amp;4D541)</H4>

<P>Accept data for encoding on line 21

<P>This SWI is a future enhancement. It would be implemented to match the API described
in the advanced NTSC video features functional specification<SUP>[4]</SUP>.


<H4 align="right">Macrovision_CaptionControl
<BR>(SWI &amp;4D542)</H4>

<P>Perform fast switching between closed caption and graphics overlay modes

<P>This SWI is not implemented.


<H4 align="right">Macrovision_PlatformFeatures
<BR>(SWI &amp;4D543)</H4>

<P>Reads data on the video encoding abilities of the hardware

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>reason code
<TR><TD colspan="2">other registers depend upon reason code
</TBODY>
</TABLE>

<P>The following reason codes are defined:

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>0 <TD>Read available-TV-output-standards structure
<TR><TD>1 <TD>Read available-TV-output-channels list
<TR><TD>2 <TD>Reserved
<TR><TD>3 <TD>Read video circuitry information
<TR><TD colspan="2">other reason codes are reserved
</TBODY>
</TABLE>


<H4 align="right">Macrovision_PlatformFeatures 0
<BR>(SWI &amp;4D543)</H4>

<P>Read available-TV-output-standards structure

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>0 (reason code)
</TBODY>
</TABLE>

<H5>On exit</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0        <TD>preserved
<TR><TD>R1&nbsp;= <TD>pointer to a read-only region of memory, containing one or more
                      contiguous 24-byte data blocks, terminated by a zero word. The
                      blocks each have the following structure:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>offset <TH>contents                 <TH>example
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD>+0     <TD>the name of a TV standard available on the
                                         current hardware, padded with at least one null
                                         byte                     <TD>"<CODE>PAL-I</CODE>"
                      <TR><TD>+12    <TD>corresponding (32-bit) value for NVRAM tag
                                         "TVStandard"             <TD>12
                      <TR><TD>+16    <TD>the number of the TV channels list appropriate to
                                         this TV standard (see reason code 1), or -1 if
                                         TV channel is not adjustable in software
                                                                  <TD>1
                      <TR><TD>+20    <TD>pointer to a null-terminated string, held in a
                                         static memory block, which describes the TV
                                         standard in more detail  <TD>pointer to
                                                         "<CODE>PAL I (UK/Ireland)</CODE>"
                      </TBODY>
                      </TABLE>
</TBODY>
</TABLE>

<P>The "short" names (at offset +0) are as used by the <CODE>*Configure TVStandard</CODE>
interface. The "long" names (pointed at from offset +20) are displayed in the Engineering
Menu, and are internationalised. The mapping between short names and (English) long names
is currently as follows (but note that not all of these will be returned by the SWI on any
current or planned hardware):

<TABLE border="1">
<THEAD align="left">
<TR bgcolor="eeeeee"><TH>Short name <TH>Long name               <TH>Notes
</THEAD>
<TBODY align="left">
<TR>                 <TD>NTSC-4.43  <TD>NTSC 4.43               <TD>NTSC-M with a colour subcarrier frequency that allows it to be displayed on many European PAL TVs
<TR>                 <TD>NTSC-M     <TD>NTSC (Americas)         <TD>&nbsp;
<TR>                 <TD>NTSC-M-JP  <TD>NTSC (Japan)            <TD>&nbsp;
<TR>                 <TD>PAL-60     <TD>PAL 60                  <TD>PAL-I with 525-line/60Hz timings, allows 525/60 material to be displayed on many European PAL TVs
<TR>                 <TD>PAL-B      <TD>PAL B (West Europe)     <TD>The most common type of PAL-B, which is why it gets the simplest short name; not UHF
<TR>                 <TD>PAL-B-AU   <TD>PAL B (Australia)       <TD>&nbsp;
<TR>                 <TD>PAL-B-IT   <TD>PAL B (Italy)           <TD>Not UHF
<TR>                 <TD>PAL-B-NZ   <TD>PAL B (New Zealand)     <TD>Not UHF
<TR>                 <TD>PAL-CN     <TD>PAL N (Argentina)       <TD>CN is short for "Combination N"
<TR>                 <TD>PAL-D      <TD>PAL D (China)           <TD>&nbsp;
<TR>                 <TD>PAL-G      <TD>PAL G (West Europe)     <TD>&nbsp;
<TR>                 <TD>PAL-H      <TD>PAL H (Belgium)         <TD>Implemented identically to PAL-G
<TR>                 <TD>PAL-I      <TD>PAL I (UK/Ireland)      <TD>&nbsp;
<TR>                 <TD>PAL-M      <TD>PAL M (Brazil)          <TD>The only official 525/60 PAL TV standard
<TR>                 <TD>PAL-N      <TD>PAL N (Paraguay)        <TD>Also used in Uruguay
<TR>                 <TD>SECAM-B    <TD>SECAM B (Middle East)   <TD>&nbsp;
<TR>                 <TD>SECAM-D    <TD>SECAM D (East Europe)   <TD>&nbsp;
<TR>                 <TD>SECAM-G    <TD>SECAM G (Middle East)   <TD>&nbsp;
<TR>                 <TD>SECAM-K    <TD>SECAM K (East Europe)   <TD>&nbsp;
<TR>                 <TD>SECAM-K1   <TD>SECAM K (French Africa) <TD>&nbsp;
<TR>                 <TD>SECAM-L    <TD>SECAM L (France)        <TD>&nbsp;
</TBODY>
</TABLE>



<H4 align="right">Macrovision_PlatformFeatures 1
<BR>(SWI &amp;4D543)</H4>

<P>Read available-TV-output-channels list

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>1 (reason code)
<TR><TD>R1&nbsp;= <TD>TV channels list number (as returned at offset +16 by
                      Macrovision_PlatformFeatures 0)
</TBODY>
</TABLE>

<H5>On exit</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0        <TD>preserved
<TR><TD>R1        <TD>preserved
<TR><TD>R2&nbsp;= <TD>pointer to a read-only region of memory, containing the following
                      structure:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>offset <TH>contents                 <TH>example
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD>+0     <TD>a 32-bit integer, giving the number of TV channel
                                         names following          <TD>49
                      <TR><TD>+4...  <TD colspan="2">a list of word-pairs:
                      <TR><TD>&nbsp; <TD>the first word of each pair contains a TV channel
                                         name, in the form of a null-terminated string of
                                         up to three characters (note that this is because
                                         some TV standards have channel names including
                                         letters, and some have discontinuities in number
                                         ranges)                  <TD>"<CODE>21E</CODE>"
                      <TR><TD>&nbsp; <TD>the second word of each pair contains the
                                         corresponding value for the NVRAM tag "RFChannel"
                                                                  <TD>471
                      </TBODY>
                      </TABLE>
</TBODY>
</TABLE>


<H4 align="right">Macrovision_PlatformFeatures 3
<BR>(SWI &amp;4D543)</H4>

<P>Read video circuitry information

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>3 (reason code)
</TBODY>
</TABLE>

<H5>On exit</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0        <TD>preserved
<TR><TD>R1&nbsp;= <TD>pointer to a read-only region of memory, containing the following
                      structure:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>offset  <TH>contents
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD>+0      <TD>Mask of Macrovision state bits (see SWI
                                          Macrovision_SetState) that are effectual for the
                                          fitted hardware
                      <TR><TD>+4      <TD>DENC type (1 =&gt; STV0118/STV0119 family;
                                          other values reserved)
                      <TR><TD>+8      <TD>Modulator type (1 =&gt; TAMC-G001D; 2 =&gt;
                                          TAMC-H007F; other values reserved)
                      <TR><TD>+12...  <TD>depend upon DENC type
                      </TBODY>
                      </TABLE>
                      For DENC type 1, the remainder of the block is as follows:
                      <TABLE cellspacing="2">
                      <THEAD align="left" valign="top">
                      <TR><TH>offset <TH>contents
                      </THEAD>
                      <TBODY align="left" valign="top">
                      <TR><TD>+12    <TD>chipID (eg decimal 119)
                      <TR><TD>+13    <TD>revID (a byte)
                      </TBODY>
                      </TABLE>
</TBODY>
</TABLE>


<H4 align="right">Macrovision_TVSetup
<BR>(SWI &amp;4D544)</H4>

<P>Read or write TV configuration

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>flags (must be zero)
<TR><TD>R1 =      <TD>pointer to string describing the TV standard to be configured,
                      or a null pointer to preserve the existing configuration
<TR><TD>R2 =      <TD>pointer to string describing the TV channel to be configured,
                      or a null pointer to preserve the existing configuration
</TBODY>
</TABLE>

<H5>On exit</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0        <TD>preserved
<TR><TD>R1&nbsp;= <TD>pointer to a string containing the name of the TV standard that the
                      STB was configured to on entry to the SWI
<TR><TD>R2 =      <TD>pointer to a string containing the name of the TV channel that the
                      STB was configured to on entry to the SWI
</TBODY>
</TABLE>

<H5>Use</H5>

<P>This SWI can be used to read and/or write the configured TV standard and/or TV channel.
If a null pointer is passed in to R1 or R2 on entry, then the register will contain a
pointer to the currently configured setting on exit; otherwise, a pointer to the
previously configured setting will be returned. Values passed in will be matched
case-insensitively, but those returned will always be in their conventional form (ie upper
case).

<P>See the descriptions of *Configure TVStandard and *Configure TVChannel for information
on how the settings are acted upon.


<H4 align="right">Macrovision_GetState
<BR>(SWI &amp;4D545)</H4>

<P>Read state most recently written using Macrovision_SetState

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>flags (must be zero)
</TBODY>
</TABLE>

<H5>On exit</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R1&nbsp;= <TD>Macrovision state (as passed in R1 to Macrovision_SetState)
<TR><TD>R2 =      <TD>pseudo TV standard (as passed in R2 to Macrovision_SetState)
<TR><TD colspan="2">other registers are preserved
</TBODY>
</TABLE>

<H5>Use</H5>

<P>This SWI can be used to return the state flags most recently applied using the SWI
Macrovision_SetState. Note that they may not represent the state currently in use, if the
state was flagged to only take effect from the next mode change, and there has not been a
mode change since the Macrovision_SetState call was made.


<H4 align="right">Macrovision_LoadMacrovisionKey
<BR>(SWI &amp;4D546)</H4>

<P>Load a new Macrovision key

<H5>On entry</H5>

<TABLE cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD>R0&nbsp;= <TD>flags (must be zero)
<TR><TD>R1 =      <TD>pointer to a block of memory containing a Macrovision key (see
                      &sect;7.1 for format)
</TBODY>
</TABLE>

<H5>On exit</H5>

<P>All registers preserved

<H5>Use</H5>

<P>This SWI performs the same action as *LoadMacrovisionKey, but takes a pointer to a
block of memory as a parameter, rather than a filename.


<H3>5.2. Service Calls</H3>

<H4 align="right">Service_MonitorLeadTranslation<BR>(Service Call &amp;76)</H4>

<P>DENCDriver responds to this service call in order to set a default VIDC screen mode
that is appropriate to the TV standard (as derived from NVRAM and the PAL/NTSC jumper).


<H4 align="right">Service_Standby<BR>(Service Call &amp;AD)</H4>

<P>DENCDriver responds to this service call, to switch the DENC, video switch and
modulator in and out of standby state. In standby, all the DENC video DACs are disabled,
and the modulator is switched off. When the TAMC-H007F (NTSC) modulator is fitted, the
booster is switched on in standby (it is switched off in normal use).

<H3>5.3. System Variables</H3>

<H4 align="right">TVOn</H4>

<P>This variable (which is set by the STBState module<SUP>[10]</SUP>) is read when
DENCDriver receives Service_Standby, and is used to determine how the DENC output pins and
the RF modulator are to be configured:

<TABLE border="1">
<THEAD align="left">
<TR bgcolor="eeeeee"><TH>Autodetected modulator type       <TH>TVOn variable setting <TH>DENC configuration <TH>Enabled DENC outputs <TH>Modulator enabled? <TH>Booster enabled?
</THEAD>
<TBODY align="left">
<TR>                 <TD>Either                            <TD>Unset                 <TD>R/G/B/CVBS1        <TD>None                 <TD>No                 <TD>Yes
<TR>                 <TD rowspan="3">TAMC-G001D (PAL STBs) <TD><CODE>RGB</CODE>      <TD>R/G/B/CVBS1        <TD>R/G/B/CVBS1          <TD>Yes                <TD>Yes
<TR>                                                       <TD><CODE>CVBS</CODE>     <TD>R/G/B/CVBS1        <TD>CVBS1                <TD>Yes                <TD>Yes
<TR>                                                       <TD><CODE>YC</CODE>       <TD>Y/C/CVBS/CVBS1     <TD>Y/C                  <TD>Yes                <TD>Yes
<TR>                 <TD>TAMC-H007F (NTSC STBs)            <TD>Any setting           <TD>Y/C/CVBS/CVBS1     <TD>Y/C/CVBS1            <TD>Yes                <TD>No
</TBODY>
</TABLE>

<P>NB: "CVBS1" refers to a duplicate CVBS output pin on the DENC.


<H4 align="right">TV$Type</H4>

<P>On previous STBs, this variable was set by the ModeFiles module (which initialised
before the Macrovision module), and was set depending upon the setting of the PAL/NTSC
detect bit of the ARM's I/O port to either "<CODE>PAL</CODE>" or "<CODE>NTSC</CODE>". This
is insufficient to describe the larger range of TV standards supported by STB-400, but
it is desirable to retain the variable because it is widely used in numerous software
components. The procedure STB-400 will use is as follows:

<UL>
<LI>ModeFiles initialises; it no longer sets TV$Type, nor issues a *LoadModeFile command,
    but it does now set ModeFiles$Path to the location in ResourceFS of the 625/50 ("PAL")
    and 525/60 ("NTSC") mode files.
<LI>DENCDriver initialises; it reads the configured TV standard and the NTSC override I/O
    bit, and autodetects the fitted modulator.
<LI>DENCDriver sets TV$Type to either "<CODE>PAL</CODE>" or "<CODE>NTSC</CODE>", depending
    on whether the TV standard to use is 625/50 or 525/60 respectively.
<LI>DENCDriver issues <CODE>*LoadModeFile ModeFiles:&lt;TV$Type&gt;</CODE>.
</UL>

<P>In this scheme, DENCDriver is the only module that needs to know how to read the
TVStandard configuration option and the NTSC override I/O bit.


<H4 align="right">Macrovision$BINV</H4>

<P>This variable is not used by the DENCDriver. However, it is reserved for possible use
by the Baseline for selecting which Macrovision key file to load.


<H4 align="right">Macrovision$RCV2S<BR>Macrovision$RCV2SN<BR>
                  Macrovision$RCV2E<BR>Macrovision$RCV2EN</H4>

<P>These variables are obsolete, and are ignored by DENCDriver.


<H3>5.4. Vectors</H3>

<H4 align="right">PaletteV
<BR>(Vector &amp;23)</H4>

<P>DENCDriver (and versions 0.29+ of the Macrovision module) intercept PaletteV in order
to implement the following behaviour of palette entries across all hardware platforms, and
in the case of the Macrovision module, both video paths:

<UL>
<LI>When writing a palette entry (reason codes 2 and 8), either or both of bits 4 and 7 of
    a palette entry may be set to cause the palette entry to be transparent (ie showing
    MPEG picture). Bits 0-3, 5 and 6 are currently ignored, and must be set to zero.
<LI>When reading a palette entry (reason codes 1 and 7), bit 7 is set if the palette entry
    was transparent. The setting of bits 0-6 is not currently defined, and must not be
    relied upon.
<LI>Additionally, the default palette reason code will set all palette entries to their
    RISC OS defaults, with transparency turned off. Gamma correction and flashing colours
    will also function correctly across all hardware.
</UL>

<P>In this scheme, existing STB software that expects to run on an STB-3 with Macrovision
disabled will continue to function correctly (such software will be writing palette
entries with bit 4 set to signal transparency, and cannot be expecting to read back the
transparency bit, because past software stacks have not preserved the supremacy bits).

<P>However, it is recommended that future software uses bit 7 (only) as the transparency
bit; this was a pre-existing RISC OS standard, and is used, for example, by VDU 19 (see
PRM<SUP>[11]</SUP> 1-568).

<HR>

<H2><A name="interchange">6. Data interchange</A></H2>

<P>This section is not applicable.

<HR>

<H2><A name="formats">7. Data formats</A></H2>

<H3>7.1. Macrovision key</H3>

<P>A valid Macrovision key is a string of hexadecimal digits, encoded as ASCII characters,
followed by at least one control character (eg a linefeed, or a null byte). Any further
characters after the first control character will be ignored.

<P>The characters representing digits ten to fifteen may be upper or lower case.
There must be either 34 or 40 characters; the former will be interpreted as Revision 6
Macrovision configuration, the latter as Revision 7. Any other lengths, and any strings
containing characters other than "0"-"9", "A"-"F" or "a"-"f", will be considered an
invalid key.

<H4>Revision 7 format</H4>

<P>The first two digits specify Copy Protection Control (CPC0 followed by CPC1). The third digit must be a "padding" zero (ASCII 48). Digits 4-36 inclusive specify Copy Protection
Setup (CPS32 - CPS0, in that order). Digits 37-40 represent the 16 bit result of a CRC
operation carried out upon digits 3-36, including the padding zero, <I>in their ASCII
form</I>, with all alphabetical digits forced into upper case. The CRC algorithm used is
a reflected algorithm, with an initial value of zero, as defined by CCITT V4.1; a program
to calculate such CRCs, called "MVCRC" is available from Macrovision.

<H4>Revision 6 format</H4>

<P>The format here is similar to that for Revision 7 Macrovision, but Revision 6 only
defines Copy Protection Setup parameters up to CPS26. Subsequently, digits 4-30 represent
CPS26-CPS0 in that order, and digits 31-34 hold the CRC (calculated according to the same
algorithm).

<HR>

<H2><A name="external">8. External dependencies</A></H2>

<P>This section is not applicable.

<HR>

<H2><A name="acceptance">9. Acceptance test</A></H2>

<UL>
<LI>The module must function on target hardware as specified.
<LI>The executable code of the module must be less than 64K long.
<LI>The workspace used by the module must not exceed 8K.
</UL>

<HR>

<H2><A name="noncompliances">10. Noncompliances</A></H2>

<P>There are no noncompliances.

<HR>

<H2><A name="test">11. Development test strategy</A></H2>

<UL>
<LI>All SWIs must function as specified
<LI>All * commands must function as specified
<LI>All *Configure keywords must function as specified
<LI>All service calls and system variables must be acted upon as specified
</UL>

<P>These criteria will generally be tested by calling SWIs from BASIC, or by setting
values of the various parameters from the command line. In the case of SWI
Macrovision_SetState, which could be expected to be called during movie playback, a
modified version of the BASIC player will be used.

<P>The code will also be examined using the McCabe analysis software.

<HR>

<H2><A name="organisation">12. Product organisation</A></H2>

<P>The DENCDriver module is written in C and assembler. It will be built into the STB-400
ROM, but can also be softloaded in order to deliver patches.

<HR>

<H2><A name="enhancements">13. Future enhancements</A></H2>

<P>See &sect;5.1 (SWI Macrovision_LoadCaptions).
<HR>

<H2><A name="glossary">14. Glossary</A></H2>

<DL>
<DT>CCIR
    <DD>Comit&eacute; Consultatif International des Radiocommunications, or International
    Radio Consultative Committee.
<DT>CRC
    <DD>Cyclic Redundancy Check - a common checksum algorithm that is used to detect
    errors in data.
<DT>CVBS
    <DD>Composite Video Baseband Signal - a signal combining luminance and chrominance
    samples, but which has not been modulated to RF.
<DT>DENC
    <DD>Digital video ENCoder.
<DT>ED palette
    <DD>the lookup table inside the VIDC that determines how the ED[3:0] output lines of
    the VIDC should be set, on a pixel-by-pixel basis, depending upon the logical colour
    of each displayed pixel.
<DT>ITU
    <DD>International Telecommunication Union.
<DT>ITU-R BT.601
    <DD>the new name for CCIR 601, this is a recommendation developed by the CCIR (now
    absorbed into the ITU) for the digitisation of colour video signals.
<DT>Macrovision
    <DD>a system for adding features into analogue video signals so that they display
    normally on TVs, but cannot be recorded accurately on domestic VCRs. Also the name of
    the corporation that develops and licences the technology.
<DT>MPEG
    <DD>Moving Picture (Motion Pictures) Experts Group - the nickname of SubCommittee 29
    of Working Group 11 of ISO/IEC Joint Technical Committee 1.
<DT>NTSC
    <DD>National Television System Committee (of the Electronics Industries Association,
    the organisation which defined the standard format adopted by the FCC for broadcast
    television in the USA). Commonly used to refer to the standard-resolution, composite,
    colour video standard in use in North and Central America, parts of South America,
    Japan, South Korea, Taiwan and the Philippines.
<DT>NVRAM
    <DD>Non-Volatile Random Access Memory.
<DT>PAL
    <DD>Phase Alternation by Line - the standard-resolution, composite, colour video
    standard in use in the UK, much of Europe (especially Western Europe, but not France),
    Australia and New Zealand, China, and parts of South America, the Middle East,
    South Asia and Africa.
<DT>RF
    <DD>Radio Frequency - includes both VHF and UHF.
<DT>RGB
    <DD>Red/Green/Blue - a method of storing or transmitting colour information (eg using
    pins 15, 11 and 7 of a SCART lead).
<DT>ROM
    <DD>Read-Only Memory.
<DT>S-Video
    <DD>literally "Separate Video", a method of transmitting colour information as
    separate luminance and chrominance signals. Also a 4-pin connector standard that
    carries an S-Video signal.
<DT>SCART
    <DD>also known as peritel or euroconnector, this is a 21-pin connector which can
    (in its two main configurations) carry two-way mono or stereo audio and composite
    video and one-way S-video or RGB, as well as a couple of switching signals.
<DT>STB
    <DD>Set-Top Box.
<DT>subcarrier
    <DD>a secondary signal containing additional information that is added to a main
    signal.
<DT>SWI
    <DD>SoftWare Interrupt - basic OS function call.
<DT>UHF
    <DD>Ultra High Frequency - the part of the radio spectrum from 300 MHz - 3 GHz.
<DT>VCR
    <DD>Video Cassette Recorder.
<DT>VHF
    <DD>Very High Frequency - the part of the radio spectrum from 30 MHz - 300 MHz.
<DT>VIDC
    <DD>VIDeo Controller - the part of the ARM 7500FE chip that deals with video and audio
    output.
<DT>YC
    <DD>luminance/chrominance. See also S-Video.
</DL>

<HR>

<H2><A name="references">15. References</A></H2>

<OL>
  <LI>2501,812/FS: STB-400 Hardware Functional Specification.
  <LI>2501,828/FS: STB-400 OS ROM Functional Specification.
  <LI>2309,371/FS: Macrovision Software Functional Specification.
  <LI>2202,793/FS: Advanced NTSC Video Features Functional Specification.
  <LI>SGS-Thomson STV0119B data sheet.
  <LI>Philips TDA8540 data sheet.
  <LI>TAMC-G001D data sheet.
  <LI>TAMC-H007F data sheet.
  <LI>2501,833/FS: STB-400 Engineering Menu Software Functional Specification.
  <LI>2309,352/FS: STBState Module Software Functional Specification.
  <LI>0470,291: RISC OS 3 Programmer's Reference Manual.
</OL>

<HR>

<H2><A name="history">16. History</A></H2>

<TABLE width="100%" border="0" cellspacing="2">
<TBODY align="left" valign="top">
<TR><TD><STRONG>Issue</STRONG>  <TD><STRONG>Date</STRONG>  <TD><STRONG>Author</STRONG>  <TD><STRONG>Description of change</STRONG>
<TR><TD>A                       <TD>01&nbsp;Oct&nbsp;1999  <TD>BAvison                  <TD>Initial version.
<TR><TD>B                       <TD>06&nbsp;Oct&nbsp;1999  <TD>BAvison                  <TD>Added SetState flag bit 1, Macrovision state bits 4-6 and PlatformFeatures 3, all to support production test software; changed encoding method used for key files.
<TR><TD>C                       <TD>22&nbsp;Oct&nbsp;1999  <TD>BAvison                  <TD>Added DENC and modulator test signal and SCART tri-level APIs. Removed references to S-Video SCART configuration and separate modulator/booster access. Changed TV standard configuration to take NTSC override jumper into account.
<TR><TD>D                       <TD>14&nbsp;Dec&nbsp;1999  <TD>BAvison                  <TD>Tweaks to Macrovision_PlatformFeatures API to assist engineering menu development.
<TR><TD>E                       <TD>29&nbsp;Feb&nbsp;2000  <TD>BAvison                  <TD>Updated following review. Added AMR number.
<TR><TD>1                       <TD>?                      <TD>?                        <TD>Released.
<TR><TD>1A                      <TD>14&nbsp;Mar&nbsp;2000  <TD>BAvison                  <TD>Removed reference to non-existent Macrovision key prohibition bit in SWI Macrovision_SetState. Added string pointer to Macrovision_PlatformFeatures 0 block. Corrected typo in Revision 7 Macrovision key format.
<TR><TD>1B                      <TD>05&nbsp;Jun&nbsp;2000  <TD>BAvison                  <TD>Added details of behaviour when S-Video SCART configuration is in use. Documented mapping between short and long forms of TV standard names. Added appendix A.
<TR><TD>1C                      <TD>08&nbsp;Jun&nbsp;2000  <TD>BAvison                  <TD>Minor clarification to description of SWI Macrovision_GetState.

</TBODY>
</TABLE>

<HR>

<H2><A name="appendix">Appendix A: TV Channel Frequencies</A></H2>

<P>Listed below are the channel name - frequency relationships for a number of common TV
standards. Note that not all combinations can be generated by STB-400.

<TABLE border="1">
<TBODY valign="top">
<TR>
<TH bgcolor="eeeeee">NTSC-M (Americas)
<TH bgcolor="eeeeee">NTSC-M<BR>(Japan)
<TH bgcolor="eeeeee">PAL-B<BR>(West&nbsp;Europe)
<TH bgcolor="eeeeee">PAL-B<BR>(Australia)
<TH bgcolor="eeeeee">PAL-B<BR>(Italy)
<TH bgcolor="eeeeee">PAL-B<BR>(New&nbsp;Zealand)
<TH bgcolor="eeeeee">PAL-D<BR>(China)
<TH bgcolor="eeeeee">PAL-G<BR>(West&nbsp;Europe)<BR>PAL-H<BR>(Belgium)
<TH bgcolor="eeeeee">PAL-I<BR>(UK/Ireland)

<TR>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>2       <TD>55.25
<TR><TD>3       <TD>61.25
<TR><TD>4       <TD>67.25
<TR><TD>5       <TD>77.25
<TR><TD>6       <TD>83.25
<TR><TD>7       <TD>175.25
<TR><TD>8       <TD>181.25
<TR><TD>9       <TD>187.25

<TR><TD>10      <TD>193.25
<TR><TD>11      <TD>199.25
<TR><TD>12      <TD>205.25
<TR><TD>13      <TD>211.25
<TR><TD>14      <TD>471.25
<TR><TD>15      <TD>477.25
<TR><TD>16      <TD>483.25
<TR><TD>17      <TD>489.25
<TR><TD>18      <TD>495.25
<TR><TD>19      <TD>501.25

<TR><TD>20      <TD>507.25
<TR><TD>21      <TD>513.25
<TR><TD>22      <TD>519.25
<TR><TD>23      <TD>525.25
<TR><TD>24      <TD>531.25
<TR><TD>25      <TD>537.25
<TR><TD>26      <TD>543.25
<TR><TD>27      <TD>549.25
<TR><TD>28      <TD>555.25
<TR><TD>29      <TD>561.25

<TR><TD>30      <TD>567.25
<TR><TD>31      <TD>573.25
<TR><TD>32      <TD>579.25
<TR><TD>33      <TD>585.25
<TR><TD>34      <TD>591.25
<TR><TD>35      <TD>597.25
<TR><TD>36      <TD>603.25
<TR><TD>37      <TD>609.25
<TR><TD>38      <TD>615.25
<TR><TD>39      <TD>621.25

<TR><TD>40      <TD>627.25
<TR><TD>41      <TD>633.25
<TR><TD>42      <TD>639.25
<TR><TD>43      <TD>645.25
<TR><TD>44      <TD>651.25
<TR><TD>45      <TD>657.25
<TR><TD>46      <TD>663.25
<TR><TD>47      <TD>669.25
<TR><TD>48      <TD>675.25
<TR><TD>49      <TD>681.25

<TR><TD>50      <TD>687.25
<TR><TD>51      <TD>693.25
<TR><TD>52      <TD>699.25
<TR><TD>53      <TD>705.25
<TR><TD>54      <TD>711.25
<TR><TD>55      <TD>717.25
<TR><TD>56      <TD>723.25
<TR><TD>57      <TD>729.25
<TR><TD>58      <TD>735.25
<TR><TD>59      <TD>741.25

<TR><TD>60      <TD>747.25
<TR><TD>61      <TD>753.25
<TR><TD>62      <TD>759.25
<TR><TD>63      <TD>765.25
<TR><TD>64      <TD>771.25
<TR><TD>65      <TD>777.25
<TR><TD>66      <TD>783.25
<TR><TD>67      <TD>789.25
<TR><TD>68      <TD>795.25
<TR><TD>69      <TD>801.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>1       <TD>91.25
<TR><TD>2       <TD>97.25
<TR><TD>3       <TD>103.25
<TR><TD>4       <TD>171.25
<TR><TD>5       <TD>177.25
<TR><TD>6       <TD>183.25
<TR><TD>7       <TD>189.25
<TR><TD>8       <TD>193.25
<TR><TD>9       <TD>199.25

<TR><TD>10      <TD>205.25
<TR><TD>11      <TD>211.25
<TR><TD>12      <TD>217.25
<TR><TD>13      <TD>471.25
<TR><TD>14      <TD>477.25
<TR><TD>15      <TD>483.25
<TR><TD>16      <TD>489.25
<TR><TD>17      <TD>495.25
<TR><TD>18      <TD>501.25
<TR><TD>19      <TD>507.25

<TR><TD>20      <TD>513.25
<TR><TD>21      <TD>519.25
<TR><TD>22      <TD>525.25
<TR><TD>23      <TD>531.25
<TR><TD>24      <TD>537.25
<TR><TD>25      <TD>543.25
<TR><TD>26      <TD>549.25
<TR><TD>27      <TD>555.25
<TR><TD>28      <TD>561.25
<TR><TD>29      <TD>567.25

<TR><TD>30      <TD>573.25
<TR><TD>31      <TD>579.25
<TR><TD>32      <TD>585.25
<TR><TD>33      <TD>591.25
<TR><TD>34      <TD>597.25
<TR><TD>35      <TD>603.25
<TR><TD>36      <TD>609.25
<TR><TD>37      <TD>615.25
<TR><TD>38      <TD>621.25
<TR><TD>39      <TD>627.25

<TR><TD>40      <TD>633.25
<TR><TD>41      <TD>639.25
<TR><TD>42      <TD>645.25
<TR><TD>43      <TD>651.25
<TR><TD>44      <TD>657.25
<TR><TD>45      <TD>663.25
<TR><TD>46      <TD>669.25
<TR><TD>47      <TD>675.25
<TR><TD>48      <TD>681.25
<TR><TD>49      <TD>687.25

<TR><TD>50      <TD>693.25
<TR><TD>51      <TD>699.25
<TR><TD>52      <TD>705.25
<TR><TD>53      <TD>711.25
<TR><TD>54      <TD>717.25
<TR><TD>55      <TD>723.25
<TR><TD>56      <TD>729.25
<TR><TD>57      <TD>735.25
<TR><TD>58      <TD>741.25
<TR><TD>59      <TD>747.25

<TR><TD>60      <TD>753.25
<TR><TD>61      <TD>759.25
<TR><TD>62      <TD>765.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>2       <TD>48.25
<TR><TD>3       <TD>55.25
<TR><TD>4       <TD>62.25
<TR><TD>5       <TD>175.25
<TR><TD>6       <TD>182.25
<TR><TD>7       <TD>189.25
<TR><TD>8       <TD>196.25
<TR><TD>9       <TD>203.25
<TR><TD>10      <TD>210.25
<TR><TD>11      <TD>217.25
<TR><TD>12      <TD>224.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>0       <TD>46.25
<TR><TD>1       <TD>57.25
<TR><TD>2       <TD>64.25
<TR><TD>3       <TD>86.25
<TR><TD>4       <TD>95.25
<TR><TD>5       <TD>102.25
<TR><TD>5A      <TD>138.25
<TR><TD>6       <TD>175.25
<TR><TD>7       <TD>182.25
<TR><TD>8       <TD>189.25
<TR><TD>9       <TD>196.25
<TR><TD>10      <TD>209.25
<TR><TD>11      <TD>216.25
<TR><TD>12      <TD>223.25

<TR><TD>21E     <TD>471.25
<TR><TD>22E     <TD>479.25
<TR><TD>23E     <TD>487.25
<TR><TD>24E     <TD>495.25
<TR><TD>25E     <TD>503.25
<TR><TD>26E     <TD>511.25
<TR><TD>27E     <TD>519.25
<TR><TD>28      <TD>527.25
<TR><TD>29      <TD>534.25

<TR><TD>30      <TD>541.25
<TR><TD>31      <TD>548.25
<TR><TD>32      <TD>555.25
<TR><TD>33      <TD>562.25
<TR><TD>34      <TD>569.25
<TR><TD>35      <TD>576.25
<TR><TD>36      <TD>583.25
<TR><TD>37      <TD>590.25
<TR><TD>38      <TD>597.25
<TR><TD>39      <TD>604.25

<TR><TD>40      <TD>611.25
<TR><TD>41      <TD>618.25
<TR><TD>42      <TD>625.25
<TR><TD>43      <TD>632.25
<TR><TD>44      <TD>639.25
<TR><TD>45      <TD>646.25
<TR><TD>46      <TD>653.25
<TR><TD>47      <TD>660.25
<TR><TD>48      <TD>667.25
<TR><TD>49      <TD>674.25

<TR><TD>50      <TD>681.25
<TR><TD>51      <TD>688.25
<TR><TD>52      <TD>695.25
<TR><TD>53      <TD>702.25
<TR><TD>54      <TD>709.25
<TR><TD>55      <TD>716.25
<TR><TD>56      <TD>723.25
<TR><TD>57      <TD>730.25
<TR><TD>58      <TD>737.25
<TR><TD>59      <TD>744.25

<TR><TD>60      <TD>751.25
<TR><TD>61      <TD>758.25
<TR><TD>62      <TD>765.25
<TR><TD>63      <TD>772.25
<TR><TD>64      <TD>779.25
<TR><TD>65      <TD>786.25
<TR><TD>66      <TD>793.25
<TR><TD>67      <TD>800.25
<TR><TD>68      <TD>807.25
<TR><TD>69      <TD>814.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>A       <TD>53.75
<TR><TD>B       <TD>62.25
<TR><TD>C       <TD>82.25
<TR><TD>D       <TD>175.25
<TR><TD>E       <TD>183.75
<TR><TD>F       <TD>192.25
<TR><TD>G       <TD>201.25
<TR><TD>H       <TD>210.25
<TR><TD>H-1     <TD>217.25
<TR><TD>H-2     <TD>224.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>1       <TD>45.25
<TR><TD>2       <TD>55.25
<TR><TD>3       <TD>62.25
<TR><TD>4       <TD>175.25
<TR><TD>5       <TD>182.25
<TR><TD>6       <TD>189.25
<TR><TD>7       <TD>196.25
<TR><TD>8       <TD>203.25
<TR><TD>9       <TD>210.25
<TR><TD>10      <TD>217.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>1       <TD>49.75
<TR><TD>2       <TD>57.25
<TR><TD>3       <TD>65.25
<TR><TD>4       <TD>77.25
<TR><TD>5       <TD>85.25
<TR><TD>6       <TD>168.25
<TR><TD>7       <TD>176.25
<TR><TD>8       <TD>184.25
<TR><TD>9       <TD>192.25

<TR><TD>10      <TD>200.25
<TR><TD>11      <TD>208.25
<TR><TD>12      <TD>216.25
<TR><TD>13      <TD>471.25
<TR><TD>14      <TD>479.25
<TR><TD>15      <TD>487.25
<TR><TD>16      <TD>493.25
<TR><TD>17      <TD>503.25
<TR><TD>18      <TD>511.25
<TR><TD>19      <TD>519.25

<TR><TD>20      <TD>527.25
<TR><TD>21      <TD>535.25
<TR><TD>22      <TD>543.25
<TR><TD>23      <TD>551.25
<TR><TD>24      <TD>559.25
<TR><TD>25      <TD>607.25
<TR><TD>26      <TD>615.25
<TR><TD>27      <TD>623.25
<TR><TD>28      <TD>631.25
<TR><TD>29      <TD>639.25

<TR><TD>30      <TD>647.25
<TR><TD>31      <TD>655.25
<TR><TD>32      <TD>663.25
<TR><TD>33      <TD>671.25
<TR><TD>34      <TD>679.25
<TR><TD>35      <TD>687.25
<TR><TD>36      <TD>695.25
<TR><TD>37      <TD>703.25
<TR><TD>38      <TD>711.25
<TR><TD>39      <TD>719.25

<TR><TD>40      <TD>727.25
<TR><TD>41      <TD>735.25
<TR><TD>42      <TD>743.25
<TR><TD>43      <TD>751.25
<TR><TD>44      <TD>759.25
<TR><TD>45      <TD>767.25
<TR><TD>46      <TD>775.25
<TR><TD>47      <TD>783.25
<TR><TD>48      <TD>791.25
<TR><TD>49      <TD>799.25

<TR><TD>50      <TD>807.25
<TR><TD>51      <TD>815.25
<TR><TD>52      <TD>823.25
<TR><TD>53      <TD>831.25
<TR><TD>54      <TD>839.25
<TR><TD>55      <TD>847.25
<TR><TD>56      <TD>855.25
<TR><TD>57      <TD>863.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>21      <TD>471.25
<TR><TD>22      <TD>479.25
<TR><TD>23      <TD>487.25
<TR><TD>24      <TD>495.25
<TR><TD>25      <TD>503.25
<TR><TD>26      <TD>511.25
<TR><TD>27      <TD>519.25
<TR><TD>28      <TD>527.25
<TR><TD>29      <TD>535.25

<TR><TD>30      <TD>543.25
<TR><TD>31      <TD>551.25
<TR><TD>32      <TD>559.25
<TR><TD>33      <TD>567.25
<TR><TD>34      <TD>575.25
<TR><TD>35      <TD>583.25
<TR><TD>36      <TD>591.25
<TR><TD>37      <TD>599.25
<TR><TD>38      <TD>607.25
<TR><TD>39      <TD>615.25

<TR><TD>40      <TD>623.25
<TR><TD>41      <TD>631.25
<TR><TD>42      <TD>639.25
<TR><TD>43      <TD>647.25
<TR><TD>44      <TD>655.25
<TR><TD>45      <TD>663.25
<TR><TD>46      <TD>671.25
<TR><TD>47      <TD>679.25
<TR><TD>48      <TD>687.25
<TR><TD>49      <TD>695.25

<TR><TD>50      <TD>703.25
<TR><TD>51      <TD>711.25
<TR><TD>52      <TD>719.25
<TR><TD>53      <TD>727.25
<TR><TD>54      <TD>735.25
<TR><TD>55      <TD>743.25
<TR><TD>56      <TD>751.25
<TR><TD>57      <TD>759.25
<TR><TD>58      <TD>767.25
<TR><TD>59      <TD>775.25

<TR><TD>60      <TD>783.25
<TR><TD>61      <TD>791.25
<TR><TD>62      <TD>799.25
<TR><TD>63      <TD>807.25
<TR><TD>64      <TD>815.25
<TR><TD>65      <TD>823.25
<TR><TD>66      <TD>831.25
<TR><TD>67      <TD>839.25
<TR><TD>68      <TD>847.25
<TR><TD>69      <TD>855.25

</TABLE>
<TD>
<TABLE>

<TR><TH>Channel <TH>Video Carrier (MHz)
<TR><TD>A       <TD>45.75
<TR><TD>B       <TD>53.75
<TR><TD>C       <TD>61.75
<TR><TD>D       <TD>175.25
<TR><TD>E       <TD>183.25
<TR><TD>F       <TD>191.25
<TR><TD>G       <TD>199.25
<TR><TD>H       <TD>207.25
<TR><TD>J       <TD>215.25

<TR><TD>21      <TD>471.25
<TR><TD>22      <TD>479.25
<TR><TD>23      <TD>487.25
<TR><TD>24      <TD>495.25
<TR><TD>25      <TD>503.25
<TR><TD>26      <TD>511.25
<TR><TD>27      <TD>519.25
<TR><TD>28      <TD>527.25
<TR><TD>29      <TD>535.25

<TR><TD>30      <TD>543.25
<TR><TD>31      <TD>551.25
<TR><TD>32      <TD>559.25
<TR><TD>33      <TD>567.25
<TR><TD>34      <TD>575.25
<TR><TD>35      <TD>583.25
<TR><TD>36      <TD>591.25
<TR><TD>37      <TD>599.25
<TR><TD>38      <TD>607.25
<TR><TD>39      <TD>615.25

<TR><TD>40      <TD>623.25
<TR><TD>41      <TD>631.25
<TR><TD>42      <TD>639.25
<TR><TD>43      <TD>647.25
<TR><TD>44      <TD>655.25
<TR><TD>45      <TD>663.25
<TR><TD>46      <TD>671.25
<TR><TD>47      <TD>679.25
<TR><TD>48      <TD>687.25
<TR><TD>49      <TD>695.25

<TR><TD>50      <TD>703.25
<TR><TD>51      <TD>711.25
<TR><TD>52      <TD>719.25
<TR><TD>53      <TD>727.25
<TR><TD>54      <TD>735.25
<TR><TD>55      <TD>743.25
<TR><TD>56      <TD>751.25
<TR><TD>57      <TD>759.25
<TR><TD>58      <TD>767.25
<TR><TD>59      <TD>775.25

<TR><TD>60      <TD>783.25
<TR><TD>61      <TD>791.25
<TR><TD>62      <TD>799.25
<TR><TD>63      <TD>807.25
<TR><TD>64      <TD>815.25
<TR><TD>65      <TD>823.25
<TR><TD>66      <TD>831.25
<TR><TD>67      <TD>839.25
<TR><TD>68      <TD>847.25
<TR><TD>69      <TD>855.25

</TABLE>
</TBODY>
</TABLE>


</BODY>
</HTML>
