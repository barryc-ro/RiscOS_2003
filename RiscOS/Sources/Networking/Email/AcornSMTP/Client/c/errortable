/*	Project Post (769) - AcornSMTP
	Acorn Risc Technologies
	Copyright © 1997. All Rights Reserved.

	FILE:		errortable.c
	AUTHOR:		Richard D. Warren
	VERSION:	0.05 for RISC OS

	OVERVIEW
	========
	Source file defining errors

	HISTORY
	=======
	11/07/97	0.01	RDW	initial version, taken from old errortable.h
	14/07/97	0.02	RDW	Tidy up
	08/10/97	0.03	RDW	now uses new type ERRORS
	17/11/97	0.04	RDW	now uses ERROR_STRUCT macros to save memory
	13/01/98	0.05	RDW	RESOLVERFAILED added
					All error strings prepended with AcornPOP3
*/


/* ************************************************************************** */
/*                                                                            */
/* Include header files - System                                              */
/*                                                                            */
/* ************************************************************************** */
#include "kernel.h"


/* ************************************************************************** */
/*                                                                            */
/* Include header files - Project defined                                     */
/*                                                                            */
/* ************************************************************************** */
#include "allocation.h"


/* ************************************************************************** */
/*                                                                            */
/* New enumerated types                                                       */
/*                                                                            */
/* ************************************************************************** */
typedef enum
{
  FAILED          = ErrorBase_AcornSMTP,
  INVALIDID,
  NOMOREPROCESSES,
  ALREADYDOINGOP,
  INTERNETERR,
  NOTSUPPORTED,
  FAILEDTOSEND,
  QUEUED,
  FAILEDTOQUEUE,
  CONTIMEDOUT,
  CONRESPTIMEDOUT,
  CONFAILED,
  CONREFUSED,
  NULLADDR,
  NOTUSED1,									/* 14 NOT USED */
  NOTUSED2,									/* 15 NOT USED */
  NOTUSED3,									/* 16 NOT USED */
  NOSPACE,
  NOSPACEFORHDRS,
  NOSPACEFORBODY,
  WRITEFAIL,
  MALLOCFAILED,
  INTERNALERR,
  CONBROKEN,
  RESOLVERFAILED
} ERRORS;


/* ************************************************************************** */
/*                                                                            */
/* Macros                                                                     */
/*                                                                            */
/* ************************************************************************** */
#define ERROR_STRUCT(name,text) \
        struct {ERRORS errnum; char errmess[sizeof(text)+1];} ERR_##name = {name,text}

#define ERROR_EXTERN(name) \
        extern struct {ERRORS errnum; char errmess[1];} ERR_##name
        
#define ERROR(e)  ((_kernel_oserror *)&(ERR_##e))


/* ************************************************************************** */
/*                                                                            */
/* Error Table                                                                */
/*                                                                            */
/* ************************************************************************** */
ERROR_STRUCT(FAILED,          "AcornSMTP: Failed");
ERROR_STRUCT(INVALIDID,       "AcornSMTP: Invalid ID");
ERROR_STRUCT(NOMOREPROCESSES, "AcornSMTP: No more processes available");
ERROR_STRUCT(ALREADYDOINGOP,  "AcornSMTP: Already doing operation");
ERROR_STRUCT(INTERNETERR,     "AcornSMTP: Internet Error");
ERROR_STRUCT(NOTSUPPORTED,    "AcornSMTP: Command not supported by server");
ERROR_STRUCT(FAILEDTOSEND,    "AcornSMTP: Failed to send");
ERROR_STRUCT(QUEUED,          "AcornSMTP: Failed to send, message queued");
ERROR_STRUCT(FAILEDTOQUEUE,   "AcornSMTP: Failed to queue message");
ERROR_STRUCT(CONTIMEDOUT,     "AcornSMTP: Connection timedout");
ERROR_STRUCT(CONRESPTIMEDOUT, "AcornSMTP: Connection timedout waiting for response");
ERROR_STRUCT(CONFAILED,       "AcornSMTP: Connection failed to server");
ERROR_STRUCT(CONREFUSED,      "AcornSMTP: Connection refused by server");
ERROR_STRUCT(NULLADDR,        "AcornSMTP: NULL address");
ERROR_STRUCT(NOTUSED1,        "AcornSMTP: UNUSED: Internal error");
ERROR_STRUCT(NOTUSED2,        "AcornSMTP: UNUSED: Internal error");
ERROR_STRUCT(NOTUSED3,        "AcornSMTP: UNUSED: Internal error");
ERROR_STRUCT(NOSPACE,         "AcornSMTP: No Space");
ERROR_STRUCT(NOSPACEFORHDRS,  "AcornSMTP: No space for headers");
ERROR_STRUCT(NOSPACEFORBODY,  "AcornSMTP: No space for Xlines of body");
ERROR_STRUCT(WRITEFAIL,       "AcornSMTP: Failed to open file");
ERROR_STRUCT(MALLOCFAILED,    "AcornSMTP: Memory allocation failed");
ERROR_STRUCT(INTERNALERR,     "AcornSMTP: Internal AcornSMTP error: Report to rwarren@acorn.com");
ERROR_STRUCT(CONBROKEN,       "AcornSMTP: Connection to server broken");
ERROR_STRUCT(RESOLVERFAILED,  "AcornSMTP: Failed talking to DNS Server");
