/*	Project Post (769) - AcornSMTP
	Acorn Risc Technologies
	Copyright © 1997. All Rights Reserved.

	FILE:		errortable.c
	AUTHOR:		Richard D. Warren
	VERSION:	0.04 for RISC OS

	OVERVIEW
	========
	Source file defining errors

	HISTORY
	=======
	11/07/97	0.01	RDW	initial version, taken from old errortable.h
	14/07/97	0.02	RDW	Tidy up
	08/10/97	0.03	RDW	now uses new type ERRORS
	17/11/97	0.04	RDW	now uses ERROR_STRUCT macros to save memory
*/


/* ************************************************************************** */
/*                                                                            */
/* Include header files - System                                              */
/*                                                                            */
/* ************************************************************************** */
#include "kernel.h"


/* ************************************************************************** */
/*                                                                            */
/* Include header files - Project defined                                     */
/*                                                                            */
/* ************************************************************************** */
#include "allocation.h"


/* ************************************************************************** */
/*                                                                            */
/* New enumerated types                                                       */
/*                                                                            */
/* ************************************************************************** */
typedef enum
{
  FAILED          = ErrorBase_AcornSMTP,
  INVALIDID,
  NOMOREPROCESSES,
  ALREADYDOINGOP,
  INTERNETERR,
  NOTSUPPORTED,
  FAILEDTOSEND,
  QUEUED,
  FAILEDTOQUEUE,
  CONTIMEDOUT,
  CONRESPTIMEDOUT,
  CONFAILED,
  CONREFUSED,
  NULLADDR,
  NOTUSED1,									/* 14 NOT USED */
  NOTUSED2,									/* 15 NOT USED */
  NOTUSED3,									/* 16 NOT USED */
  NOSPACE,
  NOSPACEFORHDRS,
  NOSPACEFORBODY,
  WRITEFAIL,
  MALLOCFAILED,
  INTERNALERR,
  CONBROKEN
} ERRORS;


/* ************************************************************************** */
/*                                                                            */
/* Macros                                                                     */
/*                                                                            */
/* ************************************************************************** */
#define ERROR_STRUCT(name,text) \
        struct {ERRORS errnum; char errmess[sizeof(text)+1];} ERR_##name = {name,text}

#define ERROR_EXTERN(name) \
        extern struct {ERRORS errnum; char errmess[1];} ERR_##name
        
#define ERROR(e)  ((_kernel_oserror *)&(ERR_##e))


/* ************************************************************************** */
/*                                                                            */
/* Error Table                                                                */
/*                                                                            */
/* ************************************************************************** */
ERROR_STRUCT(FAILED, "Failed");
ERROR_STRUCT(INVALIDID, "Invalid ID");
ERROR_STRUCT(NOMOREPROCESSES, "No more processes available");
ERROR_STRUCT(ALREADYDOINGOP, "Already doing operation");
ERROR_STRUCT(INTERNETERR, "Internet Error");
ERROR_STRUCT(NOTSUPPORTED, "Command not supported by server");
ERROR_STRUCT(FAILEDTOSEND, "Failed to send");
ERROR_STRUCT(QUEUED, "Failed to send, message queued");
ERROR_STRUCT(FAILEDTOQUEUE, "Failed to queue message");
ERROR_STRUCT(CONTIMEDOUT, "Connection timedout");
ERROR_STRUCT(CONRESPTIMEDOUT, "Connection timedout waiting for response");
ERROR_STRUCT(CONFAILED, "Connection failed to server");
ERROR_STRUCT(CONREFUSED, "Connection refused by server");
ERROR_STRUCT(NULLADDR, "NULL address");
ERROR_STRUCT(NOTUSED1, "UNUSED: Internal error");
ERROR_STRUCT(NOTUSED2, "UNUSED: Internal error");
ERROR_STRUCT(NOTUSED3, "UNUSED: Internal error");
ERROR_STRUCT(NOSPACE, "No Space");
ERROR_STRUCT(NOSPACEFORHDRS, "No space for headers");
ERROR_STRUCT(NOSPACEFORBODY, "No space for Xlines of body");
ERROR_STRUCT(WRITEFAIL, "Failed to open file");
ERROR_STRUCT(MALLOCFAILED, "Memory allocation failed");
ERROR_STRUCT(INTERNALERR, "Internal AcornSMTP error: Report to rwarren@acorn.com");
ERROR_STRUCT(CONBROKEN, "Connection to server broken");
