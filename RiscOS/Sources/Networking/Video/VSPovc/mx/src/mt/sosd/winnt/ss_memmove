#include <sysi.h>

dvoid *ss_memmove(dvoid *p1, dvoid *p2, size_t len)
{
  ub1 *b1, *b2;

  b1 = (ub1 *) p1;
  b2 = (ub1 *) p2;

  if ((b1 < b2 && b1 + len < b2) || (b2 < b1 && b2 + len < b1))
    memcpy(b1, b2, len);
  else if (b1 < b2)
    while (len--) *b1++ = *b2++;
  else
    {
      b1 += (len-1), b2 += (len-1);
      while (len--) *b1-- = *b2--;
    }

  return p1;
}
