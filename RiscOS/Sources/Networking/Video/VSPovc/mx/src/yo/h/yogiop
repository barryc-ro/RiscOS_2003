/* yo/yogiop.h */


/*
ORACLE, Copyright (c) 1982, 1983, 1986, 1990 ORACLE Corporation
ORACLE Utilities, Copyright (c) 1981, 1982, 1983, 1986, 1990, 1991 ORACLE Corp

Restricted Rights
This program is an unpublished work under the Copyright Act of the
United States and is subject to the terms and conditions stated in
your  license  agreement  with  ORACORP  including  retrictions on
use, duplication, and disclosure.

Certain uncopyrighted ideas and concepts are also contained herein.
These are trade secrets of ORACORP and cannot be  used  except  in
accordance with the written permission of ORACLE Corporation.
*/








#ifndef YOGIOP_ORACLE
#define YOGIOP_ORACLE

#ifndef SYSX_ORACLE
#include <sysx.h>
#endif
#ifndef YS_ORACLE
#include <ys.h>
#endif
#ifndef YSV_ORACLE
#include <ysv.h>
#endif
#ifndef YO_ORACLE
#include <yo.h>
#endif
#ifndef YOSX_ORACLE
#include <yosx.h>
#endif
#ifndef YOT_ORACLE
#include <yot.h>
#endif


#define GIOP_MAGIC      "GIOP"
#define GIOP_MAGIC_SZ   4


#define YOGIIOR_TAG_INTERNET    (ub4)0
#define YOGIIOR_TAG_MULTICOMP   (ub4)1
#define YOGIIOR_TAG_YO          (ub4)0x4f524100


#define YOGISVC_TAG_TRANSVC     (ub4)0
#define YOGISVC_TAG_SVCCDSET    (ub4)1
#define YOGISVC_TAG_YOENV       (ub4)0x4f524100


#define YOGIMT_REQ      0
#define YOGIMT_REP      1
#define YOGIMT_CANCEL   2
#define YOGIMT_LOCREQ   3
#define YOGIMT_LOCREP   4
#define YOGIMT_CLOSE    5
#define YOGIMT_ERR      6


#define YOGIRS_NOEX     (ub4)0
#define YOGIRS_USREX    (ub4)1
#define YOGIRS_SYSEX    (ub4)2
#define YOGIRS_LOCFWD   (ub4)3


#define YOGILRS_UNKNOWN         (ub4)0
#define YOGILRS_HERE            (ub4)1
#define YOGILRS_FORWARD         (ub4)2

typedef struct yogiOctSeq yogiOctSeq;
struct yogiOctSeq
{
  ub4 len;
  ub1 data[1];
};

typedef struct yogiSvcCtx yogiSvcCtx;
struct yogiSvcCtx
{
  ub4 id;
  yogiOctSeq data;
};

typedef struct yogiIOR yogiIOR;
struct yogiIOR
{
  char *type_id;
  yslst *profs;
};

typedef struct yogiIiopProf yogiIiopProf;
struct yogiIiopProf
{
  ub1   ver_major;
  ub1   ver_minor;
  char *host;
  ub2   port;
  yogiOctSeq *objkey;
};

typedef struct yogiYoProf yogiYoProf;
struct yogiYoProf
{
  ub1   ver_major;
  ub1   ver_minor;
  yota *addr;
  yogiOctSeq *objkey;
};

typedef struct yogiTagProf yogiTagProf;
struct yogiTagProf
{
  ub4 tag;
  union
  {
    yogiIiopProf iiop;
    yogiYoProf yo;
    yogiOctSeq *data;
  } pdata;
};

typedef struct yogiMsgHdr yogiMsgHdr;
struct yogiMsgHdr
{
  char magic[4];
  ub1 ver_major;
  ub1 ver_minor;
  ub1 bytesex;
  ub1 type;
  ub4 length;
};

typedef struct yogiRepHdr yogiRepHdr;
struct yogiRepHdr
{
  yslst *scl;                                        
  ub4    reqid;                                                
  ub4    status;                                                   
};

typedef struct yogiLocReq yogiLocReq;
struct yogiLocReq
{
  ub4  reqid;
  yogiOctSeq *objkey;
};

typedef struct yogiLocRep yogiLocRep;
struct yogiLocRep
{
  ub4 reqid;
  ub4 status;
};

typedef struct yogiRep yogiRep;
struct yogiRep
{
  yogiRepHdr hdr;
  yogiIOR ior;                             
};

typedef struct yogiMsg yogiMsg;
struct yogiMsg
{
  yogiMsgHdr hdr;
  union
  {
    yogiRep rep;
  } b;                                                 
};

#endif
