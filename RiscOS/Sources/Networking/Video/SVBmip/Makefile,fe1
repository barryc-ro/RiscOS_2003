#Makefile for VSPmip module

# Toolflags:
CCflags = -c -depend !Depend -IC:,TCPIPLibs: -throwback -DRISCOS -DCOMPAT_INET4 -DRISCOS_ATM25 -DRISCOS_MPEG -Zm -Wp -ffa 
Linkflags = -rmf -c++ -o $@ 

# Final targets:
@.VSPmip:  @.o.vsphdr @.o.mip @.o.module @.o.vspc @.o.poduleirq @.o.dirs
            Link $(Linkflags) @.o.vsphdr @.o.module @.o.mip @.o.vspc @.o.poduleirq \
            c:o.stubs TCPIPLibs:o.inetlibzm TCPIPLibs:o.socklibzm
            access $@ wr/r

# Static dependencies:
@.o.module:   @.c.module
        cc $(ccflags) -o @.o.module @.c.module 

@.o.mip:   @.c.mip
        cc $(ccflags) -o @.o.mip @.c.mip 

@.o.vspc:   @.c.vspc
        cc $(ccflags) -o @.o.vspc @.c.vspc 

@.o.poduleirq: @.s.poduleirq
             objasm -from s.poduleirq -to o.poduleirq -stamp -quit
@.o.vsphdr:	@.vspHdr
            cmhg @.vspHdr @.o.vsphdr

@.o.dirs:
	cdir @.o
        create @.o.dirs

# Dynamic dependencies:
