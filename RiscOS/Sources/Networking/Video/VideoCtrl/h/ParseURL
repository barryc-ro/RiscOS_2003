/***************************************************/
/* File   : ParseURL.h                             */
/*                                                 */
/* Purpose: Minimal URL parsing stuff.             */
/*                                                 */
/* Author : A.D.Hodgkinson. Based on URL_Fetcher   */
/*          source by S.N.Brodie.                  */
/*                                                 */
/* History: 09-Sep-1999: Created.                  */
/***************************************************/

#ifndef VideoControl_ParseURL__

  #define VideoControl_ParseURL__

  enum
  {
    parseurlflags_FIELDCOUNT_IN_R5 = 1,
    parseurlflags_APPLY_HEX_ENCODE = 2
  };

  struct URL_ptrs
  {
    char * full;
    char * scheme;
    char * host;
    char * port;
    char * user;
    char * password;
    char * account;
    char * path;
    char * query;
    char * fragment;
    char * minimal;
  };

  struct URL_lengths
  {
   size_t full;
   size_t scheme;
   size_t host;
   size_t port;
   size_t user;
   size_t password;
   size_t account;
   size_t path;
   size_t query;
   size_t fragment;
   size_t minimal;
  };

  typedef union URL
  {
    struct URL_lengths   lengths;
    struct URL_ptrs      data;
    size_t               len   [sizeof(struct URL_ptrs) / sizeof(size_t)];
    char               * field [sizeof(struct URL_ptrs) / sizeof(size_t)];

  } URL;

  enum
  {
    urlfield_FULL,
    urlfield_SCHEME,
    urlfield_HOST,
    urlfield_PORT,
    urlfield_USER,
    urlfield_PASSWORD,
    urlfield_ACCOUNT,
    urlfield_PATH,
    urlfield_QUERY,
    urlfield_FRAGMENT,
    urlfield_MINIMAL
  };

  enum
  {
    url_parseurl_buffer_lengths,
    url_parseurl_return_data,
    url_parseurl_compose_from_components,
    url_parseurl_quick_resolve
  };

  #define URL_Fields    ((sizeof(URL)/sizeof(size_t)))
  #define URL_ParseURL  (0x83E07)
  #define URL_NoSuchSWI (0x1E6)

  /* Function prototypes */

  extern char * parseurl_canonicalise (int flags, const char * url);

#endif /* VideoControl_ParseURL__ */
