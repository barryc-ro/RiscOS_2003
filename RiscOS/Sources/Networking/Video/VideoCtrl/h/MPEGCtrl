/**************************************************************/
/* File:    MPEGCtrl.h                                        */
/*          (C) 1999 Pace Micro Technology PLC                */
/*          All rights reserved                               */
/*                                                            */
/* Purpose: Handle the MPEG system and display setup.         */
/*                                                            */
/* Author:  A.D.Hodgkinson.                                   */
/*                                                            */
/* History: 15-Dec-1999 (ADH): Created.                       */
/**************************************************************/

#ifndef VideoControl_MPEGCtrl_

  #define VideoControl_MPEGCtrl__
  #include <kernel.h>
  #include "VideoCtrl.h"

  /* General defaults */

  #define MPEGCtrl_DefaultModeWidth         720
  #define MPEGCtrl_DefaultModeHeightPAL     576
  #define MPEGCtrl_DefaultModeHeightNTSC    480
  #define MPEGCtrl_DefaultFrameRate         -1

  #define MPEGCtrl_SyncOffsetCommand        "SyncOffset 0"

  /* UDPV */

  #define UDPV_StartOfPlay                  0x4000a
  #define UDPV_EndOfPlay                    0x40009

  /* Macrovision control */

  #define Macrovision_SetState              0x4d540

  #define MPEGCtrl_MacrovisionTVFormat      0

  /* MPEGVideo things for getting towards NPT */

  #define MPEGVideo_ReadParameters          0x49307
  #define MPEGVideo_ReadParameters_SCR      3

  /* MPEGControl SWIs */

  #define MPEGControl_OpenStream            0x492c0
  #define MPEGControl_CloseStream           0x492c2
  #define MPEGControl_Play                  0x492c3
  #define MPEGControl_SetSpeed              0x492c4
  #define MPEGControl_ResetStream           0x492c5
  #define MPEGControl_MuteSound             0x492c6
  #define MPEGControl_SoundVolume           0x492c7
  #define MPEGControl_SelectProgram         0x492c8
  #define MPEGControl_Stats                 0x492c9
  #define MPEGControl_SetAudioParameters    0x492cc
  #define MPEGControl_ControlOp             0x492cd

  /* Flags and other defaults for MPEGControl_OpenStream (MCOS) */

  #define MPEGCtrl_MCOS_VideoPresent        (1u<<0)
  #define MPEGCtrl_MCOS_AudioPresent        (1u<<1)
  #define MPEGCtrl_MCOS_AudioToStreamSyncOn (1u<<2)
  #define MPEGCtrl_MCOS_AudioToVideoSyncOff (1u<<3)
  #define MPEGCtrl_MCOS_UseCallbacks        (1u<<5)
  #define MPEGCtrl_MCOS_ReservedSetToOne    (1u<<6)
  #define MPEGCtrl_MCOS_EnableOVSTrickPlay  (1u<<10)
  #define MPEGCtrl_MCOS_AutoReset           (1u<<11)

  #define MPEGCtrl_MCOS_Video_NoCLS         (1u<<0)
  #define MPEGCtrl_MCOS_Video_NoPalette     (1u<<1)
  #define MPEGCtrl_MCOS_Video_NTSC          (1u<<2)
  #define MPEGCtrl_MCOS_Video_BSAndBF       (1u<<16)
  #define MPEGCtrl_MCOS_Video_UnderrunFix   (1u<<17)
  #define MPEGCtrl_MCOS_Video_PESLengthFix  (1u<<18)

  #define MPEGCtrl_MCOS_Video_DefaultMode   -1

  #define MPEGCtrl_MCOS_Audio_MuteOnError   (1u<<0)
  #define MPEGCtrl_MCOS_Audio_DCMSIsValid   (1u<<1)

  #define MPEGCtrl_MCOS_Audio_DCMS_Both     0
  #define MPEGCtrl_MCOS_Audio_DCMS_Left     1
  #define MPEGCtrl_MCOS_Audio_DCMS_Right    2

  /* Flags and constants for MPEGControl_SetSpeed */

  #define MPEGCtrl_MCSS_DeferIfSlower       (1u<<0)

  #define MPEGCtrl_MCSS_SlowestRate         16

  /* Flags for MPEGControl_ResetStream */

  #define MPEGCtrl_MCRS_VideoPresent        (1u<<0)
  #define MPEGCtrl_MCRS_AudioPresent        (1u<<1)
  #define MPEGCtrl_MCRS_DiscardToTrickPlay  (1u<<2)
  #define MPEGCtrl_MCRS_NewIsTrickPlay      (1u<<3)
  #define MPEGCtrl_MCRS_DeferReset          (1u<<4)

  #define MPEGCtrl_MCRS_Trick_FFWD          0
  #define MPEGCtrl_MCRS_Trick_SFWD          1
  #define MPEGCtrl_MCRS_Trick_Freeze        2
  #define MPEGCtrl_MCRS_Trick_FRWD          3
  #define MPEGCtrl_MCRS_Trick_SRWD          4
  #define MPEGCtrl_MCRS_Trick_Play          -1

  /* Statistics tags for MPEGControl_Stats */

  #define MPEGCtrl_MCS_NPTRefDesc           9

  /* Some bits and pieces for MPEGControl_ControlOp */

  #define MPEGControl_MCCO_SetDemuxModule   0
  #define MPEGControl_MCCO_ReadDemuxModule  1

  #define MPEGControl_MCCO_MPEGSystem       0
  #define MPEGControl_MCCO_MPEGTransport    1
  #define MPEGControl_MCCO_None             -1

  /* Function prototypes */

  extern _kernel_oserror * mpegctrl_setup_display   (client * c);
  extern _kernel_oserror * mpegctrl_restore_display (client * c);

  extern _kernel_oserror * mpegctrl_setup_mpeg      (client * c);
  extern _kernel_oserror * mpegctrl_restore_mpeg    (client * c);

#endif /* VideoControl_MPEGCtrl__ */

