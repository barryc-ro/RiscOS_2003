/**************************************************************/
/* File:    Overlay.h                                         */
/*          (C) 2000 Pace Micro Technology PLC                */
/*          All rights reserved                               */
/*                                                            */
/* Purpose: Overlay manager for full screen playback.         */
/*          Overlays are sprite or text items placed on the   */
/*          screen at various alignment points for a certain  */
/*          duration.                                         */
/*                                                            */
/* Author:  A.D.Hodgkinson.                                   */
/*                                                            */
/* History: 19-Apr-2000 (ADH): Created.                       */
/**************************************************************/

#ifndef PlugPlay_Overlay__
  #define PlugPlay_Overlay__

  #include <kernel.h>
  #include <tboxlibs/wimp.h>
  #include <tboxlibs/toolbox.h>

  /* Overlay alignment values. These must start at zero and */
  /* monotonically rise.                                    */

  typedef enum overlay_alignment
  {
    oa_top_left = 0,
    oa_top_centre,
    oa_top_right,
    oa_middle_left,
    oa_middle_centre,
    oa_middle_right,
    oa_bottom_left,
    oa_bottom_centre,
    oa_bottom_right,

    oa__end

  } overlay_alignment;

  /* Hold details of each overlay */

  typedef struct overlay
  {
    struct overlay    * prev;
    struct overlay    * next;

    char              * text;
    char              * sprite;

    overlay_alignment   align;

    unsigned int        start_time;
    unsigned int        duration;

    /* Internal use only */

    unsigned int        flags;

  } overlay;

  /* Function prototypes */

  _kernel_oserror * overlay_add        (const char * sprite, const char * text, overlay_alignment align, unsigned int duration, overlay * ret);
  _kernel_oserror * overlay_remove     (overlay * item);

  int               overlay_poll       (int eventcode, WimpPollBlock * b, IdBlock * idb, void * handle);

  void              overlay_initialise (void);
  void              overlay_shutdown   (void);

#endif /* PlugPlay_Overlay__ */
