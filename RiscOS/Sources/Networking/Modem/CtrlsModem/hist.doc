		History file for Musket V34 proj
		contains all the changes to
		controller after Beta_1.0
		release.
			started 1-31-96

===============================================================
1-22-97 
===============================================================
		THIS IS VERSION 3.27

1-RAN changes made to dnld the legacy patch 10U.
	files affected : patch_l5.l, vcepatch.l this is 10U patch
			 ac00cmfx.c @fclass_e case 0 and case 1
			 ac00cmat.c at +mscommand
			 ac00lib3.c @ end of acu_load_defaults
			 ac00pro.h new defs at end of file
			 ac00mstr.c set voice_patch_dnld to false

2-RAN we do not turn callerid relay off and disable callerid in the 
      correct modes.
	files affected : ac00lib1.c @ on_hook
			 musket.c @ set_hook_relay
			 ac00lib3.c @acu_load_defaults
			 vc00ex.c @ execute_vls_command
			 ac00cman.c @and_f

3-RAN V42 bug fix for Japan BBS
	files affected : lapm_fg.c

4-RAN V42 bug fix for file 5.tst. shut off selective retransmit
	files affected : v42.c

5-RAN Mohammad fixed a MNP bug. At low speeds MNP frame did not get
      reported to the MNP module at the right time.	
	files affected : lineasyn.c @rx_bg_async_char

6-RAN Mohammad changed V8 timer value from 1000 to 500. Time reduced
      so that we can now go and detect MNP.	
	files affected : mt00v834.c

7-RAN Mohammad made changes for Tone dialing. The DTMF level got set
      only in blind dial. this is fixed.	
	files affected : ac00ordl.c @ case T
			 ac00orps.c @orig_init_dial

8-MRM Changed the constant DELAY_IO_PROPEGATE to 2 seconds to avoid No_carrier 
      message during the HDLC rx.

	files affected : f1x00def.h
 	
9-MRM Merge the new speakerphone code Version 4.0 and changed the digital 
      gain address per Jim B. release document.

	files affected : spkr_phn.c voc_ctls1.c
	
10-MRM Fixed the 1200 bps DTE connection.
	
	files affected : ac00orps.c ac00anps.c ac00lib4.c mt00dp10.c

11-MRM We voilated the IS101 spec again by enableing L and M commands.
  
	files affected : ac00cmat.c 
 
12-MRM remove voice view at+fclass=? from the code.

	files affected : sys02def.h

13-MRM Changed the delay for ATH command.(HANGUP_PHYS_TIME__CARRIER)

	files affected : ac00def.h

14-MRM Changed the ADP_SEND_COUNT from 10 to 20 in order to connect to 
       USR at 2400 and 1200 line rates.
	
	files affected : linedetc.c

15-MRM Report true carrier from the DSP for Legacy modes.

	files affected : mt00dp10.c
	

===============================================================
12-6-96 
===============================================================
		THIS IS VERSION 3.26

1-SLei Modified ac00cmat.c and ptt00cfg.c to fit into Configuration
       Utility.
	
       files affected: ac00cmat.c ptt00cfg.c

2-SLei make_time and break_time did not initialize properly when and_F
       command issued.

       files affected: ac00ptt.c

3-MRM  Added the changes for v42bis disconnect.

       files affected: linelink.c linelapm.c

4-MRM  Added the new patches for performance enhancement and voice. (patch 10P)

       files affected: patch_l5.l vcepatch.l

5-MRM  Fixed the problem with pulse dialing when blind dialing.

       files affected: ac00ptt.c

6-MRM  Added the changes for config utility in PNP.s from Shiang and
       changed the version in powerup.s.

       files affected: pnp.s powerup.s

===============================================================
12-3-96 
===============================================================

1-RAN In voice if there is no dial tone during dialing we exit out
      of voice mode.

      This is fixed now.
	
	files affected : ac00ordl.c @orig_wait_for_dialtone
			 ac00vc.h, vc00def.h defined voice_dial_hangup_nodt
			 vc00mn.c @ dial_failed_nodt, voice_connect

2-RAN If dialing failed in voice mode dur to keyboard abort
      or no dial tone we could not dial out till atz or ath given.

      This is fixed now.
	
	files affected : vc00mn.c @ voice_connect, call voice_hangup

3-RAN We went ot sleep if in voice online state

      This is fixed now.
		
	files affected : ac00lib4.c @ process_acu_timer

4-RAN When we wake up we did not download the correct patch if in 
      voice or spkr phn mode.

      This is fixed now.
	
	files affected : sleep.c @ process_sleep_timer
			 voc_ctls.c @ wake_up_from_sleep_in_voice	


===============================================================
11-25-96   
===============================================================
		THIS IS VERSION 3.25

1-RAN We used to report in v34 mode connection speed of 1200 bps
      this is was because of a dsp bug. we now drop the line if
      detect 1200bps as speed in v34 mode.

	files affected: ac00orps.c @ acu_connect
			ac00lib4.c @ output_result

2-RAN The new dsp patch (10L) has a bug in ALB. the cd is turned
      on before the ALB is actually set up. To workaround this we
      now wait 7 secs before giving the connect message.

	files affected : ac00lib4.c @ process_acu_timer
			 ac00tsa1.c @ test_wait_for_physical_link,
				      test_settling_delay
			 mt00dp10.c @ check_CD

3-RAN rewrote the check_cd function 
	files affected : mt00dp10.c @ check_cd


4-RAN To work woth MSPHONE we had voilated the IS101 spec again . 
       we used terminate the dtmf detection with 0x7f instead of
       0x07e (~). we have now undone this work around. so we may
       fail with MS phone again.	
	files affected : vc00lib.c @ call_progress

5-RAN in tlq_mse_poor_invalid chk to see if we are originating or
      answering to decide the curretn line rate.
	files affected : mt00rt10.c @ tlq_mse_poor_invalid

6-RAN set the retrain timer flag to false when we drop the line
	files affected : mt00mn10.c @ mt_bg

7-RAN we were looking for the wrong value for rate reneg from dsp.
      we should be looking for 0x0d , we were looking for 0x09.

	files affected : mt00mn10.c @ update_status.

8-RAN when exiting voice mode we dnlded the data patchonly if we
      were in spkr phn mode . this is not the right way for the
      new dynamic voice patch. we need to dnld the data patch
      on exit from voice mode

	files affected : ac00vc2.c @init_voice
			 ac00cmfx.c @fclass_e					



===============================================================
11-19-96   
===============================================================
		THIS IS VERSION 3.24

1-RAN In check_cd routine and cd not on and if in fax mode
	return 0 immediately without waiting for any time
	as needed for data mode
	
	files affected : mt00dp10.c @ check_CD



===============================================================
11-19-96   
===============================================================
		THIS IS VERSION 3.23

1-RAN Updated the stub for voice view so that we can compile 
	without VV
	files affected : ac00vvst.c

2-RAN Fixed the retrain problem in v32bis mode with the rockwell modem
	when the rockwell initiates the retain it shuts of cd for a
	while when this happens the controller should nor drop the line
	but allow the dsp to retrain after sometime

	files affected : mt00dp10.c @check_cd

3-RAN STUB for V80 functions
	files affected : dsppatch.h, v80stub.c (new files)
			 mt00cust.c call dnld_dsp_patch
			 mtmf.arm,link.ser, link.par, include v80stub
			 voc_ctls.c, commented out dsp_poke definitaion
				     it is defined in dsppatch.c

4-RAN added code to dyanmicaly load the voice patch.
	files affected : voc_ctls.c @end_spkr_phn_mode,
			 ac00cmfx.c @fclass_e
			 dsppatch.c @voice_dnld_patch, dsp_write, dsp_peek
			 makefile,link.ser, link.par include vcepatch.o
			 vcepatch.l	new patch segment
			 pat2c.exe, this the new utility that will allow you 
				    to name the array that you want
			 patch_l5.l, new ver 10L patch
			 pwron_j5.c, bump up freq_sel by one as needed by the
				     new patch
 

5-MRM DSP reported a none valid bit rate (tx=1200\rx=1200)in v34 mode.

	files affected : ac00orps.c


6-MRM Fixed the problem with blank EEPROM that never loads the factory 
      defaults.

	files affected : mt_stub.c



===============================================================
10-25-96   
===============================================================
1-SLei Added two new command ati10 and ati11. Files affected: ptt00cfg.c and
       ac00cmat.c

	
===============================================================
10-25-96   
===============================================================
		THIS IS VERSION 3.22
    
1-SLei PTT00CFG.c data structure changed in order to limit wasting
       program memory location, following file also modified because
       of the changes.
       ac00cman.c ac00lib3.c ac00ptt.c ptt00def.h ringint.c

2-SLei Added ATI7 command for vendor unique information display. Affected
       file ac00cmat.c

3-SLei S91 is used for data and fax transmission level control. Affected file
       ac00ptt.c

4-SLei Assembly code modified for Configuration Utility.
       pnp.s pcmcia.s powerup.s
          
5-MRM  Changed the edge_cycle variable from ubyte to volatile.

	files affected : parallel.s serial.s eewrite.c eeread.c

6-MRM  Added the dte_check_parity_bit function in the interrupt routine
       for PB internet application.

	files affected : parallel.s
		   	
7-MRM  Update the patch code version 10E for performance.

	files affected : patch_l5.l

8-MRM  changed the logical hangup delay from 3 sec to 1 sec.

	files affected : ac00def.h

9-MRM  Added the link.par and link.ser for the link order.

	files affected : makefile link.ser link.par

10-MRM The EEprom checksum reports the 2's compliment of the actual value.

	files affected : mt_stub.c
 

===============================================================
10-2-96   
===============================================================
    
1-SLei S7 register's default value, range has been changed for Japan
       file affected: ptt00cfg.c
 	
===============================================================
10-1-96   
===============================================================
		THIS IS VERSION 3.20a

1-RAN When we try to do voice record directly from spkr phn mode 
      and conv rec is on in spkr phn mode. it is observed that
      the spkr is not on if the vls command is 5. 

      this is applicable only to the date/palm board.

	files affected : voc_ctls.c @ send_tone, after_exit_spkrphn_init_for_voice
			 vc00ex.c @ vrx_command, vtx_command.
			 vc00cpro.h		



===============================================================
9-30-96   
===============================================================
		THIS IS VERSION 3.20

1-RAN	While sending tone in voice/spkr phn mode. if we are in
	conv rec then we need to turn the conv rec off. other wise
	the dtmf digit dialed will not be heard on the speaker.

	this is ture for the DATE/PALM board.

	files affected : voc_ctls.c @ send_tone

2-RAN 	If the phone is ringing on the line and the user gives
	ath1 or at+vls=1 in voice mode we go off hook. this is not
	good. this has been fixed.
	
	Before going off hook we now chk to see if ring has gone away.
	if not we wait for that to happen. In voice mode this wait
	screws up the debounce of the local phone hook detection.
	we we need toreset the parameters in vc00ex.c

	files affected : musket.c @ set_hook_relay
			 vc00ex.c @ execute_vls_command


4-RAN We did not turn on the CD for w2 and w4 modes. 
	files affected : ac00on.c @ online_at_msg

5-RAN MSPHONE takes us off hook by giving ATX3DT;, we wait for
      dial tone this was not liked by marketing. hence now we
      check to see if ATX3DT is followed by valid DTMF if yes
      then wait for Dial tone if not execute the command immediately.

	files affected : ac00orsp.c @ init_orig_dial

6-RAN removed all function calls to the stub functions for Front Panel,
      Phone Book, and Wireless

	CHECK FOR DATE STAMP OF 9/26/96 

	files affected : For Phone book : ac00mstr.c,ac00lib3.c

			 for Front Panel: ac00as.c, ac00phon.c, ac00sta0.c
					  ac00sta1.c, ac00vc1.c, ac00vc2.c
					  ac00lib4.c, ac00mstr.c, ac00ts.c, 

			 For wireless 	: ac0mstr.c , ac00idat.c, ac00pr.c
					  ac00an.c, ac00or.c, ac00id.c, 
					  ac00hn.c ac00on.c, ac00lib3

7-RAN removed all function calls to the stub functions for v25bis

	CHECK FOR DATE STAMP OF 9/27/96 

	files affected : For Phone book : ac00mstr.c,ac00lib3.c, ac00cmex.c
					  ac00lib4.c, ac00or.c ac00an.c,
					  ac00id,c ac00pr.c, ac00on.c,
					  ac00hn.c, ac00ts.c
		

===============================================================
9-25-96   
===============================================================
		THIS IS VERSION 3.19

1-RAN Removed all the leased line stuns. ALso removed all teh 
      calls to the stubs. this was needed to free up 1.5k of
      space for the new version 8 dsp patch.
	
	chk for date stamp of 9/23/96

	files affected :
	ac00an.c, ac00id.c, ac00pr.c, ac00or.c, ac00hn.c, ac00on.c,
	ac00hn.c, ac00cmex.c, ac00rt.c, ac00mstr.c, ac00idat.c, 
	ac00lib3.c , ac00lib4.c, ac00v24.c

2-RAN New DSP patch version 8. This gives enhanced network model
      coverage and also fixes some other bugs.

	files affected : patch_l5.l			

3-RAN from the makefile removed copy of link.new to link.cmd
	files affected : makefile

4-RAN Allow ATX command to be fully implemented in voice mode.
      This is a voilation of IS101, but this is needed for 
      MSPHONE to work correctly.

	files affected : ac00orps.c @ orig_init_dial
			 ac00cmat.c @ at_x
			 musket.c

5-RAN When exiting spkr phn mode shut the spkr and the mic.
	files affected : voc_ctls.c @ end_spkr_phn_mode

6-RAN the new dsp patch does not fix the SPkr control bug
      this is now done in the controller.
	files affected : mt00hw10.c @set_speaker, set_volume

7-RAN end conv_rec if local phn picked up and also if ath or atz given
	files affected : vc00mn.c @ vce_hangup, vce_init
			 voc_ctls.c local_phn_hook_status

8-RAN moved external defs to headers
	files affected : vc00ex.c , vc00cpro.h, vc00mem.h

9-RANwhen sedning tone and in conv rec then enable the spkr.
	files affected : voc_ctls.c @ send_tone

10-RAN if exectuing spkr phn then do not resend teh spkr phn enable
       packets. 
	files affected : voc_ctls.c @ enable_spkr_phn_mode

11-RAN To work woth MSPHONE we voilate the IS101 spec again . 
       we terminate teh dtmf indication with 0x7f instead of 0x07e (~).
	files affected : vc00lib.c

12-RAN Mistakes were made when removing the calls to LED settings
	files affected : ac00mstr.c , ac00onat.c

13-RAN Make break ratio for japan was wrong 
	files affected : ptt00cfg.c
		
			 


===============================================================
9-20-96   
===============================================================
		THIS IS VERSION 3.18B

1-RAN made code reduciton changes all over acu code. main thing
      removed were calls to set and clear LEDs that we do not
      support
	
	chk to date stamp of 9/20/96.

	files affected :
	ac00mstr.c, ac00lib2.c, ac00lib3.c ac00tsrm.c, ac00hnps.c, ac00orps.c
	ac00lib4.c, ac00rt.c, ac00anps.c, ac00anvv.c ac00cmat.c, ac00cmav.c,
	ac00cp1.c, ac00fx1.c, ac00fx2.c, ac00idat.c, ac00lib1.c, ac00pra1.c,
	ac00tsa1.c ac00vc1.c, ac00vcv.c, ac00vv1.c ac00tsa1, ac00hnvv.c,
	ac00idvv.c, ac00on.c ac00onvv.c. ac00onat.c

	musket.c, mt00cust.c		

2-MRM Rename the area for the following files.

	files affected :parallel.s overmgr.s 

3-MRM changed the stack size for IRQ mode.

	files affected :rtstand.s

4-MRM changed the poll rate for dte_rx and swap the order of the DCE interrups.

	files affected :parallel.s 

5-MRM Added the link.new file for the v42bis throughput. Only two configurations
      have this change PNDB5I and SNDB5I.

	files affected :makefile link.new
 
===============================================================
9-19-96   
===============================================================
		THIS IS VERSION 3.18A

1-RAN mohammad removed some change he made. this change was affecting
      v32bis connectivity. the code would not connect with this change.
	files affected : ac00lib1.c @ get_s37_baud		


===============================================================
9-18-96   
===============================================================
			THIS IS VERSION 3.18

1-MRM Fixed the problem with at*wp and at*wd wait state settings.
	files affected : ac00cmat.c

2-MRM fixed the problem with dcd toggle when running window applications.
      pb bug #41.
	files affected : musket.c ac00hnps.c

3-RAN code reduced to take in new spkr phn code and also new patch.
	files affected : vc00ex.c @ vls_query
			 vc00prlb.c entire file is commented out
			 vc00if.c commented out vce_enable_cadence_rpt,
				  vce_rpt_ctl_casence, vce_enable_inact_timer.
			 vc00mn.c commented out vce_start
			 musket.c @set_mr_led

4-RAN New spkr phn and patch that fixes dtmf detection and retrain in
      v32bis answer mode(ato1)
	files affected : patch_l5.l, spkr_phn.c	
			 voc_ctls.c @ end_spkr_phn_mode, on exiting spkr phn
				      mode set spkr_Phn_mode to FALSE and then to TRUE
				    @dp_vce_send_tone, set patch_rednlded to 
				      FALSE. And tehn to true. there is no need
				      to rednld patch here when taking the DSP
				      out of spkr phn mode.
			 vc00ex.c set spkr_phn_mode to FALSE after end_spkr_phn
				  function is called
			 voc_ctls.c @ set_spkr_phn_mic_vol, set_spkr_phn_spkr_vol
				    we now have to poke location 46c from location b.
	

5-RAN If in voice mode and +vls=1 then voice relay is also off hook.
      when swichting to data or fax mode shut voice relya off
	files affected : ac00cmfx.c @ flcass_e

6-RAN In MS-Phone we cannot switch to fax from voice because the MS-phone
      gives commands iiliegal in IS101. to work around this we reutrn ok 
      for these commands (atQ, ATS0=)
	files affected : ac00cmat.c @ at_q, at_equal

7-RAN Conversation record feaute added. 
	files affected : voc_ctls.c @ conv_rec_vls17, exit_conv_rec_vls17
			 vc00ex.c @vls_command case 17 & case 16. before
				  executing any vls cmd chk if we were in 
				  conv rec if yes then exit.

8-RAN In voice mode we sometimes detect dtmf dialed out as dmtf digits.
	files affected : ac00orps.c @orig_init_dial

9-RAN In MS-phone we sometimes recorded at low volume. to work around this
      we will set the recv gain to +12db every time.
	files affected : voc_ctls.c in 4 palces

10-RAN local phn hook status we now hangup if the local phn is picked up.
	files affected : local_phn_hook_status.


11-RAN in voice online_command towards teh end change vce_send_tone_timer
       to 13 from 10. seems to help the intial loud porblem.

12-RAN for spkr phn we increased teh gain on the mic input to the AFE.
       This causes problem because the now the gain for voice record thru 
       mic is also increased. hence now we reduced the record level by 2 notches
       ie if set for 131 we give teh dsp the value 129.
	files affected : voc_ctls.c @ dp_vce_mic_gain			

===============================================================
9-9-96   
===============================================================
			THIS IS VERSION 3.17D


1-RAN When we end spkr phn mode before going to playback mode
	we did not chek to see if we were in spkr phn mode first
	
	files affected : vc00ex.c @vtx_command

2-RAN False DTMF detections
	files affected : patch_l5.l , new patch
			 voc_ctls.c , re dnld patch after spkt phn mode @end_spk_phn_mdoe
			 vc00ex.c , set flag to re dnld spkr phn code @ tele_emul_command

3-RAN if in voice mode and dial number turn on the voice relay after dialing
      this will enable the local phone hook detection. also set vls_cmd_value to 1
	files affected : vc00mn.c @ vce_connect

4-RAN Turn CID relay off if cid enabled and the # of rings greater than 1
	files affected : execute_vls_command	

5-RAN reduced the controller code size
	files affected : eewrite.c removed dummy routines bang_e2_eq, bang_e2_e
			 ac00cmdt.c removed bang_ee_e, bang_ee_q, bang_e1_eq, bang_e2_e
				    from the tables
			 ee00cmd.c removed all teh function in this file

6-RAN New ver of spkr phn code ver 3
	files affected : spkr_phn.c
	
===============================================================
9-8-96   
===============================================================

			THIS IS VERSION 3.17D

1-MRM fix bug #18 and #51 the problem with voice view and callerid with
      distin. ringing.
	
	files affected : callerid.c ringint.c

2-MRM fixed the problem when the automode is disabled we should connect 
      only in that specific modulation mode (mct test). This problem
      was not fully fixed.	

	files affected : ac00orps.c

3-MRM fixed the problem with dte rate S37 data connection.This problem 
      happened when going from low dte rate to hi dte rate.	
 
	files affected : ac00lib1.c



===============================================================
9-5-96   
===============================================================

			THIS IS VERSION 3.17C

1-RAN when going into voice record or playback from spkr phn mode
      make sure that spkr phn mode in dsp is turned off.

	files affected : vc00ex.c  @vrx_command, vtx_command

2-RAN when you enter voice mode do not send DLE h to reflect the
      local phone being on hook

	files affected : voc_ctls.c @ local_phn_hook_status

3-RAN if in voice mode do not start the playback for AD4 for 100ms
      This fixes the first 1 second of garbled msg of custom OGM in 
      MS Phone. also fixes non detection of DTMF during playingback
      of custom OGM. The first second loud of rcorded message has improved
      but not gone away (used to be 1 in 10 times now it is 1 in 25 times)

	files affected : vc00mn.c @ init_voice_transmit , wait_100ms_in_ad4
			 vc00mem.c def wait_100ms_timer_on				
			 vc00mem.h def wait_100ms_timer_on
			 vc00cpro.h extern defed start_fifo_timer, stop_fifo_timer
			 vc00def.h def vce state wait_100ms_in_ad4

4-MRM changed the inactivity timer variable from word to uword.

	files affected : lapm_dat.c lapm_ede.h

5-MRM added a poll rate for no flow control(mct test).

	files affected : dte.c parallel.s

6-MRM fixed the problem when the automode is disabled we should connect 
      only in that specific modulation mode (mct test).

	files affected : ac00orps.c






===============================================================
8-31-96   
===============================================================

			THIS IS VERSION 3.17B

1-MRM changed the polling rate for voice mode when we are in parallel
      mode.
	
	files affected : acu.c dte.c parallel.s

2-MRM Added the speaker phone version to the ati1 command.

	files affected : musket.c resp_cod.h

3-MRM Fixed the black listing bug for Japan, the phone numbers did 
      not get saved in the proper array.

	files affected : ac00ptt.c ptt00cfg.c
	


===============================================================
8-27-96   
===============================================================

			THIS IS VERSION 3.17A

1-MRM Added the ATH3 command for Askey but did not update the 
      SS. Askey code will not be supported by us so the files
      for Askey and Mitec are located in H:\bin\v34\cust directory.


===============================================================
8-27-96   
===============================================================

			THIS IS VERSION 3.17

1-MRM Removed the DSP NOT RESPONDING message and implemented 
      the at*fid (failed id ) command.

	files affected : ac00cmdt.c ac00cmat.c ac00pro.h mt00hw10.c

	

===============================================================
8-26-96   
===============================================================
	      
			THIS IS VERSION 3.17 & 3.16I

1-MRM The atz command cause a hang up when online data mode.

	files affected : ac00lib3.c

2-RAN Ram fixed the problem with auto detection of incomming fax.

	files affected : ac00cmfx.c
		
===============================================================
8-14-96   
===============================================================
	      
			THIS IS VERSION 3.17 & 3.16G

1-MRM Change the autobaud routine for serial mode to prevent the lockup when
      receiving charaters other than AT.

	files affected : dte_drv.c ac00pra1.c ac00idat.c

2-RAN Voice relay cannot be activated. for voice view in sys_def.h
      modem_td_relay was macroed to set_td_relay. this is dummy routine.
      we need to macro dp_vce_phone_relay to set_voice_relay
	files affected : func_mac.h, vc00cpro.h

3-RAN improvements for lin 16 bit
	files affected : vc00mn.c @ init_voice_transmit, unpack_and_send_data

4-RAN Poll mode adjusted for voice and left the same for other modes
	files affected : dte.c @ voice_dte_init
			 parallel.s @ install_poll_voice_dte_interrupt,
				      install_poll_dte_interrupt
			 acu.c @ dte_initerrupt_rx	

5-RAN Added new spkr phn code from RSA. this is version 2
		files affected : spkr_phn.c
	

===============================================================
8-14-96   
===============================================================
	      
			THIS IS VERSION 3.17 & 3.16A

1-RAN These files are the same as the ones in version 3.13.
	files affected : cp_dsp.h,
			 mt_macro.h
			 lapm_dat.c
			 lapm_ede.h

2-RAN The callerid relay is turned off in vls_exeecute_cmd.
      This is only done if +vls=1 is given after the first ring
      and cid is enabled.
	files affected : vc00ex.c @execute_vls_command

3-RAN Local phone off-hook detection is reenabled. this was
      feature was disabled in ver 3.15
	files affected : vc00mem.c,
			 vc00mem.h
			 vc00mn.c @vce_init, @vce_bg
			 voc_ctls.c @ local_phn_hook_status

4-RAN If speaker phone is terminated by ATH and ATZ then
      clear the speaker phn flags.
	files affected : vc00mn.c @vce_hangup

5-RAN When we turn the speaker off in voice mode then mute it
      instead of turning it off. this prevents pops from being heard
      on the spkr when we mute or go on hold
	files affected : voc_ctls.c @ dp_vce_speaker

6-RAN Power down mode is implemented. correctly.
	files affected : powerup.s @ goto_sleep_and_wakeup
			 sleep.c
			 ca00lib4.c @process_wait

7-RAN when in PCMCIA mode the default state of S33 should be 10.
      and zero in all other modes.
	files affected : ac00lib3.c @acu_load_defaults

8-RAN When in PCMCIA mode and card is not configured then turn the cache
      off and put the cahce rams inlow power state. also turn the 
      clock to the dsp Off so that dsp is in quasi sleep mode.	
	files affected : pcmcia.s								

9-MRM Merge the voice view code in to m317.

	files affected :dte.c 								
			dte_drv.c
			dteequ.h
			mt00fx10.c
			mt00mn10.c
			mt00cd10.c
			mt00cust.c
			mt00vv10.c
			mt00sp10.c
			mt00cd10.h
			mt00ce10.c
			musket.c
			sys02def.h
			makefile
			acumf.arm
			faxmf.arm
			v42mf.arm
			vcmf.arm
			vcvmf.arm
			mtmf.arm
			vv00cpro.h
			vv00ex.c
			vv00lib.c
			vv00mem.c
			vv00mem.h
			vv00mn.h
			vv00prlb.c
			vv00rx.c
			vv00tx.c
			vv00def.h
			cp_dsp.h
			vcvhdlc.c
			ac00cmfx.c

10-MRM Changed the IRQ assignment for PNP mode and fixed the award
       bios.
		files affected : pnp.s 
				eeread.c

11-MRM Removed the beta board download and trap function.

		files affected : powerup.s rtstand.s

12-MRM changed the dte_rx_interrupt to timer poll mode.
 
		files affected : parallel.s dte.c serial.s

13-MRM Implemented the at*wp and at*wd for wait state change via at command.

		files affected : ac00cmdt.c ac00cmat.c

14-MRM/RJM Fixed the problem with at\n2 forced mnp when the modem is in answer
	   mode.
		files affected : lineasyn.c
								
15-RAN The pokes for DTMF detection levels are removed
		files affected : voc_Ctls.c

16-RAN Keep the spkr off if ATM3 and no number is dialed.
	i.e. dial sequence is atdt; followed by atdtxxxxx
	files affected : ac00ordl.c

17-RAN report status of local phone as soon as entering voice mode
	files affected: voc_ctls.c @ local_phn_hook_status

18-RAN Removed a bunch of code. this code was dummy code that was
       just sitting there and was not bieng called.
	files affected : voc_ctls.c @ dp_vce_timer, set_frequency,
				      read_dp_vce_ram,
				      write_sp_vce_ram,
					write_byte_dp_vce_ram
					dp_vce_set_data_direction,
					dp_vce_change_voice_prams,
					dp_vce_translate_voice,
					dp_vce_pause,
					dp_vce_start_tx,
					dp_vce_dte_cts,
					dp_vce_init_speaker_vol.
			 vc00mn.c calls to dp_vce_set_data_direction,
					dp_vce_pause,dp_vce_start_tx,
					dp_vce_init_speaker_vol.
			 acu.c call to - dp_vce_timer
			 ac00vc1.c idle_voice_ring
			 vc00ex.c all +VXT command code.
			 ac00cmv1.c plus_VXT_query, plus_VXT_exec,
			 ac00cmvc.c @ plus_VDT_eq,
					plus_VDT_e,
					plus_VDT_q,
					plus_VPR_eq,
					plus_VPR_e,
					plus_VPR_q,
					plus_VPP_eq,
					plus_VPP_e,
					plus_VPP_q,

19-RAN if dialed with this sequence we got dsp not responding, atdt;, atdtxxx

	files affected : ac00orps.c @ orig_init_dial			

					
===============================================================
8-14-96   
===============================================================
	      
			THIS IS VERSION 3.16

1-MRM Change the defaults from pulse dial to tone dial and disabled
      the calling tone for Boca modem.

	files affected	: ac00tab1.c

===============================================================
8-14-96   
===============================================================
	      
			THIS IS VERSION 3.15

1-MRM Created two function stubs call for serial mode.

	files affected	: serial.s
 
===============================================================
8-6-96   
===============================================================
	      
			THIS IS VERSION 3.14

1-Shiang 1. Germany manually ATD and ATA when line already connected.
         2. Germany manually off hook pulse dialing.

	 file affected: ac00cmat.c ac00ordl.c ac00orps.c ac00ptt.c
                        ptt00cfg.c ac00mstr.c

2-RAN Could not record or playback in voice mode immediately after
      data mode connection. This is because the lapm_sync and mnp_sync
      were not set to zero after hanging up.

	files affected : ac00sys0.c @ system_reset/

3-RAN 	In vcmf.arm removed the switch -ARM7. this is needed because
	when building debug version teh command line becomes too long.

	files affected : vcmf.arm

4-RAN Our dial tone detection in playback mode is not very robust
      at the present moment. so we have decided to disable teh 
      dial tone detection in playback mode.
	
	files affected : dv02cd10.c

5-RAN Sleep mode implementation.

	files affected : powerup.h, 
			 powerup.s @ goto_sleep_and_wakeup
			 sleep.c
			 pwron_j5.c

6-RAN If caller ID is enabled and then ATA is given after teh FIrst
      ring we give a DSP not Responding. This is because teh dsp needs
      to be switched out of CID mode and into data mode. We workaround
      this problem by letting the modem display teh incomming CID and then
      go off hook on the next ring.

	files affected : ac00cmat.c @at_A
			 ac00cnps.c @ acu_answer

7-RAN serial code did not build correctly after building Parallel.
      Need to delete and rebuild ac00idat.o and powerup.o

	files affected : makefile, mak.bat

8-RAN In serial mode if echo was disabled we still displayed "a".

	files affected : ac00idat.c @ idle_chk_char

9-RAN HS Led not correctly controlled when we go online.

	files affected : ac00pra1.c @ parse_return_online
			 ac00orps.c @ acu_connect

10-RAN We did not respond correctly to retrain when in V32bis mode.

	files affected : mt00io10.c @ sample_quality, do not report bad
				      signal quality if in retrain	
			 mt00dp10.c @ check_cd, if CD is off chk modem status
				      again toensure that we are not retraining

11-RAN Sometimes we do not drop the line when rmote drops teh line thru a clear down
	
	files affected : mt00dp10.c @ check_cd, we need to install atime out
				      for the dsp tho respond to retrain.

12-RAN New spkr phone code from RSA.
	files affected : spkr_phn.c

13-RAN pokes made in dp_vce_compression_init are changed. this helps with the
       DTMF detection and DTMF rejection.

	files affected : voc_ctls.c @ dp_vce_compression_init

14-RAN The follwoing files are replaced with the files from version 3.09.
	files affected : linelink.c, lapm_dat.c, lapm_ede.h, cp_dsp.h, mt_macro.h

15-RAN In the following files we removed some the chanegs that were done in ver 3.10
       changes removed from ver 3.10 were 10,12,14 (chk below at ver 3.10 in this file)

	files affected	: vc00mn.c @vce_init, @vce_hangup, vc_bg
			  vc00ex.c @execute_vls_command
			  vc00mem.c / vc00mem.h
			  voc_ctls.c @ local_phn_hook_status, changed 
				data_mem)read_back from constant to hard coded
				value 0x15					
	


16-MRM Reduced the number of PNP combinations of IRQs for com ports.
	
	files affected	: pnp.s

17-MRM Changed the setting of the IDMS register when we are in pcmcia mode.
	
	files affected	: pcmcia.s

18-MRM changed the dte_rx_interrupt routine when sw flow control is enabled.
       (poll mode for S/W and interrupt for H/W fix for Zmodem protocol)
		
	files affected	: parallel.s parallel.h acu.c dte.c

19-MRM Created two function stubs call for serial mode.

	files affected	: serial.s
 	

===============================================================
7-24-96   
===============================================================
	
			THIS IS VERSION 3.13

1-Shiang 1.1 Germany pulse dialing use Pulse Dial relay 
         1.2 ATA and ATD command have to check line current first.
         file affected: ptt00def.h ac00ordl.c ac00cmat.c ac00ptt.c

2-MRM Fix callerid reset problem this is done due to FIQ stack overflow.

	files affected : powerup.h


===============================================================
7-24-96   
===============================================================
	
			THIS IS VERSION 3.13

1-RAN in the makefile added assembler switch for serial and parallel modes
      also removed all C6 compile optrions
	files affected : makefile

2-RAN in powerup.h added serial and parallel stich to select the GPios.
      for parallel mode gpio 12 to gpio15 should never be assigned as outputs
      these are not GPIOs in ISA/PNP mode these are address lines.

	files affected : powerup.h
											 ;		




===============================================================
7-16-96   
===============================================================
	
			THIS IS VERSION 3.12

1-MRM Fix the problem with atw4 command when in speed matching 
      mode.
	
	files affected : ac00lib4.c

2-MRM Removed the autobaud delay from the serial code.

	files affected : dte_drv.c
	
3-MRM In v21 and v23 mode we should only handshake in buffer mode.

	files affected : ac00sys1.c

4-MRM Remove the fax class 2 and 2.0 parser table from the code.
      This was done to make room for voice view.

	files affected : ac00cm20.c ac00cmf2.c

5-RAN If speaker was turned on in the data mode we did not turn all
      coresponding flags off if speaker turned off in data mode.
      turn "spkr_on" flag to false if spkr turned off in voice mode.

	files affected : voc_ctls.c @ dp_vce_speaker

6-RAN allow volume control for both speaker and microphone in speaker
      phone modes.

	files affected : vc00ex.c @ vgs_command, vgm_command
			 voc_ctls.c @ tele_emul_enable, take mic and dpkr
					control only for tele emul
				    @ end_spkr_phn_mode, clear flag 
					" executing_spkr_phn"
				    @ enable_spkr_phn, set above flag
				    @ set+spkr_phn_spkt_vol, set_spkt_phn_mic_vol
			 vc00cpro.h declare routines set_spkr_phn_spkr_vol &
					set_spkr_phn_mic_vol
			 vc00mem.h & vc00mem.c , eclare executing_spkr_phn
			 vc00mn.c @vce_hangup, clear flag executing_spkr+phn
			 cp_dsp.h define  data_mem_readback_packet as 15h

7- RAN dnld patch code onlyif internal code is built.
	
	files affected : dsp_patch

8-RAN to help with the rejection of false dtmf detection WESS sugested 
  poke 0 at cutlass data ram bank 0 location 9c and 9d.

	THESE POKES DID NOT SEEM TO HELP.

	files affected : voc_ctls.c @ dp_vce_compression_init

9-RAN got new spkr phn code from Jim Beaney this code has volume control.
      this code is also quite robust for spkr phn operation

	files affected : spkr_phn.c

10-RAN while dnlding the spkr code we have to wait a finite time between 
       every word. the wait is achieved by a for loop. the loop length reduced 
       to 20.
	
	files affected : voc_ctls.c. changed wait_time to 20

11-RAN dnld spkr phn code only once every voice session
	
	files affected : vc00ex.c @ tele_emul_command, chk was_in_spkr_phn_mode
					before dnlding
			 vc00mn.c @ vce_init, set was_in_spkr_phn_mode &
						executing_spkr_phn to FALSE

12-RAN reduce voice execution time to 50 ms from 130ms.
	files affected : ac00vc..h


===============================================================
7-16-96   
===============================================================
	
			THIS IS VERSION 3.11

1-RAN If caller id is enabled and we answer the phone after
      one ring in voice mode shut the CID relay OFF.
	Files affected : vc00ex.c @ vls_command_execute

2-RAN Set default sampling rate for voice to 8K
	Files affected : voc_ctls.c @ dp_vce_get_capability
				    @ dp_vce_init	

3-RAN Set GPIO correctly in serial for LEDs
	Files affected : musket.c @ set_ec_led
				  @ set_aa_led
				  @ set_hs_led
			 mt_gpio.h defined the LED constants
			 powerup.h defined the gpios as outputs in GP1 & GP2
			 powerup.s updated the comment to reflect the correct
				   GPIO usage

4- RAN new hard patch file from WES
	Files affected : patch_l5.l

5- MRM Changed the dsp wait state from 5 to 6.
	Files affected : powerup.h

6- MRM Fixed the ms phone at+ms= v34bs,1,0,0 & atn1 issue.(dsp not responding)
	Files affected : ac00cmat.c

7- MRM change the order of the irq for com1 and com3.
	Files affected : pnp.s

===============================================================
7-15-96   
===============================================================
		THIS IS VERSION 3.10	

1-RAN When reporting Caller ID we used to terminate each line 
      with LFCR , this is changed to terminate with CRLF.
	files affected : ringint.c

2-RAN For +VGS and +VGM commands accept the range 0-255.
	files affected : vc00ex.c @VGM_command , VGS_command

3-RAN Accept ! (flash hook) in +vts command
	files affected : vc00ex.c @vts_command
			 pr00lib.c @chk_dtmf

4-RAN If spkr phn mode enabled then go into spkr phn mode
      after dialing.
	files affected : vc00mn.c @ voice_orig_complete
			 ac00ordl.c @ originate_dial case ';'

5-RAN When executing +vsp=1 if already off-hook then enter spk
      phn mode.
	files affected : vc00ex.c @tele_emul_command

6-RAN Disable RINGBACK detection in voice mode.
	files affected : vc00mn.c @vce_connect

7-RAN we did not execute 11k sampling rate correctly
	files affected : voc_ctls.c @dp_vce_compression_init
			 changed case 11200 to 11025

8-RAN on execution of vls command enter spkr phn mode only
      if vls=7
	files affected : vc00ex.c @vls_command, towards the very end

9-RAN delay for executing voice commands changed from 20ms to 130ms
	files affected : ac00vc.h

10-RAN if callerid enabled and in voice mode, if manula answer after
       one ring then we get DSP Not Responding.
	files affected : callerid.c @ set_dsp_cid
			 vc00ex.c @ execute vls_command

11-RAN In voice mode when dialing when the modem is already off-hook
       wait 2 seconds before dialing the first time. after that do not
       wait 2 sec again till we hangup.
	files affected : ac00orps.c @ orig_init_dial
			 musket.c @ set_hook_relay

12-RAN Local phone off-hook detection
	files affected : voc_ctls.c @vce_local_phn_hook_status
			 vc00mn.c @vce_bg, uncommented call to above routine
			 vc00mem.c & vc00mem.h redifined dle_h_sent and dle_H_sent

13-RAN If in speaker phn mode to shut mic or speaker need to turn off in AFE2
	files affected : voc_ctls.c @ dp_vce_speaker, dp_vce_mcirophone

14-RAN Hangup speaker phone mode when hangup using DTR toggle or ath or atz
	files affected : vc00mn.c @ vce_hangup, vce_init

15-RAN included files from SHIANG for call progress issues
	files affected : ac00ptt.c & ptt00cfg.c

   15.1 BUSY issue 1:
        The lower out level affected the calculation of glitch from calling tone.
 	initialize the tempp1 variable fix the problem.

   15.2 BUSY issue 2:
        The PBX after serveral ring back cadence, it assert a different cadence,
        the cadence is in the BUSY signal range. So firmware respond with an
        unexpected BUSY signal.
        To fix it, a new counter counts BUSY signal, it reports BUSY when the 
        counter is greater than 1.

   15.3 S91 trasmmision level implemented for Japan.

   15.4 Incorrect S91? after issue an S91=?? command.

   15.5 +vdr=1 cause a illegal reports on the screen has been taken away.

   15.6 at*nc command initialize country dependent registers only.

16-RAN included files from MOHAMMAD to ignore CP_WAIT 
	files affected: powerup.s & powerup.h

17-RAN files from MOHAMMAD to adde atw4 command and V42 connection
       at lower speeds bug.
       The new command atw4 will display the connect messages in a sperate 
       line so it is easier for the win95 INF file to detect the connect speed.
       RJM fixed the v42 connection with low speed cutlass to cutlass.	
		
	files affected : ac00onat.c
			 ac00lib4.c
			 ac00tsa1.c
			 ac00cmat.c
			 ac00tab0.c
			 dte.c
			 lapm_dat.c
			 lapn_ede.h
			 ac00hnps.c
			 linelink.c
			 mt_macro.h
			 cp_dsp.h




===============================================================
6-27-96   
===============================================================
		This is Version 3.09

1-MRM Change the polling time to improve the throughput in parallel
      and serial modes.
		
	affected file : parallel.s powerup.h acu.c lineint.c linelapm.c
			serial.s

2-MRM fix the bug #116; atw2x0 string did not display the connect message.

	affected file : ac00lib4.c dte.c


===============================================================
6-27-96   
===============================================================
1-SLei Put Turn off Tone Mode detection in the ACU_CONNECT.

	affected file : ac00orps.c


===============================================================
6-27-96   
===============================================================

1-RAN Cannot detect ring in voice mode
	files affected : vc00def.h defed init_vip as 5

2-RAN We should enable clear down only for data mode
	files affected : ac00hnps.c @ hangup_at_physical

3-RAN Speaker phone work around. This work around is to make the
	entry and exit out of the spkr phn mode to data mode.
	files affected : ac00vc2.c 
			 ac00cmfx.c @fclass_e
			 vc00ex.c @tel_emul_command set flag

4-RAN allow dialing in voice when off-hook and allow dialing using atdt;
	files affected : ac00orps.c @orig_init_dial
			 ac00cmat.c @ at_d

5-RAN Comment out spkr phn dnld verification messages
	files affected : voc_ctls.c

6-RAN Send the First DLE-U on entering playback mode after 500ms
	files affected : vc00mn.c @ init_voice_transmit, transmit_delay_sending,
					vce_timer

7-RAN If no answer stay in voice mode alsoif dialing aborted by keystroke
	stay in voice mode.
	files affected : ac00vc1.c @ orig_voice_bg case ahndshaking
			 ac00vc.h declared a bunch of stuff check for
				  date stamp of 6/27/96
			 vc00def.h declared a bunch of stuff check date stamp 6/27/96
			 vc00mn.c @vce_connect, @ dial_failed ,@ dialed_failed
			 ac00orat.c @ kb_abort

8-RAN updated all the makefile file and all the *.arm files to add teh -zps1
	switch this switch does not do stack limit checking makes teh code
	more efficient, and reduces code size


9-RAN If in voice mode accept ATX command. this is a work around for MSPHONE
	files affected : ac00cmat.c @at_X

10-RAN For ATI commands if not in range return OK instead of ERROR
	files affected : ac00cmat.c @at_I

11-RAN For the \T command accept both at\t(value) and also at\t=(vaule)
	this is needed for the MSPHONE software.
	files affected : ac00cmex.c @ sl_T and sl_T_eq
			 ac00cmdt.c in table added sl_T_eq before sl_T
			 ac00pro.h

===============================================================
6-26-96   
===============================================================

1-SHD        PCMCIA
   updated io\pcmcia.s, tested on pcmcia board, at&t1 worked on
   33.6 kbps.

===============================================================
6-25-96
===============================================================
 
Shiang made following change:

1. AT command *NC? to set country code became the command that terminated
   the command line, unless the ";" after the *NC command.
   
   affected file: ac00cmdt.c

2. The *NC? command only allowed when the Default_Country set to 0xFF in the
   PTT00DEF.h 
 
   affected file: ac00ptt.c

3. ATZ command modified so that the Default_Country is set to 0xFF, the country
   code will read from the NVRAM. Otherwise don't.

   affected file: ac00cmat.c

4. Rearrange the data sequence so that the Data to be changed by CONFIGURATION
   UTILITY are clustered together.

   affected file: ptt00cfg.c

5. ATi4 display 0 and OK

   affected file: resp_cod.h


===============================================================
6-21-96
===============================================================
 
	This is Version 3.07

1-RAN FOR speaker phone 
	files affected : dsppatch.c, spkr_phn.c voc_ctls.c

2-RAN For hard patch for the dsp bug fixes
	files affected : dsppatch.c patch_l5.l, pwron_j5.c
3-RAN The request of line quality form the DSP by the Controller
	is now schedule at every 100ms.
	files affected : mt00dp10.c
4-RAN If you gave ATL2 command after ath1 the volume went up. this is 
	as if teh default is ATl1
	files affected : mt00hw10.c
5-RAN If remote initiated teh retrain then we dropped the line
	before the retrain was completed
	files affected : mt00dp10.c 
6-RAN IN voice mode if we dialed using atdt123; then we coild not 
	record or playback. now the appropriate flags are set
	so that this can be done
	files affected : ac00ordl.c @ orig_dial
7-RAN If we exited ALB and then gave atz we terminated the ALB
	but did not give OK
	files affected : ac00cmat.c @at_z if(test_mode)
8-RAN we do not send clear down in all the modes ie atz, ath and
	dtr toggle. clear down is sent only in buffer mode

	files affected : ac00def.h, define voice_init_at_f as 1
			 ac00vc2.c @initialize_voice dont send 
				   modem_init unless in idle and
				   do build_event inly if voice_init_at_f
			 ac00lib3.c in acu_load_defaults call initialize_voice
				    using type variable
			 vc00mn.c in vce_init chk hook only if Init_vip
			 ac00hnps.c in hangup_at_physical enable_cleardown if
					\n0 or \n1
			 ac00cmat.c @at_z set operating_mode to slN variable
			 mt00mn10.c @ return_to_idle




===============================================================
6-21-96
===============================================================
 		THIS IS VERSION 3.06

Shiang Lei made following change:

1. Modified v42 and vv, overlay data memory location to FF2c00.

   affected file: ovlymap.v42  ovlymap.v42
2. Modified version number in the RESP_COD.h to 3.06

   affected file: resp_cod.h


===============================================================
6-20-96
===============================================================
 		THIS IS VERSION 3.06
Shiang Lei made following change:

1. Called station need to initiate transmission level also.

   affected file: ac00anps.c
2. Japan's transmission level set to -15.0dBm default for both transmission
   and receiving.

   affected file: ptt00cfg.c

===============================================================
6-20-96
===============================================================
 		THIS IS VERSION 3.05

Shiang Lei made following change:

1. Add one error code in the ac00tab0.c - DELAYED CALL, error code is 0x15;

   affected file: ac00tab0.c, ac00def.h
2. Add one new command *NC to select different country configuration;

   affected file: ac00pro.h, ac00cmdt.c
3. Change +VDR command, 0: maintain original; 1:display distiction ring and
   Ring back Tone's cadence; 2: Display ring back message; 3: do both 1 and 2
   functions;

   affected file ac00cmvc.c
4. Add one location in the NVRAM to store the country code.

   affected file: eeoodef.h  
5. Initialize CountryInfo during acu_init;

   affected file: ac00mstr.c
6. Tone mode detection used for dial tone, ring back tone, and busy tone detection
   Replace the result from modem_call_progress(). 
   
   affected file: ac00ordl.c ac00orps.c
7. Black list implemented;
     
   affected file: ac00ordl.c ac00orps.c
8. Add i6 command -- display country information;
   AT_Z initialize country info from NVRAM ;
   AT_S command add country depended S register;

   affected file: ac00cmat.c
9. acu_init use country depend's array instead of constant.
   
   affected file: ac00lib3.c
10.makefile modified, it will include acu\ac00ptt.c acu\ptt00def.h and ptt00cfg.c

   affected file: makefile
11.public  read_dsp_xmit_status_reg(void) from mt00io10.c for ToneModeDetection();

   affected file: mt_ctls1\mt00io10.c
12.added ToneModeDetection(), and UpdateBlackListDelayTimer() in the acu.c

   affected file: io\acu.c

  
===============================================================
6-5-96
===============================================================

1-RAN fixed bug that generated DTMF B as DTMF 5 when using the 
	+VTS command
	files affected : voc_ctls.c @ send_dtmf_tone case 'b"



===============================================================
5-30-96
===============================================================

 		THIS IS VERSION 3.04

1-RAN The speaker does not turn on. THis is because the AFE2 is not
	innitialized properly. and also that the SPK/HS gpio is switched
	to the HS mode instead of speaker.

	files affected : dsppatch.c @ after Bcon poke, poke the AFE2
				to right values.
			 Musket.c @ spk_hs_relay. turn on only in voice mode.





===============================================================
5-30-96
===============================================================
 		THIS IS VERSION 3.03
1-RAN Changed the default to 33.6Kbps
	files affected : ac00lib3.c @ acu_load_deafaults, acu_init

2-RAN Disable 3429 only for C6 code.
	files affected : ac00cmat.c @at_d and at_a

3-RAN If in spkr phone mode or tele emul mode do not enable call prog
	files affected : vc00mn.c @ dp_vce_call_progress

4-RAN DO not download DSP patch
	files affected : dsppatch.c @ after BCON poke

5-RAN Speaker phone enabled
	files affected : vc00ex.c @ tele_emul_command, at the end of +VLS_comm_exe
			 vc00cpro.h , vc00def.h defed enable_spkr_phn
			 voc_ctls.c @enable_spkr_phn,send_tone,send_dtmf
6-RAN LIn 16 bit compression scheme 
	files affected: vc00mn.c @ unpack_and_send_data, pack_data_and_send

7-RAN Software flow control in voice
	files affected : vc00mn.c @ vce_mod_term_fctrl, vce_term_mod_fctrl,
				    vce_configure
8-RAN New patch for J5 and C6 and also for poweron
	files affected : patch_l5.l,patch_l6.l,pwron_c6.c,pwron_j5.c


===============================================================
5-17-96
===============================================================
 		THIS IS VERSION 3.02
1-MRM RJM fix for esc seq. lockup problem.
      files affected: sys02def.h acu.c dte.c

2-MRM Added the autobaud disable function in serial mode lockup problem
      when using zmodem for binary file transfer.
      files affected: dte_drv.c dte_drv.h
	 	

===============================================================
5-17-96
===============================================================
 		THIS IS VERSION 3.02

1-SHD  added codes to work around the problem "ring interrupt bounce".
       files affected:
           powerup.s: set ring int in "both edge" mode;
           ringint.c: add software flip flop in validating ring routine.

===============================================================
5-14-96
===============================================================
 		THIS IS VERSION 3.02

1-MRM Added the changes for the musket2 debugger.
      files affected: level0.s level0_h.s driver.s makefile powerup.s

2-MRM changed the usermode stack pointer location for debug mode. Added 
      an assembly switch for none debug modes.
 
      files affected: makefile rtstand.s



Note: The new debugger starts at 0h and 7a000H. Please change 
      the starting address from 60000h to 7a000h in the musket
      script file. The new musket2.bin is available in the 
      source safe under musket\demon\pie directory.
		 

    
===============================================================
5-13-96
===============================================================
 		THIS IS VERSION 3.01

1-SHD add pcmcia.s for pcmcia 
      files affected: pcmcia.s 

2-JT  temp disable voiceview +fclass=80 capability quary
      files affected: ac00cmfx.c
  
===============================================================
5-13-96
===============================================================
 		THIS IS VERSION 3.00

1-SHD add codes for plug and play - pnp
      files affected: powerup.s, powerup.h, parallel.s, pnp.s
                      eewrite.c eeread.c

2-SHD implemented for sleep mode
      default sleep timer reg is s33, default is 0 (disable);
      files affected: ac00lib3.c, ac00lib4.c, sleep.c, sleep_if.h

3-SHD fixed the bug for s33 set and display
      files affected: ac00cmat.c, ac00tab1.c

4-SHD fixed bug for pulse dialing, cadency error from 13% to < 1%
      files affected: ac00mstr.c, ac00lib2.c, ac00ordl.c

5-SHD add codes for pcmcia, but pcmcia itself has not tested yet!
      files added: io\pcmcia.s
      files affected: powerup.s, makefile

6-SHK  for serial mode
      makefile:  added pnp.o and pcmcia.o
      serial.s:  changed timer1 constant to 4*6 for speed up NVRAM access

===============================================================
5-08-96
===============================================================
 		THIS IS VERSION 3.00

THIS IS THE FIRST VERSION THAT WORKS WITH THE NEW MUSKET REV - BD

This code version onwards the code will not work the earlier version
of musket.
 
1-RAN Disables 3429baud rate so that the dsp can run at 33MHZ.
      Also disabled the tap display in the dsp code for the same
      reason.

      files affected : ac00cmat.c @ at_A, at_d 
		       mt00mn10.c @ mt_bg case orig & case ans,
				  disable_tap_display
		       cp_dsp.h and mt_macro.h - peek and poke macros
		       makefile, acumf.arm and mtmf.arm.	

2-RAN POweron patch for c6 and j5 dsp so that the code can run
	lower clock than 36 Mhz.

	files affected : dspatch.c,voc_ctls.c, vc00cpro.h, func_mac.h
			 powerup.s, powerup.h - 7 wait states if using
						poweronpatch
			 pwron_j5.c, pwron_j5.c, makefile
			
3-RAN dsp_reset and dsp_cfg polarity is reversed
	files affected : musket.c

4-RAN ati5 does not show serial /parallel modes
	files affected : ac00cmat.c @ati5

5-RAN distinguish internal and external dsp code execution
	files affected : dsppatch.c ac00cmat.c, int_dspc.h, ext_dspc.h
			 resp_cod.h, makefile

6-RAN The poweron patch download and the 3429 disabling was done onlywhen 
	executing the internal DSP code.

	files affected : dsppatch.c, ac00cmat.c

7-RAN updated makefile so that mak.bat is o longer needed

	files affected : makefile, acumf.arm, mtmfm.arm
			removed mak.bat

8-MRM Added the interrupt service routine changes for the 
      new musket(clearing interrupt). Implemented the nested
      interrupt for serial and parallel modes. used the internal
      stack space.		

	files affected : parallel.h parallel.s serial.s serial.h
			 rtstand.s

9-MRM system timers are using the same value for serial and parallel mode.
      removed the compile switch for timers from ac00lib2.c and ac00mstr.c
      files.

	files affected : parallel.s serial.s ac00mstr.c ac00lib2.c
	
10-MRM when in seial autobaud mode the echo is limited to only valid at 
       command characters.

	files affected : ac00idat.c 

11-MRM Added a work around when in serial autobaud mode.

	files affected : dte_drv.c

12-MRM changed EIA mask values in serial mode for the new musket.

	files affected : dte_drv.h
	   
13-MRM Populated the set_dte_cts function  in order to update the EIA signals
 
	files affected : musket.c

14-MRM Changed the data memory wait state from zero to one.
  
	files affected : powerup.h

===============================================================
5-02-96
===============================================================
 		THIS IS VERSION 2.34
 
1-TCY  Fixed TIES bug: After online, escape once and 
        remote side drops, it locks up.

2-TCY  Fixed TIES bug: After online, escape once and 
        drop DTR, it sends multiple messages for next auto
        answer.

3-TCY  Changed to ignore LF for the first AT command after +++.

4-TCY  Changed to execute &Q and &M when in online command mode.

	files affected : acu.c dte.c

5-MRM  Fix the V8 handshaking problem with GVC/Rockwell modem.

	files affected : linev8.c

6-JT  fix serial mode wait_all_sent rtn.

	files affected : acu.c dte_drv.c dte_drv.h
 
===============================================================
4-19-96
===============================================================
 		THIS IS VERSION 2.33
 
1-TCY  Fixed TIES bug: After online, escape once and 
        remote side drops, parser stays in TIES command
        parser.

2-TCY  Added BACKSPACE for the first AT command after +++,
        back up to AT.

	files affected : acu.c dte.c

===============================================================
4-19-96
===============================================================
 		THIS IS VERSION 2.32
 
1-TCY  Updated TIES as default.

	files affected : sys02def.h ac00cmat.c ac00cmdt.c 
			 ac00hnat.c acu.c dte.c

2-RAN undid ITEM 1 given below

===============================================================
4-18-96
===============================================================
 
1-RAN  Updated powerup.s. on powerup we need to set dsp_cfg gpio
	to 0 this is needed for spkr phn dnld.

2-RAN the fix for exiting voice after atz (item 15 below in ver 2.31)
	created another problem with ALB. this fixes it.

	files affected : ac00vc2.c @initialize_voice


===============================================================
4-17-96
===============================================================
 		THIS IS VERSION 2.31
1-SHD  reduce code size 
       files: eewrite.c eeread.c ringint.c, eeprom.h

===============================================================
4-16-96
===============================================================
 		THIS IS VERSION 2.31

1-SHD  update codes for NVRAM access, speed may increase upto 10 times
       files: ee00def.h, ac00cmat.c, ac00pro.h, ac00cmdt.c
              eeprom.h,  parallel.s, makefile;
              eeread.c, eewrite.c are new,
       removed: io\input.c, output.c

2-SHD  fixed bug 12, at&z
       files: ac00cmaw.c, ac00cmav.c

3-SHD  fixed bug 72, Distinctive ring for at+vdr=1,0 not report ring
       files: ac00idat.c, ac00lib4.c, ac00lib3.c

4-SHD  fixed bug 79, no callerid in atv0 case
       files: callerid.c, callerid.h, ringint.c, 
              ac00tab0.c, ac00lib4.c, ac00def.h, ac00vc1.c

5-SHD  fixed bug 81, greeting message is blocked if caller-id enabled
       file: ringint.c    

6-RAN Code to download the speaker phone code added
	
	files affected : vc00cpro.h - ex defed dnld_spk_phn_code,dsp_reset,
					dsp_cfg.
			 vc00ex.c - @ tele_emul_command, vls_command, vrx_command,
				    vtx_command, vgm_command, vgs_command, voice_cmd_init
			 func_mac.h - macroed spk_phn_array to dsp_code
			 vc00def.h - defed err_msg, 
			 voc_ctls.c - added spk_phn_dnld, modifed tel_emul_enable
			 mt_stub - added dsp_reset and dsp_cfg
			 vcmf.arm - modefied to inlcude sp_s039 module of spkr phn code
		added sp_s329.c to the source save

7-RAN now we donot get DSP not responding if multiple tones are generated.

   BUG NUmber :74
     
	we got DSP not respondign because the dsp detected the dtmf generated
	 and issued us the dtmf packet, we did not clear this and hence when we 
	 sent the next packet we got dsp not responding.

	voc_ctls.c @ dp_vce_send_tone, dp_vce_send_dtmf_tone


8-RAN when exiting voice mode thru FLCASS=0 set the dsp call prog correctly.
    
    BUg Number : 108
	files affexted : ac00cmfx.c @fclass_e

9-RAN Send only DLE-R for ring 

    BUg Number : 100
	files affected : vc00lib.c and ac00vc1.c

10-RAN NOw we can generate tones for as low a 50 ms.

	files affected : vc00ex.c@vtd_command, vts_command, 
			 vc00def.h

11- RAN Do not issue caller ID packet when in voice record or playback modes

	bug ID 110

	files affected : ringint.c

12-RAN S1 register update during ring

     Bug Number : 115

	files affected : vc00lib.c @ring_dectect_off
			vc00mem.c/vc00mem.h declare ring_away_timer
			vc00mn.c - update ring_awaY-timer

13-RAN changes to the modem TASK for relay controls
	these changes were made because ROb miller cahnged the method
	of controlling relays.

	files affected : mt_stub.c, musket.c, mt_gpio.h

14-MRM Fix the problem with the HLSR reg when performing a read modify 
       write of TEMT bit. The new code will set TEMT bit if the Transmit
       Holding Reg Empty bit is 1.

	files affected : Parallel.s

14-RAN &T commands are valid only in the data mode

	Bug ID =111

	files affected : ac00cmts.c @allow_test_command

15-RAN following command sequence gives error
	AT+Fclass=8,+vls=1,atz,at&f gives error

	bug id =75
	files affected : ac00vc2.c

16-RAN changed dte.c and acu.c for the +fpr command

	files affected : dte.c @ dte_reconfigure
			 acu.c @ acu_set_tx_buad and @ get_autobaud_rate

17-MRM Fix the Software flow control in fax mode. The controller 
       did not work with win fax application software.

	files affected : dte.c, dte_drv.c, ac00fx1.c 


===============================================================
4-15-96
===============================================================
 		THIS IS VERSION 2.30
1-SHD  fixed bug 5 (reported on 3/27/96) => 
       +GMI?,+GMR?,+GMM?,+GMGR?,+FMDL?,+FREV?
       files: ac00cmvc.c, ac00cmfx.c, ac00cmf2.c

2-SHD  fixed bug 98 (3/27/96) => at+ms? didn't display v34B
       files: ac00cmat.c, v34_rate.h

3-SHD  fixed bug 96 (3/27/96) => at\N5 
       file: ac00cmex.c

4-SHD  fixed bug 32 (3/27/96) => &Q0, &M0
       file: ac00cman.c


===============================================================
4-09-96
===============================================================
 		THIS IS VERSION 2.29

1-RAN makefile was changed added the copying of vcv_cpro.h,vcv_mem.h,
	ee_def.h. added dependencies for musket.c. enabled the vcv 
	compling and linking.

2-RAN changed proto-type for vcv_line_init
	files : vcvlink.c , vv00mn.c

3-RAN removed all calls to outchar. this was added by rob miller for
	debugging only
	files : mt00sp10.c, mt00vv10.c

4-RJM changed ac00cmfx.c to re-enable VView as it was #if 0 out.

5-RJM changed ac00cmvv.h include latest VView protypes.

6-RJM changed mt00cust.c to move call_progress() to musket.c so
      as not to conflict with Host Beased modem in ring detection.

7-RJM changed mt00dp10.c. mt00rt20.c and musket.c so as not to
      utilize direct COMMRAM access.

8-RJM changed mt00dp10.c, musket.c and mt00cust.c to increase the
      maximum number of bytes that are stored in the DSP response 
      packet.

9-RJM changed mt00cust.c mt_init() routine to initialize the audio
      interface used for VView.

10-RJM changed musket.c to include new GPIO types of functions.

11-RJM changed mtmf.arm and acumf.arm so as to include the correct
       directory name to the modem task on the compilers command 
       line.

12-RJM Corrected a number of DSP Packet ID's in cp_dsp.h.

13-RAN The makefile was modified so that we can compile with and without
	voice view options. the make options as in the old makefile will compile
	the code with voice view. if uou give the "-v" option then it compiles
	the code without the voice view option.

	the ovlymap was removed from the source save. now this will be copied
	from either ovlymap.vv (if voiceview present) or ovlymap.v42 (if VV not there)


	files affected : makefile, ovlymap, ovlymap.v42, ovlymap.vv

14-RAN dummy routines needed to stub out voiceview

	files affected : ac00vvst.c

===============================================================
4-01-96
===============================================================
 		THIS IS VERSION 2.28
1.MRM Added the CUTLASS_J5 and CUTLASS_C6 switch for patch and poke
      command.

	files affected : ac00orps.c ac00anps.c ac00tsa.c patch_l5.l
			 patch_l6.l
2-RAN changed the makefile and the mak.bat files to make the switch
	between J5 and C6 code
			
===============================================================
3-28-96
===============================================================
 		THIS IS VERSION 2.27
1. JT modify at!c command to handle poke dsp packet

	files affected : ac00cmat.c

2-RAN IN 2.26 we had problem with blind dial and in fax mode etc.
	this is because of change made in ac00vc2.c @ initialize_voice
	these changes were undone. the change undone is 9 of 2.25 below.

3-MRM Added the patch capability via poke command.
	
	files affected : dsppatch.c makefile patch_l.c pat2c.exe

4-MRM changed the timeout value for the ath when at\n0 is enabled.

	files affected : ac00def.h

5-MRM Fix the problem with the v34bis init value.
	
	files affected : ac00lib3.c

6-MRM Poke the tx level before modem_connect packet for originate and 
      answer modes. Also changed the tx level in alb mode.

	files affected : ac00orps.c ac00anps.c

7-MRM Changed modem_mode and modem_rate in answer and originate	mode if
      not in v34 mode.	  
	
	files affected : ac00orps.c ac00anps.c

	

===============================================================
3-20-96
===============================================================
 		THIS IS VERSION 2.26
1-MRM Fix the problem with ath command. If modem status reg show retrain
      instead dropping the modem init does not get executed.

	files affected : ac00hnps.c

2-MRM Changed the echo protect tone to on for v17 mode.

	files affected : mt00fx10.c
 		
3-MRM Added AT-C2 option to the -C command and enabled the calling tone
      for the default mode.

	files affected : mt00v834.c, ac00cmex.c, ac00tab1.c, ac00orps.c

4-RAN Send the tone generated by +vts for the corrrect duration
	files affected : ac00lib4.c @ process_acu_timer
			 voc_ctls.c @ send_tone, send_dtmf_tone
			 vc00mem.c / vc00mem.h

5-RAN Busy detection in record mode
	files affected : dv02cd10.c @ record mode table


 
===============================================================
3-19-96
===============================================================
 		THIS IS VERSION 2.25

1-RAN	+vgm, +vgs, #vsps commands added
	files affected : vc00def.h, voc_ctls.c, vc00mem.h, vc00mem.c
			 vc00ex.c, ac00cmv1.c ac00vc.h, vc00cpro.h

2-RAN +vts command is functional
	files affected : voc_icd.h, voc_ctls.c, vc00mem.h, vc00ex.c
			 vc00de.h
3-RAN if remote is fixed at a low speed we would continue to try and
	reneg to a better level. this was fixed. if after reneg the 
	speed is same as before reneg then we do not reneg any more
	for that connection.
		files affected : mt00rt10.c @ tlq_mse_good, tlq_mse_poor_invalid
				 mt00mn10.c @ mt_bg case drop1
4-RAN clear down implemented
	files affected : mt00mn10 @ mt_drop
			 mt00rt10.c @ retrain_processor
5-RAN anstone detection
	files affected : voc_ctls @dp_vce_call_progress
			 vc00pro.h & vc00def.h

6-RAN DLE -CAN lock up fixed
	files affected : vc00mn.c @ case CAN:

7-RAN ringback away was reported erroneously. we now wait 7secs before
	reporting rb away if the time thru+vra cmd is less than 7secs
	files affected : vc00mn.c @ wait_for_1st_rb, wait_for_rb_away

8-RAN report DLE-s
	files affected : vc00lib.c @ call_progress case 'q':

9-RAN if exit voice mode via atz were not setting the all the data
	mode flags correctly.
	files affected : ac00vc2.c



===============================================================
3-19-96
===============================================================
                THIS IS VERSION 2.24

1-JT  modify current cmd lenth to 40 and response lenth to 20 for
      !c command to access patch/ peek and poke.
        files affected :  ac00cmat.c

2-TY  Added TIES as default ( can be changed to HAYES by complier
      switch).
        files affected :  sys02def.h ac00cmat.c ac00cmdt.c ac00hnat.c
                          acu.c dte.c

===============================================================
3-18-96
===============================================================
		THIS IS VERSION 2.23

1-JT  add !c command for direct access to comram
	files affected : ac00cmdt.c, ac00cmat.c, ac00pro.h and cp_dsp.h

2-JT  fix DTMF dialing w/ *,#,A,B,C,D problem
	files affected : mt00cust.c

===============================================================
3-13-96
===============================================================
		THIS IS VERSION 2.22


1-RAN If off hook while entering voice mode set all the parameters
	such that +vls=1 already executed. (BUG # 38)
	files affected : vc00mn.c @ vce_init

2-RAN	There is long delay for response after giving ATH & was off hook
	in voice mode.

	files affected : ac00cmfx.c @fclass_e, set on_line_command = 0

3-RAN 	ATA gives error after exiting voice mode. (BUG # 57)

	files affected : ac00cmfx.c @ fclass_e , turn speake on and the above
				fix

4-RAN 	modem takes more than 150ms to execute voice command and give
	a response. the time reduced to 20ms. ( BUG # 58)

	files affected : ac00cmfx.c @ fclass_e, set delay_to_exec back to
				ACU_EXEC_DELAY
			 ac00vc1.c @ orig_voice_hangup & online_voice_hangup
				set delay_to_exec back to ACU_EXEC_DELAY
			 ac00vc2.c @ initialize_voice, set delay_to_exec to
				VOICE_EXEC_DELAY
			 ac00vc.h defed constant VOICE_ACU_DELAY


5-MRM  Disabled the at\n1 from the at command set. By typing at\n1 the parser
       automaticly sets the value to \n0. (BUG #54,#56)

	files affected : ac00cmex.c

6-MRM  Disabled the echo protect tone in V17 and V29 Fax mode and enabled it
       in V27TER mode (4800 & 2400 speeds). (BUG #47)

	files affected : ac00fx10.c


7-MRM  Fix the parity problem in online command mode and updated the S23 value.
       (BUG #7)

	files affected : ac00onat.c, ac00pra1.c, dte_drv.c

8-MRM  Fix the V23 connection problem. The user should type atb2 or atb3 in
       order to make v23 orig or answer connection.(BUG #55)

	files affected : ac00lib1.c, ac00mn10.c

9-MRM  Fix the at+ms command in v34B and v34bs mode. By Typing at+ms=v34(B)or(BS),
       1,0,0 the modem should connect up to 33600 dce speed.

	files affected : ac00lib3.c, ac00lib1.c, ac00cmat.c

10-MRM Added the BELL103 and BELL212 to the connect message. This also fixed
       the ALB in v22 mode problem. (BUG #44)

	files affected : ac00lib4.c, v34_rate.h


===============================================================
3-11-96
===============================================================
		THIS IS VERSION 2.21
1-MRM Makefile was modified for debug version of serial and parallel
      mode.

	file affected:  makefile

2-RJM/MRM The new mnp5 is not compatiable with the Rockwell and
	  USR. Rob ask us to use the old mnp_af.c file for now.
	  By using the old mnp_af.c we do not have any Zero init
	  data.

	file affected:  mnp_af.c, ovlymap

3-MRM Fix ALB problem in v32 bis mode when using at+ms=v32b,1,0,0.

	file affected:	ac00lib1.c


4-RAN fix problem that we get dsp not responding after exiting voice
	mode. the prolem occurs because the dsp is still in voice
	mode and sends the dtmf digit packet and will not respond
	till this is picked up. the acu code does not pick this packet
	and this leads to the lock up.

	file affected : ac00cmfx @ fclass_e
			vc00ex.c @execute_vls_command, set variable hook,
				acu looks at this for hangup.

5-RAN DTMF detection in the record mode of voice. removed the reporitng
	delay for dtmf.
	file affected : vc00lib.c @call_progress

6-RAN Silence detction in voice record mode.

	files affected : voc_ctls.c @dp_vce_compression_init, turn silence
				detection on only for record mode.
			vc00mn.c @process_voice_receive, commented out check for
				silence detection
			vc00lib.c @call_progress, added silence to teh dection
				table

7-RAN calling tone detection
	in vc00def.h reduced the reporting delay for these tones.


8-RAN On powerup give hard reset to cutlass and also write 0 to CP_CONTROL_REG
	this is needed for the J5 parts and also the half card design.

	files affected : powerup.s and powerup.h


===============================================================
3-10-96
===============================================================
		THIS IS VERSION 2.20

1-MRM Added a check for V34 and v32bis mode in reneg routine.

	file affected:  mt00rt10.c

===============================================================
3-10-96
===============================================================
1-MRM Added a stub parity function for serial mode.

	file affected:  dte_drv.c, serial.s

2-MRM Changed the overlay map to start from 0xff2900 of the data
      memory.

	file affected:  ovlymap

===============================================================
3-9-96
===============================================================

1-MRM MNP message didnot display in ATW3 mode.

	file affected:  ac00tab0.c


===============================================================
3-9-96
===============================================================
1-MRM Added the overlay for mnp5 and lapm.

	file affected:	makefile,overmgr.s,ovlymap

2-MRM Made the data packet array global

	file affected:	lineasyn.c

===============================================================
3-9-96
===============================================================
1-MRM  Implement the 7 bit odd and 7 bit even parity.

	file affected:	ac00orps.c, parallel.s, dte_drv.c, dte_drv.h,
			ac00lib3.c, acu.c

2-MRM  Fix the ATZ problem in online mode.

	file affected:	ac00cmat.c

3-MRM  Added the default value for +ms min speed.

	file affected: ac00lib3.c

4-MRM  Added the v34 symm. and asymm. rate to +ms command.

	file affected:	ac00cmat.c, ac00def.h

5-MRM  Added 33600 and 31200 speeds to +ms command and connect message.

	file affected:	ac00lib1.c, ac00lib4.c, ac00tab0.c, ac00tab1.c
			mt00v834.c, v34_rate.h, ac00def.h

6-SHD  Add at+ms?, at!p?, at!p=? and at!p= commands.
        file affected: ac00pro.h, ac00cmdt.c, ac00cmat.c. 

7-RJM  Fix the lockup problem with v42.

        file affected: linesync.c, linelapm.c, faxhdlc.c, vcvhdlc.c 

===============================================================
3-8-96
===============================================================
1-RAN added support for auto retrain and auto renegotiate
	files affected : mt00rt10.c 
			@ test_line_quality, tlq_mse_poor_invalid, mt_retrain,
			  mt_renegotiate, retrain_processor
			mt_macro.h,cp_dsp.h
			@ mt_renegotiate macro.
			mt00io10.c
			@ sample_quality

2-RAN if s10 is 255 then disable auto disconnect
	files affected : mt00dp10.c @ check_cd
			 mt00rt10.c @ retrain_processor
			 ac00lib4.c @ check_modem_status
			 		

===============================================================
3-7-96
===============================================================
1. SHD  implement caller id
        MDMF and SDMF (multiple/single data mesg format from switch),
        formatted and unformatted report to DTE;
        file new: io\callerid.c, callerid.h
        file affected: makefile, ringint.c, ac00tab0.c, ac00def.h, 
                       ac00lib4.c, mt_macro.h

===============================================================
3-6-96
===============================================================
1-RAN/MRM The CD was not reported by the controller and the modem 
	would drop the call.
	
	file affected:	mt00dp10.c
2-MRM In v42bis mode there was a hangup due to bad procedure a patch
      is install for now to avoid a lockup.
	
	file affected:	lapm_bg.c

3-MRM Changed the V8 timer to 10 sec for V8 answer mode. The V8 routine 
      timed out prior to completion.

	file affected:	mt00v834.c, mt00mn10.c

	
       		

===============================================================
3-6-96
===============================================================

1-RAN in voice\dv02cd10.c changed the 11k value from 11200 to 11025

2-RAN in acu\ac00cmat.c added a CRLF after ATI1 command




===============================================================
3-2-96
===============================================================

		THIS IS VERSION 2.14
1-RAN display packet id when displaying DSP not responding
	files - mt00sp10.c @ send_pkt_to_dsp
		mt00hw10.c @ mt_driver_error_handler

2-RAN poll for line quality only every second
	files - mt00mn10.c @ mt_timer, added cd_timer
		mt00dp10.c @ check_cd


		THIS IS VERSION 2.13
1-RAN changed the timer for serial and parallel modes. this got the
	serial mode working correctly.
	files - ac00mstr.c @ end of main loop
		ac00lib2.c @process_wait
		mak.bat,makefile

===============================================================
3-1-96
===============================================================
		THIS IS VERSION 2.12

1-MRM Fix the hangup problem during the retrain.

	file affected:	mt00dp10.c, ac00hnps.c

===============================================================
3-1-96
===============================================================
1-MRM Fixed the min speed in the at+ms command. 

	file affected:	ac00lib1.c, ac00cmat.c, ac00def.h

2-MRM Fix the problem with ALB test the dsp_mode did not 
      have the proper value.
	
	file affected:	mt00ts10.c

3-MRM Implemented the autodisconnect for the V34 mode.
		
	file affected:	mt00dp10.c, mt00mn10.c

4-MRM Corrected the display message for dis. ring.

	file affected:	ac00tab0.c
	


===============================================================
3-1-96
===============================================================
1-RAN The speaker packet is implemenetd by the DSP. hence removed 
	removed the work around that we had.
	mt00hw10.c - set_volume and set_speaker 
	
	DATE STAMPED 2/27/96
2-RAN We used to record extra 256 samples every time we record
	after the first time. this is because the dce buffers
	were not being initialized. this is fixed by calling line_to_clear
	and line_from_clear in dp_vce_compression_init
	file - voc_ctls.c, func_mac.h, vc00cpro.h
	
	DATE STAMPED 2/29/96
3- RAN For commands +vgr and +vgt remove the support to agc 
	i.e. +vgr =0 and +vgt =0.
	files - vc00ex.c, vc00def.h

	DATE STAMPED 3/1/96
4-RAN from vce_mode_hangup do not call voice_hangup it is redundant.
	this also causes the debugger to crash.
	file - ac00vc1.c 

5-RAN changes made in vc00mn.c @wait_for_1st_rb and @wait_for_away

6-RAN changes in vce_init for +vip exection in vc00mn.c

7-RAN changes at pack and unpack data for lin16 we will handle the 
	data in the same way as lin 8.


===============================================================
2-29-96
===============================================================
    
1-RAN 	For the DTR toggle fix need to call vce_mode_init from 
	vsl=0. otherwise every time +vls-0 is given the modem
	will be in data mode.
	vc00ex.c @ vls_command case 0:

2-RAN 	if you do not give atz or +vip you cannot issue +vsm= command
	this is because the compression tables are not initialized in 
	the RAM. hence need to call voice_init after fclass=8
	ac00cmfx.c @ fclass_e case 8:

===============================================================
2-28-96
===============================================================
	THIS IS VERSION 2.11

      DATE stamped 2/27/96	
1-RAN If DTR toggle in voice mode the modem locks up
	ac00vc1.c - created new function called vce_mode_hangup
	call this from vls_command @case 0: in vc00ex.c
2-RAN If used to accept +fclass=80and then lock up
	ac00cmfx.c @fclass_e
3-RAN Mike did not want CRLF after DLE chars. 
	vc00lib.c @end of call_progress
4-RAN VLS=1 turns on speaker
	voc_ctls.c - @dp_vce_compression_init do not send speaker packet
5-RAN removed support for +VDT from parser
	ac00cmvc.c in the tables

===============================================================
2-28-96
===============================================================
1-MRM Modified the connect message for the loopback test.

	file affected:	ac00lib4.c, ac00tsa1.c

2-MRM Implemented the modem rate seq for max speed of the at+ms
      command. The modem works with the fix rate max = min speed.
      The min speed does not the modem to handshake below the min
      speed.	
	 
	file affected:	ac00cmat.c, ac00lib1.c

3-MRM Fixed the problem with the modem rate seq macro the variables 
      are uwords.

	file affected:	mt_macro.h

===============================================================
2-26-96
===============================================================
	THIS IS VERSION 2.1

1-RAN For voice call progress 
      DATE stamped 2/21/96	
	voc_ctls.c - rewrote the routines to match the changed ICD
		routines were dp_vce_init, dp_vce_compression_init, 
		and commented out dp_vce_call_progress_init
	vc00def.h - defined ctls_idle and changed teh CP DTMF defs
	vc00mn.c - changes all over the place. do not call dp_vce_idle to 
		   return to idle mode. this routine will now take you back to 
		   data mode.
		routines changed - init_offline_command, init_online_command
			int_voice_transmit, init_voice_receive, init_voice_translate
			vce_connect,FLush_dte,Flush_line, and @case !:
	vc00lib.c - rewrote vce_call_progress.

2-RAN Silence detection
      DATE stamped 2/21/96,2/23/96	
	cp_dsp.h/voc_icd.h - the length of the silence packet has changed from 3 to 2.
	vc00mn.c - @process_voice_receive,init_voice_receive, 
		   check for sending dle q or dle s.
	voc_ctls.c - changes at dp_vce_call_progress and dp_vce_silence_detect
		     because silence now reported in packet C4 and not cp register.
	vc00cpro.h - commented out ext def of silence_detect.

3-RAN Speaker control
      DATE stamped 2/23/96	
	voc_ctls.c @speaker control function changed 2nd low byte to 0

4-RAN Set CL1 as default
      DATE stamped 2/23/96	
	voc_ctls.c @dp_vce_get_capability

5-RAN Use controller ring instead of DSP RIng
      DATE stamped 2/23/96,2/24/96	
	voc_ctls.c -  @dp_vce_call_progress
	vc00ex.c - @vls_command case 0. vce_mode = offline_command and
		   call vce_mode_hangup
	vc00mem.h - defed ring_was_on_before
	voc_ctls.c - in dp_vce_call_progress do not check for thru_lineetc.
	dv02cd10.c - enable ring detection in palyback and record mode.

6-RAN Telephone Emulation
      DATE stamped 2/23/96	

	ac00cmv1.c - added tel emul commands in table and at end of file
	vc00def.h/ac00vc.h - defed all tele emul modes and states
	vc00ex.c - @vls_command, tele_emul_con, +vrx, Vtx
	vc00mn.c - IN vce_init set tele_emul to 0.
	vc00mem.c / vc00mem.h - defed all tele emul related variables
	vc00cpro.h - defed tele_emul_on
	voc_ctls.c - added new routine tele_emul_on, in dp_vce_microphone
		      changed bit map so as to not touch spkr.
		     in send_tone and send_dtmf_tone reinit tele emul mode
		     in DSP afeter sending tone.

7-RAN Dialing in voice
      DATE stamped 2/26/96	

	ac00ordl.c - in orig_wait_for_dialtone change mode to voice
	vc00mn.c - @vce_connect do not call vce_init, also at voice_orig_connect
		   @wait_for_ist_rb and wait_for_rb_away changes so that we can 
		   detect ringback and busy.
	vc00lib.c - in call_progress changes at ringback and busy detection
		    at the end of the routine return type if either of the 2 tones
	
===============================================================
2-26-96
===============================================================
1-MRM The system timer has changed to 500 micro sec. This change 
      was done for the Throughtput performance.

	file affected:	ac00mstr.c, ac00lib2.c
	

===============================================================
2-26-96
===============================================================
1-MRM Added the changes for 16550 & 16450 uart modes. Also changed 
      the interrupt polling routine to get the proper throughtput.

	file affected:	parallel.s, parallel.h, acu.c, dte_drv.c, dte.c
	
===============================================================
2-26-96
===============================================================
1-MRM Created a variable for ATN command and set the automode default 
      value to 3.

	file affected:	ac00tab1.c, ac00mem.h, ac00mem.h, ac00lib3.c


===============================================================
2-26-96
===============================================================
1-MRM Added the AT+MS command and removed the ATB group 2-16.

	file affected:	ac00cmat.c, ac00cmdt.c, ac00pro.h, ac00lib3.c

2-MRM Changed all the connect messages according to out user guide.

	file affected:	ac00tab0.c, ac00onat.c, v34_rate.h, ac00lib4.c
			mt00dp10.c

3-MRM Corrected the mode and rate according to +MS command.

	file affected:	ac00anps.c, ac00orps.c, ac00lib4.c

4-MRM Limit the N command to only 0 and 1 settings. 

	file affected:	ac00cmat.c
 
5-MRM Added new settings to W command (0 to 3).

	file affected:	ac00cmat.c

6-MRM Remove and modified the connect, carrier messages, protocal and
      compression display messages.

	file affected:	ac00tab0.c, ac00lib4.c

7-MRM Relocate the CARRIER_XXXX display fuction to ac00onat.c.

	file affected:	ac00orps.c, ac00onat.c
 

===============================================================
2-24-96
===============================================================
    
1-RAN resp_cod.h
	changed responses to AT+FMM? and AT+FMI?. as epr mike's 
	request.	
2-RAN ac00cmfx.c
	+FLCASS=? will now only show 0,1,8

===============================================================
2-23-96
===============================================================
	THIIS IS VERSION 2.04
1-shujin  modified at command set, store, retrieve and display
	fixed NOVRAM checksum bugs,
	fixed atZ command bug (writing at&y location in eeprom)

	affect: ac00tab1.c, at command set format and display;
		ac00lib3.c, 
		ac00def.h, ee00def.h, array size contants; 
		ac00mem.c, ac00mem.h, define hyC command;
		mt_stub.c, for modem_eeprom_checksum().

===============================================================
2-22-96
===============================================================
	THIIS IS VERSION 2.03a
2-shujin  installed distinctive ring (included ring detection)
	date stamp 22296shujin
	file added   : ringint.c, codes for ring int and cadence
	file affected:
	   parallel.s, serial.s  for +IE_ring
	   powerup.s,  set ring int vector table
	   acu.c,      add msec_counter, process_cadence()
	   mt00cust.c, for ring_on and ring_off
	   ac00mstr.c, ac00lib2.c, ac00lib4, for count_for_msec_timer
	   ac00idat.c, put init_varibles()


	THIIS IS VERSION 2.03
1-RAN 	do not detect incoomming ring this fixes it.
	in vc00ex.c at execute_vls_command do not send dp_vce_idle
	packet


===============================================================
2-21-96
===============================================================

	THIS IS VERSION 2.02

1-MRM Enabled the H/W flow control in fax for parallel mode.

	file affected:	dte_drv.c

2-MRM Fix the problem with ALB mode. The controller did not send 
      a proper settings to the pump for v34 mode.

	file affected:	mt00ts10.c

3-MRM Fix the V8 negotiation with the none V8 V32bis modem. The problem
      was that the modem connected at 4800 V32bis instead of 14400 speed.
 
	file affected:	mt00mn10.c, mt00v834.c, mt_v8v34.h

4-RAN Reduced the usage of data memory in voice mode
	date stamp for this change 2/13/96
	files : dv00cd10.c, voc_ctls.c, vc00mem.c, vc00mem.h, vc00mn.c vc00ex.c

5-RAN AD3/AD4 record and playback
	date stamps : 2/13/96, 2/14/96, 2/16/96, 2/19/96
	files: vc00mem.c, vc00mem.h, 
	       voc_ctls.c - dp_vce_compression_init
	       vc00mn.c - dp_vce_compression_init, delay_transmit_sending
			  process_voice_sending, finish_transmit, send_voice_data,
			  pack_data_and_send, process_voice_receive, 
		
6-RAN removed True Speech support indication
	date stamp 2/19/96
	files: vc00ex.c - vsm_command, vsm_request,
	       vc00def.h - max_compression to 8
	       dv02cd10.c -removed true speech from all the arrays
	       dv02de10.h = num_of_comp_methods to 8

7-RAN Treat the dual numbers of compressin schemes as one.
	date stamp 2/19/96
	files: vc00ex.c, vc00mem.h, vc00mem.c, vc00mn.c. v0c_ctls.c	

8-RAN Ring detection in voice
	date stamp 2/20/96
	files - ac00vc1.c in voice)bg
		ac00cmfx.c in fclass_e set vce_state = 
9-RAN +VEM?
	date stamp 2/21/96
	files: vc00ex at vem_request

10-RAN +vls=?
	date stamp 2/21/96
	files vc00ex.c @ vls_query

11-RAN +vls=
	date stamp 2/21/96
	files vc00ex.c removed checks for online and offline when
		switching states using +VLS command

12-RAN +VBT
	date stamp 2/21/96
	files vc00ex.c @vbt_command,vbt_request
	      vc00def.h vbt_command_query_info	
13-RAN gave extra CRLF after ATI1 and ATI5 commands.
	files ac00cmat.c



===============================================================
2-19-96
===============================================================

	THIS IS VERSION 2.01c

  Fixed the beta board dsp code dowload problem
1-RAN in file main_dn.s. near Dnld_done_now_verify & Verify_main_OK_now_reset_dsp
	changed the branch from BL to BGT.


===============================================================
2-15-96
===============================================================

	THIS IS VERSION 2.01a

  Voice is not working in version 2.01 this version should get
  Voice working.
1-RAN in dte.c at voice_dte_init turned line_io_enabled ON.
2-RAN reved the version number to 2.01a


===============================================================
2-12-96
===============================================================
	
	THIS IS VERSION 2.01

1-RAN In mt00hw10.c at set_speaker and set_volume included the 
	writing to the AFE using the PGC packet so that the speaker
	can be controlled. this is a workaround and should be removed
	once the speaker packet is implemented in the DSP



===============================================================
2-11-96
===============================================================
1-MRM Inorder to fix the V.17 Tx problem we shorten the acu timer by
      almost 20%. 

	file affected:	ac00lib2.c, ac00mstr.c


===============================================================
2-9-96
===============================================================

1-MRM Ram built the 2.0 lable for the beta release of the controller code. 

===============================================================
2-8-96
===============================================================

1-MRM Due to problems with 16550 implemented the 16450 mode for the Beta 
      board release also remove the TEMT setting in dte rx interrupt and 
      placed it in the timer0 interrupt routine.
	
	file affected:	parallel.s, acu.c

2-MRM Disable the write buffer and the external wait in the BCSR register.

	file affected:	powerup.s

3-MRM The H/W flow control is disable in the in FAX mode due to 16X50 problems.

	file affected:	dte_drv.c

4-MRM Implemented the Bit rate packet for v34 mode.
		
	file affected:	mt_macro.h, cp_dsp.h, mt00dp10.c 

5-MRM Implemented the bit rate Tx/Rx connect message. By typing ATX6 the 
      display gets enabled.	

	file affected:	ac00lib4.c, ac00lib1.c ac00cmat.c, ac00lib3.c

6-MRM Implemented the DSP not responding message when dsp code is not loaded
      or has a failer.

	file affected:	ac00lib2.c, ac00mstr.c, mt00sp10.c, mt00hw10.c
	
 

			

===============================================================
2-6-96
===============================================================

1-RAN Removed the SERIAL_MODE and PARALLEL_MODE flags from sys02def.h
	These flags now moved to serl_mod.h and prll_mod.h. the correct file
	will be copied as mod_def.h depending on serial or parallel mode.

2-RAN Added mod_def.h at the very begining of dte_drv.c, acu.c and musket.c

3-RAN in musket.c set the DSR, DCD, DTR corectly for serial mode.

4-RAN in dte_drv.h declared constants for DSR,DCD and DTR in serial mode

5-RAN in acu.c when in serial mode TX check for RTS.

6-RAN in serial.s the interrupt structure was made same as in parallel.s

7-RAN in lineint.c at dce_line_rx_int removed the comments around 
	dte_io_enabled





===============================================================
2-1-96
===============================================================

1-RAN In voice mode will read call_progress register.
	File : VC00MN.C Routine: dp_vce_call_progress

2-RAN For +VLS command turn voice relay on before Off-hook relay.
	File: VC00EX.C; Routine : execute_vls_command

3-RAN IN voice mode after dialing do not return to command mode.
	File : AC00ORDL.C ; Routine:originate_dial

4-RAN Turn RTS flag on. THIS MAY BE A TEMPORARY CHANGE
	File: AC00ORPS.C ; Routine : acu_connect

5-RAN Update the version number in RESp_cod.h CD00.01 - MM 01.02




			
===============================================================
1-31-96
===============================================================

1-MRM	Fixed bug with 8 Bit and 16 Bit config mode.

	file affected:	powerup.s

2-MRM	Changed the Flash download address for beta board from
	38xxx to 40xxx. 

	file affected:	powerup.h, main_dn.h, mt_bt_dn.h

			
3-MRM	Changed the version to 1.01 to build the new code for Wess
 
	file affected:	resp_cod.h

4-MRM	The controller would not nego. V8 for the second connect.
	We have to clear these flags sp_match, mnp_sync and lapm_sync 
	prior to going to V8 state.

	file affected:	mt00v834.c

5-RAN	Added the makefiles to the root of the project. THese makefiles
	were given by ROb Miller and modified by ramn.

6-RAN	Commmented out modem_read_data and modem_write_data in Musket.c

7-RAN	In ee00def.h changed the origanization of the EEprom.

8-RAN	Added local.h, icd_msgs.h, tracemac.h to the root of the project

