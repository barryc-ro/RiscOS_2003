This file lists the changes done in the Voice, ACU, ModemTask and other modules
of the RSA code to fix the bugs and add the features needed for Cirrus Logic's
implementation of the IS-101 command set

1. The following commands were removed from the IS-101 parser.
   +VRX=?, +VRX= , +VTX=?, +VTX= , +VXT=? , +VXT= , +VIP=? , +VPP

    FILE  : AC00CMV1.C
    LABEL : voice_tia_commands_table

2. Added the following commands to the IS-101 command set
   +VGR? , +VGT? , +VIT? , +VSD? , +VSM? , +VTD? , +VEM? , +VBT?

   FILE  : AC00CMV1.C
   LABEL : voice_tia_commands_table, plus_VGR_query, plus_VGT_query,
	   plus_VRA_query, plus_VSM_query

   COMMANDS : +VNH=? , +VPR=? , +VCID=? , +VDT=? , +VTD=? , +VDR=? , +VNH=
	      ++VDR= , +VDR?, +VDT?
   FILE  : AC00CMVC.C
   LABEL : vnh_eq, vpr_eq, vcid_eq, vdt_eq, vtd_eq, vdr_eq, vdr_eq, vnh_e, vdr_e

3. The above defined IS-101 commands are added to the AC00VC.H

4. Commented out mmu paging macros 
   
   FILE  : VC00IF.C, VC00CMD.C
   LABEL : All function calls that use macros mmu_open_voice_pg
	   & mmu_restore_stored_pg

5. Commented out check for last command number i.e. VXT_Query

   FILE  : VC00CMD.C
   LABEL : 

6. Commented out check and branch to Rockwell Commands

   FILE  : VC00CMD.C
   LABEL : 

7. Added new routines 

   FILE  : VC00LIB.C
   LABEL : vce_b_to_a_null, vce_store_word_to_a_null

8. While doing "voice_cmd_init" also execute "vce_init"

   FILE  : VC00MN.C
   LABEL : voice_cmd_init

9. Modified the information arrays for +VSM and +VEM commands

   FILE  : DV02CD10.C
   LABEL : All through the file

10. Redefined MAX_NUM_OF_COMP_METHODS to 9

   FILE  : VC00DEF.H, DV02DE10.H
   LABEL : 

11. Changed range and default values for recv and transmit levels
 
   FILE  : DV02DE20.H
   LABEL : 

12. Added and modified the query and info strings for various
    commands.

   FILE  : VC00DEF.H, ac00vc.h
   LABEL : 

13. Added and/or changed the execution of various IS-101 commands.

   FILE  : VC00EX.C
   LABEL : VBT_REQUEST, VBT_QUERY, vEM_QUERY, VGR_COMMAND, VGR_REQUEST,
	   VGR_QUERY, VGT_COMMAND, VGT_REQUEST, VGT_QUERY, VIT_QUERY, 
	   VRN_QUERY, VRN_REQUEST, VSD_REQUEST, VSD_QUERY, VSM_QUERY,
	   VTD_QUERY, VTD_REQUEST, VTS_COMMAND, VTS_QUERY, VRA_REQUEST,
	   VRA_QUERY, 
		These labels may be in upper or lower case. so search with
		case sensitivity off.

14. Redifined the following variables.
	
   FILE  : VC00MEM.H
   LABEL : vce_rb_never_time, vce_rb_never_timer, 
	   vce_rb_away_time, vce_rb_away_timer

15. Declared as extern the following functions.

   FILE  : VC00CPRO.H
   LABEL : vce_b_to_a_null

16. Created "VOC_ICD.H" to house the ICD macros for Voice.
    this file will eventually be merged with Mohammad's file with the same
    function. this file is in the Modem task module.

17. Changed the "voice_command_init" function so that the need to pass a
    variable is now removed.

   FILE  : AC00VC2.H
   LABEL : voice_command_init

18. Changed function calls of "voice_command_init" to reflect the above change.

   FILE  : ac00cmvc.c, ac00pro.h, ac00if.c
   LABEL : calls to "voice_command_init"

19. Redefined constant IDLE as 0 in file dv02de10.h

20. Changed proto-type definition of comp_struct to vce_comp_struct

   FILE  : voc_ctls.c (dv02mn10.c)
   LABEL : dp_vce_get_compression_info

21. Changed the "build_event(e_parse,conn_voice)" to 
		"build_event(e_parse,parse_voice)"

   FILE  : AC00CMFX.C
   LABEL : plus_fclass (case = 8)

22. Removed the disabling of the voice_acu_cmds

   FILE  : AC00VC2.C
   LABEL : acu_voice_cmd_init

23. Corrected the implementation of +VSD and +VTD commands

   FILE  : vc00ex.c
   LABEL : 

24. Defined new constants for AFE1 and AFE2 in vc00def.h

25. referenced dial_time as extern in vc00pro.h

26. Changes made to get arounf the problem that the DSP has not implemented
    the Speaker Packet of the ICD.

   FILE  : MT00HW10.C (also included voc_icd.h in the file)
   LABEL : set_speaker, set_volume

27. Created a new macro file called FUNC_MAC.H. This file has all the macros
    to the functions in the other modules that are called by the voice module.
    Eventually this file will be merged with the SYS_DEF.H

28. Changed "dp_vce_dte_cts" to "CTSon" 

   FILE  : VC00MN.C , VC00EX.C
   LABEL : 

29. In the "modem_status" function do nothing and return if it is voice. 
    The function looks for carrier detect. In the voice mode CD is not on
    and hence it is necessary to return.

   FILE  : AC00LIB4.C
   LABEL : modem_status

30. Disabled the Inactivity Timer. NEED TO RESTART IT LATER ON.

   FILE  : VC00MN.C
   LABEL : 

31. Commented out the extern defs to routines that were macroed in FUNC.MAC

   FILE  : DV02CE06.H
   LABEL : 

32. Commented out the buffer management variables. will use the variables 
    defined by Mohammad.

   FILE  : DV02CD10.C
   LABEL : 

33. In the routine "dte_from_char" check to see if we are in the voice mode

   FILE  : DTE.C
   LABEL : dte_from_char

34. In "voice_dte_init" depending on whether we are in record or playback 
    mode in voice, enable the flags "line_tx_enabled" and "line_rx_enabled".

   FILE  : DTE.C
   LABEL : voice_dte_init

35. Enter the Speed matching interrupts if in voice mode.

   FILE  : LINEINT.C
   LABEL : line_tx_init, line_rx_int

36. In the voice mode before sending a message using the ACU routines we need
    to enable the acu mode and then disable it after the message is sent.
    After this is done set dte back in the voice mode.

   FILE  : AC00CMV1.C
   LABEL : in acu_vce_command at voice_go_online

37. In "process_voice_bg" do the same as in item 36 before and after sending
    the message.

   FILE  : AC00VC1.C
   LABEL : process_voice_bg

38. In the voice playback mode if received DLE-ETX then terminate the playback
    mode.

   FILE  : VC00MN.C
   LABEL : transmit_delay_sending

39. When we finish palyback or record mode we send 2 OK messages. To correct
    this comment out the sending of the OK message from the voice background
    routine in VC00MN.C

   FILE  : VC00MN.C
   LABEL : flush_line , flush_dte

40. DTR was not being checked in the record mode.

   FILE  : VC00MN.C
   LABEL : process_voice_receive

41. For the Cirrus Logic implementation we do not need to qualify the time
    for the silence detection. 

   FILE  : VC00MN.C
   LABEL : process_voice_recieve

42. When dialling in the voice mode the RSA code does not implement a implicit 
    semi-colon after the end of the dial string. THE IS-101 REQUIREMENT IS A
    LITTLE DIFFERENT. NEED TO RECONCILE THIS WITH THE CURRENT CIRRUS SPEC.

   FILE  : AC00ORDL.C
   LABEL : @ case: '\0' if voice execute ';'

43. Changed the voice recieve in the VC00MN.C file. This was done to make the
    the code more concise and more time efficient.

   FILE  : VC00MN.C
   LABEL : process_voice_recieve

44. Rewrote the entire "send_voice_data" routine to make it more time efficient.

   FILE  : VC00MN.C
   LABEL : send_voice_data, also made the variable count global.

45. CHANGES MADE IN THE CODE TO REMOVE THE SUPPORT FOR THE ROCKWELL VOICE
    COMMAND SET.

CHANGES MADE TO THE CODE GIVEN BY MOHAMMAD. THIS CODE WAS RETRIEVED FROM 
SOURCE SAVE ON THE NETWORK

1. Ported the above mentioned changes to the DSP code. 

2. Relay control by using the +VLS command.
   FILE  : MT_STUB.C
   LABEL : defined VOC relay, OH relay, SPK/HS on-hook/off-hook constants.
	   rewrote the modem_td_relay function & modem_spk_hs_relay
   FILE  : FUNC_MAC.H
   LABEL : macroed dp_vce_phone_relay to modem_td_relay
	   macroed dp_vce_headset to modem_spk_hs_relay
   FILE  : VOC_CTLS.C
   LABEL : commented out dp_vce_phone_relay, and dp_vce_headset functions
	   rewrote the dp_vce_speaker, dp_vce_microphone to turn the spk/mic
	   on & off based on +VLS
   FILE  : VC00MEM.C & VC00MEM.H
   LABEL : defined thru_line and thru_phone

   FILE  : VC00CPRO.H
   LABEL : defined modem_spk_hs_relay, modem_td_relay as extern
   FILE  : VC00EX.C
   LABEL : rewrote vls_command

3. Product Code using ATI & AT+FMx commands
   UPDATE MAKEFILE TO INCLUDE THE NEW HEADER FILE "RESP_COD.H"

   FILE  : musket.c
   LABEL : Macroed product_code function

   FILE  : sys02def.h
   LABEL : redfined the strings for ATI0, ATI1, ATI3. moved these strings to 
	   a new header file "resp_cod.h"
   FILE  : ac00cmat.h
   LABEL : changes at AT_I command. also include resp_cod.h

   FILE  : ac00cmvc.c
   LABEL : include resp_cod.h, changed +FMR command

   FILE  : ac00cmfx.c
   LABEL : include resp_cod.h, changed +FMM

   FILE  : mt00hw10.c
   LABEL : include resp_cod.h

   FILE  : ac00vc.h
   LABEL : changed defination of voice_FMR_identification

4. DLE Processing
   FILE  : vc00def.h
   LABEL : deine ESC as 1Bh

   FILE  : vc00mn.c
   LABEL : rewrote the process_dle_command, send_voice_data

5. Responses in the Voice mode for ATV0 and ATV1 commands
   FILE  : ac00vc1.c
   LABEL : @process_voice_bg send msg after checking for atv status
   FILE  : ac00cmv1.c
   LABEL : @acu_vce_command send msg after checking for atv status
   FILE  : vc00mn.c
   LABEL : @voice_orig_complete, init_online_command, flush_dte, do not send
	   OK message
   FILE  : vc00ex.c
   LABEL : @vrx_command,Vtx_command, vrx_command send msg after checking 
	   for atv status
   FILE  : vc00def.h
   LABEL : removed "\r\n"from the result codes
   FILE  : ac00cmat.c
   LABEL : added variable numeric_response at AT_V
   FILE  : ac00vc2.c
   LABEL : added numeric_response check @initialize_voice

6. +VLS? command implemented
   FILE  : ac00cmv1.c
   LABEL : added plus_VLS_reqs in the table
   FILE  : vc00mem.c, vc00mem.h
   LABEL : defined vls_cmd_value variable
   FILE  : vc00ex.c
   LABEL : @vls_command, vls_request

7. +VSM? command implemented
   FILE  : vc00ex.c
   LABEL : @vsm_request

8. AT_H hangup in voice
   FILE  : ac00hnps.c
   LABEL : @hangup_at_init

9. When going off-hook do not turn the voice relay on for ATH1, ATD, ATA
   FILE  : ac00cmat.c
   LABEL : @at_h
   FILE  : ac00orps.c
   LABEL : @orig_init
   FILE  : ac00anps.c
   LABEL : @acu_answer
   FILE  : ac00vc1.c
   LABEL : @parse_orig_voice

10. DTMF detection in voice mode
   FILE  : vc00mn.c
   LABEL : Uncommented calls to vce_call_progress & init_call_progress
	   set thru_mic, thru_phone,thru_spkr = false in vce_init
   FILE  : voc_ctls.c
   LABEL : uncommented init_call_progress, silence_detection, 
	   silence_detection_enabled_init. changed call_progress reporting
   FILE  : vc00lib.c
   LABEL : rewrote vce_call_progress
   FILE  : vc00mn.c
   LABEL : initialized enable_voice_event_rept at suitable places instead of in
	   vce_call_progress.
   FILE  : vc00mem.c, vc00mem.h
   LABEL : defined voice_event_rept

11. DLE-u and DLE-o reporting
	for DLE - u reporting
   FILE  : vc00mn.c
   LABEL : transmit_delay_sending, Process_voice_transmit. Initialized
	   transmit_underrun_sent in voice_trans_init
   FILE  : vc00mem.c, vc00mem.h
   LABEL : defined trans_underrun_sent
	for DLE - o
   FILE  : vc00mn.c
   LABEL : process_voice_recieve

12. AT+VNH command in voice mode
   FILE  : vc00mn.c
   LABEL : for action after ATZ at vce_init, for action after ATH @vce_hangup

13. VIT Timer in Transmit mode
   FILE  : vc00ex.c
   LABEL : @vit_command
   FILE  : vc00mn.c
   LABEL : @init_voice_transmit, transmit_dslya_sending, Process_voice_transmit
	   vce_reset, vce_timer
   FILE  :  ac00vc1.c
   LABEL : this change may not be needed but check anyway @voice_bg

14.Monitoring of local phone off-hook
   FILE  : mt_stub.c
   LABEL : wrote routine local_phone_on_hook
   FILE  : vc00mem.c vc00mem.h
   LABEL : defined local_phn_on_hook_status_sent, first_time &
	   local_phn_off_hook_status_sent
   FILE  : vc00cpro.h
   LABEL : defined local_phone_on_hook as extern
   FILE  : func_mac.h
   LABEL : macroed dp_vce_local_phone_on_hook to local_phone_on_hook
   FILE  : vc00mn.c
   LABEL : called vce_local+phn_hook_statusin vce_bg
   FILE  : voc_ctls.c
   LABEL : new routines vce_local_phn_hook_status and send_dle added
