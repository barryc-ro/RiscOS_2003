/* File:    asmutils.h
   Purpose: Miscellaneous useful assembler routines
   Author:  Ben Laughton

   History:

   1997-08-19: BAL
   Created.

   1999-05-17: BAL
   Added user_mode_donothing, taken from Internet module.
 */

#ifndef Dialler_asmutils_h
#define Dialler_asmutils_h

/* =============================================================================
 * Include header files
 */

/* CLib */
#include "kernel.h"




/* =============================================================================
 * Declare function prototypes
 */

/* -----------------------------------------------------------------------------
   irqs_off

   Disable IRQs

   Returns  unsigned int
   previous IRQ state suitable for passing to irqs_restore
 */

extern unsigned int irqs_off (void);




/* -----------------------------------------------------------------------------
   irqs_on

   Enable IRQs

   Returns  unsigned int
   previous IRQ state suitable for passing to irqs_restore
 */

extern unsigned int irqs_on (void);




/* -----------------------------------------------------------------------------
   irqs_restore

   Restore IRQs to previous state

   Inputs
   unsigned int previous_irq_state : previous state of IRQs
 */

extern void irqs_restore (unsigned int previous_irq_state);




/* -----------------------------------------------------------------------------
   user_mode_donothing

   Force the processor into user mode and call a SWI to allow transient
   callbacks to go off.
 */

extern _kernel_oserror *  user_mode_donothing (void);

#endif
