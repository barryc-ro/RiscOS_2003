//
#ifndef AtmP_lane_h
#define AtmP_lane_h

/* File:    lane.h
   Purpose: LAN Emulation API class
   Author:  Ben Laughton

   Copyright 1999 Element 14 Ltd.

   This material is the confidential trade secret and proprietary information
   of Element 14 Ltd. It may not be reproduced, used sold, or transferred to
   any third party without the prior written consent of Element 14 Ltd.
   All rights reserved.

   History:

   1999-04-21: BAL
   Created.
 */




// =============================================================================
// Include header files

// TCPIPLibs
extern "C"
{
    #include "sys/types.h"
    #include "sys/mbuf.h"
}

// Local
#include "boson.h"
#include "service.h"




// =============================================================================
// Constants definitions




// =============================================================================
// Macro definitions




// =============================================================================
// Global variable declarations

class LANEService;
extern LANEService *  lane_service;




// =============================================================================
// Class declarations

class LANEService : public Service
{
    // Public methods
    public:
        static int  Create ();

        int  TxData (const int            new_header,
                     const u_char *const  src,
                     const u_char *const  dst,
                     int                  type,
                     struct mbuf *        m);

        virtual MessageHandlerRC  MessageHandler (NICMessage    msg,
                                                  NICExtension  ext);

    // Private methods
    private:
        LANEService (int &  error);

        void  TxOKToRecv ();

        MessageHandlerRC  RxRxDropped (NICMessage  msg);
        MessageHandlerRC  RxTxDropped (NICMessage  msg);
        MessageHandlerRC  RxOKToRecv (NICMessage  msg);
        MessageHandlerRC  RxData (NICMessage  msg);
};

#endif
