//
#ifndef AtmP_nic_h
#define AtmP_nic_h

/* File:    nic.h
   Purpose: NIC management
   Author:  Ben Laughton

   Copyright 1999 Element 14 Ltd.

   This material is the confidential trade secret and proprietary information
   of Element 14 Ltd. It may not be reproduced, used sold, or transferred to
   any third party without the prior written consent of Element 14 Ltd.
   All rights reserved.

   History:

   1999-04-26: BAL
   Created.
 */




// =============================================================================
// Include header files

// CLib
#include "kernel.h"

// Misc
#include "Email/Common/bool.h"

// Local
#include "defs.h"




// =============================================================================
// Class declarations

class NIC
{
    // Public member functions
    public:
        static NIC *  Instance ();
        static NIC *  Instance (_kernel_oserror *  error);

        ~NIC ();

        void  Reset ();

        void  EnableInterrupts ();

        void  DisableInterrupts ();

        const unsigned char *  GetUNIAddr ();
        const unsigned char *  GetUNIAddr (int &  error);

        const unsigned char *  GetNetPrefix ();
        const unsigned char *  GetNetPrefix (int &  error);

        const unsigned char *  GetMACAddr ();
        const unsigned char *  GetMACAddr (int &  error);

    // Private member functions
    private:
        NIC (_kernel_oserror *&  error);

        void  DisableAllInterrupts ();

        int  NIC::ReadNetPrefix ();

    // Private data members
    private:
        static NIC *  instance;
        bool              read_mac_addr;
        bool              read_net_prefix;
        unsigned char     uni_addr[NSAPAddr_Size];
        unsigned char     mac_addr[MACAddr_Size];
        unsigned char     net_prefix[NSAPAddr_NetPrefix_Size];
};

#endif
