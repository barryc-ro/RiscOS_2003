# Project name:   resolver
# AMU Makefile for network software
# By Nick Smith, 1992-7

# Toolflags:
CCflags = -c -depend !Depend -IC: -throwback -DDEBUG -wan -zM -fa
#CCflags = -c -depend !Depend -IC: -throwback -wan -zM -ffa #-zps1
Linkflags = -m -o
ObjAsmflags = -depend !Depend -Stamp -quit -CloseExec
Squeezeflags = -o
LibFileflags = -c -o
ObjAsmflags = -m -depend !Depend -throwback -Stamp -quit -CloseExec

# Dependencies

# system libraries
LDLIBS= C:o.Stubs C:rm.inetlib C:rm.socklib DeskLib:o.DeskLib_rm

# user libraries
USRLIBS=

# application object files
OBJECTS= Resolver.o SWI.o ExtLib.o StrCaseCmp.o Hosts.o res_query.o Cache.o \
	 Events.o res_init.o res_mkquery.o res_comp.o

# Targets

all: Resolver ResStubs 

Resolver: $(OBJECTS)
        link $(Linkflags) Resolver $(OBJECTS) $(USRLIBS) $(LDLIBS)
        modsqz -v Resolver

ResStubs: Stubs.o
	copy o.Stubs ResStubs ~cf~p~v
	copy ResStubs AntLib:o.resstubs ~cf~p~v
	
clean:
        remove Resolver
        remove ResStubs
        wipe o.* ~v~c

.SUFFIXES: .o .c
.c.o:;  cc $(CCflags) -o $@ $<
.s.o:;  	objasm $(ObjAsmflags) $< $@ -stamp -quit
.cmhg.o:;	cmhg $< $@

# Dynamic dependencies:
