/*	H.CACHE

Purpose : RISC OS NFS rpc wrappers to support cacheing of information.

History :
Date	Who    Comments
-----------------------------------------------------------------------------
07/09/92 ??    Initial version
13/1/95  CP    Added prototype for cancel_all_caches_by_fhandle
****************************************************************************/

#ifndef __NFSCACHE_H
#define __NFSCACHE_H
#ifndef __NFSTYPES_H
#include "NFSTypes.h"
#endif

extern int get_cache_size(void);
extern void free_cache(void);
extern _kernel_oserror *set_cache_size( int size);

extern void cancel_all_caches_by_mount_point( MountPoint * );
extern void cancel_all_caches_by_fhandle( nfs_fh *fhandle );

extern _kernel_oserror *nfs_getattr( fattr **, MountPoint *, nfs_fh * );
extern _kernel_oserror *nfs_setattr( fattr **, MountPoint *, nfs_fh *, sattr * );
extern _kernel_oserror *nfs_lookup( nfs_fh *, fattr **, MountPoint *, nfs_fh *, char * );


/*
        Read up to NFS_MAXDATA (=8K) from a file
 */
extern _kernel_oserror *nfs_read(
        int *readres_len,
        char *readres_data,
        MountPoint *mount_point,
        nfs_fh *fhandle,
        unsigned offset,
        int count);


/*
        Read many bytes (no limit on number) from a file. This sends multiple requests
        to allow interleaving of packets for better throughput.
*/
extern _kernel_oserror *nfs_readmany(
        int *readres_len,
        char *readres_data,
        MountPoint *mount_point,
        nfs_fh *fhandle,
        unsigned offset,
        int count);

/*
        Write up to NFS_MAXDATA (=8K) to a file
 */
extern _kernel_oserror *nfs_write(
        fattr **nattr,
        MountPoint *mount_point,
        nfs_fh *fhandle,
        unsigned offset,
        char *data,
        int count);

/*
        Write many bytes (no limit on number) to a file. This sends multiple requests
        to allow interleaving of packets for better throughput.
*/
extern _kernel_oserror *nfs_writemany(
        fattr **nattr,
        MountPoint *mount_point,
        nfs_fh *fhandle,
        unsigned offset,
        char *data,
        int count);

extern _kernel_oserror *nfs_write_with_appendum( fattr **, MountPoint *, nfs_fh *, unsigned, bytes_with_appendum *, unsigned );
extern _kernel_oserror *nfs_create( nfs_fh *, fattr **, MountPoint *, nfs_fh *, char *, sattr * );
extern _kernel_oserror *nfs_remove( MountPoint *, nfs_fh *, char * );
extern _kernel_oserror *nfs_rename( MountPoint *, nfs_fh *, char *, nfs_fh *, char * );
extern _kernel_oserror *nfs_mkdir( nfs_fh *, fattr **, MountPoint *, nfs_fh *, char *, sattr * );
extern _kernel_oserror *nfs_rmdir( MountPoint *, nfs_fh *, char * );
extern _kernel_oserror *nfs_readdir( MountPoint *, nfs_fh *, nfscookie, int, dirlist ** );

#endif
