#.SUFFIXES:  .c .o

CCflags = -c -Ospace -J/net/ant/home/peter/develop/ssl/SSLeay-0.6.0/robits \
          -I../include -I../crypto -Wp -DRISCOS
# -Wp disables "non-ANSI include" warning

Objects = s_socket.o s_cb.o s_client.o apps.o

Libs = ../ssllib ../cryptolib /riscos/lib/unixlib.o \
       /riscos/lib/inetlib.o /riscos/lib/socklib.o /riscos/lib/stubs.o

CLIENT = ../bin/s_client,ff8
X509   = ../bin/x509,ff8

all: $(CLIENT) $(X509)

$(CLIENT): $(Objects) $(Libs)
	armlink -o $@ $(Objects) $(Libs)

ObjectsX509 = x509.o apps.o

$(X509): $(ObjectsX509) $(Libs)
	armlink -o $@ $(ObjectsX509) $(Libs)

.c.o:
	armcc $(CCflags) $< -o $@
