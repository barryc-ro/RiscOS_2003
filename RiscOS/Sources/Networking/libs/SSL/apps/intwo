#.SUFFIXES:  .c .o

CCflags = -c -J/net/ant/home/peter/develop/ssl/SSLeay-0.6.0/robits \
          -I../include -I../crypto -Wp -DRISCOS -DRISCOS_RM
# -Wp disables "non-ANSI include" warning

Objects = s_socket.o s_cb.o s_client.o apps.o ../robits/robits.o

#Libs = /riscos/lib/unixlib.o \
#       /riscos/lib/inetlib.o /riscos/lib/socklib.o /riscos/lib/stubs.o

Libs = ../lib/sslstubs /riscos/lib/unixlib.o \
       /riscos/lib/inetlib.o /riscos/lib/socklib.o /riscos/lib/stubs.o

StaticLibs = ../cryptolib ../ssllib /riscos/lib/unixlib.o \
       /riscos/lib/inetlib.o /riscos/lib/socklib.o /riscos/lib/stubs.o

CLIENT = ../bin/s_clienta,ff8
X509   = ../bin/x509a,ff8
SPEED  = ../bin/speed,ff8

all: $(CLIENT) $(X509) $(SPEED)

$(CLIENT): $(Objects) $(Libs)
	armlink -o $@ -map -xref -list ../bin/mapclient $(Objects) $(Libs)

ObjectsX509 = x509.o apps.o

$(X509): $(ObjectsX509) $(Libs)
	armlink -o $@ -map -xref -list ../bin/mapx509 $(ObjectsX509) $(Libs)

ObjectsSpeed = speed.o

$(SPEED): $(ObjectsSpeed) $(StaticLibs)
	armlink -o $@ $(ObjectsSpeed) $(StaticLibs)

.c.o:
	armcc $(CCflags) $< -o $@

