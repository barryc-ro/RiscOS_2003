/* -*-C-*-
 *
 * $Header$
 * $Source$
 *
 * Copyright (c) 1995 Acorn Computers Ltd., Cambridge, England
 *
 * :RCS Log discontinued:
 * Revision 1.1  95/04/20  09:49:59  kwelton
 * Initial revision
 * 
 */
#include "errno.h"
#include "kernel.h"
#include "swis.h"

#include "unixlib.h"

int filestat(char *fname, char *type)
{
    _kernel_swi_regs r;

    r.r[0] = 5;
    r.r[1] = (int)fname;
    (void)_kernel_swi(XOS_Bit | OS_File, &r, &r);

    *type = r.r[0];
    if( *type == 0 )
    {
	errno = ENOENT;
	return(-1);
    }

    return(r.r[4]);
}

/* EOF filestat.c */
