struct ntp_time
{
    u_int32_t secs, frac;
};

struct riscos_time
{
    u_int32_t l;
    u_char h;
    u_int32_t extrans; /* Extra nanoseconds to add */
};

struct ntp
{
    unsigned char flags;
    unsigned char stratum;
    signed char poll;
    signed char precision;
    int32_t root_delay;
    u_int32_t root_dispersion;
    char reference_identifier[4];
    struct ntp_time reference_timestamp;
    struct ntp_time originate_timestamp;
    struct ntp_time receive_timestamp;
    struct ntp_time transmit_timestamp;
};

size_t ntp_construct_request(struct ntp *n, size_t len);
int ntp_process_reply(const struct ntp *n, size_t len, struct riscos_time *time_out);
struct riscos_time current_time(void);
const char *riscos_to_text(struct riscos_time t, int precise);
