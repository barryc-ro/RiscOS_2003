	AREA	|C$code|, CODE, READONLY
	
	EXPORT	TaskModule_CallBack_CallHandler

XOS_Bit		EQU &020000
OS_EnterOS	EQU &16


TaskModule_CallBack_CallHandler
	STMFD	r13!, { r0-r12, lr}
	
	SWI	OS_EnterOS
	
	MOV	r12, a2
	;Do 'BL	a1'
	MOV	lr, pc
	MOV	pc, a1
	
	TEQP	pc, #0	; -> USR mode.
	MOV	r0, r0
	
	LDMFD	r13!, { r0-r12, pc}^
	
	END
