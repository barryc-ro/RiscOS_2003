24-bit colour selection in the Window Manager
=============================================

Icons
-----
Icons will be able to specify 24-bit foreground and background colour via
a new "C" validation string. For example,

             C008000/0080FF     = mid grey foreground, orange background
             CFF00FF            = magenta foreground, background as specified
                                    in flags word
             C/00FFFF           = foreground as specified in the flags word,
                                    yellow background

Either or both colours can be specified. Colours specified with "C" override
those specified with "F" or in the flags word. The colour numbers specified
are shifted left eight bits and passed to ColourTrans_SetGCOL. They are
case-insensitive.

It is suggested that the old-style colours should be specifyed to something
sensible in case the program gets run on a Window Manager that doesn't support
this.

To change colour at run-time, the validation string must be modified, then
Wimp_SetIconFlags can be used to force a redraw.

[ Note: what about 3d borders? ]

Windows (not done - just a suggestion at this stage)
-------
It is now possible to specify a 24-bit value for the work area
background (only). This is partly due to lack of room in the window definition,
and partly on grounds of taste.

The window definition allows the following 7 colours to be set:

         1) Title foreground and window frame colour (normally black(7))
         2) Title background colour (normally grey(2))
         3) Work area foreground colour (normally black(7))   
         4) Work area background colour (normally grey(1))
         5) Scroll bar outer colour (normally grey(3))
         6) Scroll bar inner colour (normally grey(1))
         7) Highlighted title background colour (normally cream(12))

(3) is not actually used in window rendering - the Wimp just sets the
foreground graphics colour appropriately before calling the task's redraw
routine.
(5) and (6) are made redundant by the introduction of toolsprites. It is
anticipated that (2) and (7) will be made redundant by introducing the
ability to specify highlighted and non-highlighted forms of toolsprites.
All toolsprites will then be solid and these background colours will never
be drawn. (1) looks very odd unless it is black, although it is possible
that some user interfaces may be designed so that white is usable. Whatever,
it is unlikely that 24-bit colour selection is desirable for the title bar
text and window frame.

This leaves the work area background colour as the colour most requiring
to be made 24-bit. Therefore it is proposed that the following changes
are made to the window definition (see PRM 3-90)

      R1+39 becomes a flag byte. Bit 0 specifies that a 24-bit colour
      has been given for the background colour. Bits 1-7 remain reserved.
      
      If bit 0 is set, then (R1+34,R1+37,R1+38) become a (RR,GG,BB) triplet
      specifying the window background colour. The Wimp then acts as if
      the work area foreground were specified as black(7), and the
      scrollbars grey(3)+grey(1).
