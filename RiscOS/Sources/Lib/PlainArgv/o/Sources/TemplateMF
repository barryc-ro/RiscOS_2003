

Librarys	=				\

Target		=	^.^.$(LeafName)

ASMFlags	=	$(ASMExtra) -Stamp -NoCache -CloseExec -Quit -throwback
CCFlags		=	$(CCExtra) -fahi -depend !Depend -throwback -I,@.^,C:
CPPFlags	=	$(CPPExtra) -depend !Depend -throwback -I,@.^,C:
LinkFlags	=	$(LinkExtra)

ASM		=	objasm $(ASMFlags)
CC		=	$(MemCheckCC) cc$(CCvsn) -c $(CCFlags)
CPP		=	Makatic._C++ c++ -c $(CPPFlags)
LINK		=	Link -aof $(LinkFlags)
LIBFILE		=	LibFile

# Note that $(CPP) is a hack to work around a bug in Acorn's C++ compiler.


# Don't alter anything below this...


VPATH = @.^

.SUFFIXES:	.o .s .c .c++

#$(Target):	$(ObjectFiles) $(Librarys)
#	$(LINK) -o $@ $(ObjectFiles) $(Librarys)

$(Target):	$(ObjectFiles)
	$(LIBFILE) -c -o $@ $(ObjectFiles)

.s.o:
	$(ASM) -from $< -to $@

.c.o:
	$(CC) -o $@ $<

.c++.o:
	$(CPP) -o $@ $<


# Dynamic dependencies:
