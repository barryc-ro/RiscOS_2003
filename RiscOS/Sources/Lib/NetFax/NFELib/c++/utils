/*	Project Daytona (757)
	Acorn Computers Ltd
	Copyright © 1997, 1998. All Rights Reserved.

	FILE:		utils.c++
	AUTHOR:		Richard D. Warren
	VERSION:	0.01 for RISC OS

	OVERVIEW
	========
	Source file for misc. utils functions used by NFELib.c++

	HISTORY
	=======
	25/09/97	0.01	RDW	initial version
*/


/* ************************************************************************** */
/*                                                                            */
/* Include header files - System                                              */
/*                                                                            */
/* ************************************************************************** */
extern "C"
{
  #include "kernel.h"
}


/* ************************************************************************** */
/*                                                                            */
/* Include header files - Project defined                                     */
/*                                                                            */
/* ************************************************************************** */
#include "utils.h"
extern "C"
{
  #include "NFELib.h"
  #include "Email/EmailLib/ELib.h"
}


/* ************************************************************************** */
/*                                                                            */
/* New enumerated types                                                       */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Constants                                                                  */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Globals to this file                                                       */
/*                                                                            */
/* ************************************************************************** */
static _kernel_oserror oserror;							/* Global error to return a pointer to by the NFE_.....functions */


/* ************************************************************************** */
/*                                                                            */
/* Function Prototypes - Private to this file                                 */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Functions                                                                  */
/*                                                                            */
/* ************************************************************************** */

/* ************************************************************************** */
/*
   FUNCTION:       check_rc
   DESCRIPTION:    Function private to this file to check that the return code
                   address is valid (not NULL).  If it is not valid we create
                   a _kernel_oserror and return that.
   DEPENDENCIES:   data type            NFE_rcode        Elib.h
                   data type            _kernel_oserror  "kernel.h"
   DEPENDED ON BY: function             NFE_create_MIME_entity  NFELib.c++
                   function             NFE_create_RFC822_msg   NFELib.c++
                   function             NFE_decode_RFC822_hdr   NFELib.c++
                   function             NFE_decode_msg_contents NFELib.c++
                   function             NFE_decode_mime_hdr     NFELib.c++
                   function             NFE_decode_mime         NFELib.c++
   INPUT PARAMS:   NFE_rcode *const     rc              return code address
   OUTPUT PARAMS:  NONE
   RETURN VALUE:   _kernel_oserror*                     OS error
   VARIABLES:      _kernel_oserror*     e               return code
 */
/* ************************************************************************** */
extern _kernel_oserror* check_rc(NFE_rcode *const rc)
{
  _kernel_oserror *e = 0;
  
  if (rc == 0)
  {
    oserror.errnum = 0;
    sprintf(oserror.errmess, "NFE_rcode ptr cannot be NULL");
    e = &oserror;
  }
  
  return e;
}  
