#ifndef iso2022_H
#define iso2022_H

extern Encoding enc_iso2022;

typedef struct ISO2022_Set ISO2022_Set;
typedef struct ISO2022_Encoding
{
    Encoding e;
    ISO2022_Set *Set[4+2];

    ISO2022_Set *CL, *GL, *CR, *GR;
    char CL_s, GL_s, CR_s, GR_s;

    char ssarea;

    char sync[2];

    char tempset;
    ISO2022_Set *oldset;

    char esc_disabled;

    /* Pending escape commands */
    char esc_pending;
    char esc_multi;
    char esc_inter1;
    char esc_inter2;
    char esc_inter3;
    char esc_revision;
} ISO2022_Encoding;

#define iso2022_ws_size (sizeof(ISO2022_Encoding) - sizeof(Encoding))

void iso2022_disable_escapes(Encoding *);
unsigned int iso2022_read(struct Encoding *e,
                          int (*ucs_out)(void *, UCS4),
                          const char *s,
                          unsigned int n,
                          void *handle);
void iso2022_delete(Encoding *e);
void iso2022_reset(Encoding *e);
UCS2 *iso2022_find_table(int type, int id);

#endif
