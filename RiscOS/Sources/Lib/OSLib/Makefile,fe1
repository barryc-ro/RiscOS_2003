# Makefile for OSLib

# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date          Name         Description
# ----          ----         -----------
# 16-Aug-94     JC           Created.
# 05-Sep-94     AMcC         Added Generic RISC OS Build rules
# 27th Feb 1995 JC           Added Macros headers
# 21st Jun 1995 JRC          Split into 4 pieces

LIBDIR = <Lib$Dir>

#
# Generic options:
#
MKDIR   = cdir
WIPE    = -wipe
WFLAGS  = ~c~v

#
# Program specific options:
#
COMPONENT = OSLib

EXAMPLES = \
Stamps.HelloWorld \
Stamps.p1-046 \
Stamps.p1-053 \
Stamps.p1-067 \
Stamps.p1-068 \
Stamps.p1-108 \
Stamps.p1-109 \
Stamps.p1-110 \
Stamps.p1-219 \
Stamps.p1-332 \
Stamps.p1-334 \
Stamps.p1-467 \
Stamps.p1-606 \
Stamps.p1-754 \
Stamps.p1-833 \
Stamps.p1-834 \
Stamps.p2-042 \
Stamps.p2-083 \
Stamps.p2-099 \
Stamps.p2-383 \
Stamps.p2-413 \
Stamps.p2-491 \
Stamps.p2-492 \
Stamps.p2-493 \
Stamps.p2-524 \
Stamps.p2-526 \
Stamps.p2-589 \
Stamps.p2-615 \
Stamps.p2-616 \
Stamps.p2-617 \
Stamps.p2-618 \
Stamps.p2-619 \
Stamps.p2-625 \
Stamps.p2-629 \
Stamps.p2-632 \
Stamps.p2-634 \
Stamps.p2-636 \
Stamps.p2-638 \
Stamps.p2-691 \
Stamps.p2-735 \
Stamps.p2-740 \
Stamps.p2-743 \
Stamps.p3-018 \
Stamps.p3-023 \
Stamps.p3-024 \
Stamps.p3-025 \
Stamps.p3-063 \
Stamps.p3-070 \
Stamps.p3-072 \
Stamps.p3-073 \
Stamps.p3-162 \
Stamps.p3-185 \
Stamps.p3-198 \
Stamps.p3-231 \
Stamps.p3-246 \
Stamps.p3-411 \
Stamps.p3-421 \
Stamps.p3-433 \
Stamps.p3-469 \
Stamps.p3-549 \
Stamps.p3-659 \
Stamps.p3-743 \
Stamps.Test

all:

release:
   Copy Types.h    OSLib:Core.h.types        ~CFLNR~V
   Copy Macros.h   OSLib:Core.h.macros       ~CFLNR~V
   Copy Types.Hdr  OSLib:Core.Hdr.Types      ~CFLNR~V
   Copy Macros.Hdr OSLib:Core.Hdr.Macros     ~CFLNR~V
   Copy o.OSLib    OSLib:o.OSLib             ~CFLNR~V
   Copy ReadMe     OSLib:ReadMe              ~CFLNR~V
   Copy ChangeLog  OSLib:ChangeLog           ~CFLNR~V
   Copy SetVars    OSLib:SetVars             ~CFLNR~V

examples: ${EXAMPLES}

.SUFFIXES: .c .Stamps

.c.Stamps:
   cc -c -depend !Depend -IOS: -wp -fc -D__swi -o $@ $<
   Create $@ #Truncate file since we don't actually need it

#------------------------------------------------------------------------
# RISC OS Build targets:
#
export: export_${PHASE}

export_hdrs:
        @echo ${COMPONENT}: export complete (hdrs)

export_libs: ${HDRS} ${CHEADERS} ${LIBS} dirs
        Dir Core
        AMU export_libs
        Back
        Dir Computer
        AMU export_libs
        Back
        Dir User
        AMU export_libs
        Back
        Dir Toolbox
        AMU export_libs
        Back
        Copy Types.h    OSLib:Core.h.types             ~CFLNR~V
        Copy Macros.h   OSLib:Core.h.macros            ~CFLNR~V
        Copy Types.Hdr  OSLib:Core.Hdr.Types           ~CFLNR~V
        Copy Macros.Hdr OSLib:Core.Hdr.Macros          ~CFLNR~V
        Copy o.OSLib    OSLib:o.OSLib             ~CFLNR~V
        @echo ${COMPONENT}: export complete (libs)

clean:
        @echo ${COMPONENT}: *** NOT cleaned *** clean locally if required

clean_lib:
        ${WIPE} Core.o.* ${WFLAGS}
        ${WIPE} Computer.o.* ${WFLAGS}
        ${WIPE} User.o.* ${WFLAGS}
        ${WIPE} Toolbox.o.* ${WFLAGS}
        ${WIPE} Core.h.* ${WFLAGS}
        ${WIPE} Computer.h.* ${WFLAGS}
        ${WIPE} User.h.* ${WFLAGS}
        ${WIPE} Toolbox.h.* ${WFLAGS}
        ${WIPE} Core.Hdr.* ${WFLAGS}
        ${WIPE} Computer.Hdr.* ${WFLAGS}
        ${WIPE} User.Hdr.* ${WFLAGS}
        ${WIPE} Toolbox.Hdr.* ${WFLAGS}
        ${WIPE} Core.Help.* ${WFLAGS}
        ${WIPE} Computer.Help.* ${WFLAGS}
        ${WIPE} User.Help.* ${WFLAGS}
        ${WIPE} Toolbox.Help.* ${WFLAGS}
        ${WIPE} Core.CStrong.* ${WFLAGS}
        ${WIPE} Computer.CStrong.* ${WFLAGS}
        ${WIPE} User.CStrong.* ${WFLAGS}
        ${WIPE} Toolbox.CStrong.* ${WFLAGS}
        ${WIPE} o.OSLib ${WFLAGS}
        LibFile -c o.OSLib
        @echo ${COMPONENT}: cleaned

dirs:
        ${MKDIR} l
        ${MKDIR} ${LIBDIR}
        ${MKDIR} ${LIBDIR}.OSLib
        ${MKDIR} ${LIBDIR}.OSLib.Core
        ${MKDIR} ${LIBDIR}.OSLib.Core.h
        ${MKDIR} ${LIBDIR}.OSLib.Core.Hdr
        ${MKDIR} ${LIBDIR}.OSLib.Computer
        ${MKDIR} ${LIBDIR}.OSLib.Computer.h
        ${MKDIR} ${LIBDIR}.OSLib.Computer.Hdr
        ${MKDIR} ${LIBDIR}.OSLib.User
        ${MKDIR} ${LIBDIR}.OSLib.User.h
        ${MKDIR} ${LIBDIR}.OSLib.User.Hdr
        ${MKDIR} ${LIBDIR}.OSLib.Toolbox
        ${MKDIR} ${LIBDIR}.OSLib.Toolbox.h
        ${MKDIR} ${LIBDIR}.OSLib.Toolbox.Hdr
        ${MKDIR} ${LIBDIR}.OSLib.o

# End of RISC OS Build targets
#------------------------------------------------------------------------
# Dynamic dependencies:
