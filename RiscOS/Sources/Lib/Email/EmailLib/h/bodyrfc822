#if !defined(__bodyrfc822msg_h)              /* Sentry, use file only if it's not already included. */
#define __bodyrfc822msg_h
/*	Project Post (769)
	Acorn Risc Technologies
	Copyright © 1998. All Rights Reserved.

	FILE:		bodyrfc822.h
	AUTHOR:		Richard D. Warren
	VERSION:	0.01D for RISC OS

	OVERVIEW
	========
	Class definition for a bodyrfc822msg object.
	The class object holds a email bodyrfc822msg which may reside in file or in memory.


	HISTORY
	=======
	16/07/98	0.01D	RDW	initial version
*/


/* ************************************************************************** */
/*                                                                            */
/* Include header files - System                                              */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Include header files - Project defined                                     */
/*                                                                            */
/* ************************************************************************** */
#include "body.h"
#include "MIMEentity.h"
extern "C"
{
  #include "ELib.h"
}
#include "qautils/indxlist.h"


/* ************************************************************************** */
/*                                                                            */
/* New enumerated types                                                       */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Class definition                                                           */
/*                                                                            */
/* ************************************************************************** */
class bodyrfc822msg : public body
{
  // Declaration of PUBLIC member functions
  public:
    // Constructor
    bodyrfc822msg(bool f,							// file (true) or memory(false)?
                  char   *membase,						// set to start of memory block that bodyrfc822msg is in
                  uint32  offset,						// number of characters from membase to start of bodyrfc822msg
                  uint32  length,						// length of bodyrfc822msg in characters from it's start
                  bool    owner = false);					// does the object 'own' this memory block?

    // copy constructor
    bodyrfc822msg(const bodyrfc822msg &object);
    bodyrfc822msg(const body &object);
    virtual elibbase* clone(void) const { return new bodyrfc822msg(*this); }	// Virtual Copy constructor

    bodyrfc822msg& operator=(bodyrfc822msg &object);				// assignment operator
    virtual ~bodyrfc822msg(void);						// Destructor

#ifdef DISPLAY
    virtual void Display(void);							// For debug/developement really.  Can go in final.
#endif
    NFE_rcode parse(NFE_CONTEXT &context, clock_t t_slice);			// parse the data from file or memory (should be private?, Check this)

    NFE_rcode ApplyEncoding(NFE_CONTEXT &context,
                            const clock_t t_slice,
                            NFE_TE enc,
                            char *filename,
                            uint32 buffer);					// output to a file version (NOT IMPLEMENTED YET)
    NFE_rcode ApplyEncoding(NFE_CONTEXT &context,
                            const clock_t t_slice,
                            NFE_TE enc,
                            char *memory);					// output to a memory version (NOT IMPLEMENTED YET)

    rfc822msg* GetMsg(void) const { return message; }

    virtual NFE_rcode WriteOut(NFE_CONTEXT &context, clock_t t_slice, FILE *file);		// function to write out the object to file
    virtual NFE_rcode WriteOut(NFE_CONTEXT &context, clock_t t_slice, char *mem, uint32 &l);	// function to write out the object to memory

  // Declaration of PROTECTED member functions
  protected:

  // Declaration of PRIVATE member functions
  private:
    void copybodyrfc822msgobject(const bodyrfc822msg &object);				// method to copy bodyrfc822msg object.  Used by copy constructor and assignment operator

  // Declaration of PUBLIC data members
  public:

  // Declaration of PROTECTED data members
  protected:

  // Declaration of PRIVATE data members
  private:
    rfc822msg* message;
};

#endif  /* end of sentry #ifdef */
