extern "C"
{
  #include <string.h>
  #include <stdio.h>
  #include "DebugLib.h"
}

#include "rfc822msg.h"
#include "MIMEentity.h"
#include "MIMEimage.h"
#include "MIMEmultip.h"
#include "MIMEmsg.h"

int main(int argc, char *argv[])
{
  char *test = "message";
  char *temp = 0;
  uint32 length = 255;
  uint32 templen = length;
  NFE_rcode rc;
  NFE_CONTEXT context;
  uint32 tmp = 0;
  uint32 lengthoffile = 110808;
  rfc822msg msg(TRUE, test, 0, lengthoffile, TRUE);
  
/*  debug_initialise("tstimage", "imageout", 0);
//  debug_initialise_trace(TML_OUTPUT, "dprintf oswrch Printf prf expired");
  debug_output_device(TML_OUTPUT);
  debug_atexit();*/

  msg.GetLen(templen);
  printf("msg.GetLen: %d\n", templen);
  
  rc = msg.ParseData(context, 0);
  msg.GetLen(templen);
  printf("msg.ParseData: %d  msg.GetLen: %d\n", rc, templen);
  
  msg.Display();

  printf("GETTING MIMEentity\n");
  NFE_CT ct = NFE_CT_UNKNOWN;
  MIMEentity* e = msg.GetMIMEentity();
  printf("RETURNED from getting MIMEentity\n");
  
  if (e)
    e->Display();

  return 0;
}
