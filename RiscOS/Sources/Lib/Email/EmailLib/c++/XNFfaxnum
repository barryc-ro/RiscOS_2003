/*	Project Post (769)
	Acorn Computers Ltd
	Copyright © 1997. All Rights Reserved.

	FILE:		XNFfaxnum.c++
	AUTHOR:		Richard D. Warren
	VERSION:	0.05D for RISC OS

	OVERVIEW
	========
	Source file for implementation of XNFfaxnum object

	HISTORY
	=======
	17/09/97	0.01	RDW	initial version
	18/02/98	0.02	RDW	#include DebugLib path added
	23/04/98	0.03D	RDW	#ifdef DISPLAY round Display method added
	09/06/98	0.04D	RDW	Modified to use hdr_registry
					removed destructor and copyXNFfaxnumobject method
					common header constructor added
	14/06/98	0.05D	RDW	Fixed operator= from header object to reset the
					type data member correctly.
*/


/* ************************************************************************** */
/*                                                                            */
/* Include header files - System                                              */
/*                                                                            */
/* ************************************************************************** */
extern "C"
{
  #include <string.h>
  #include <ctype.h>
  #include "DebugLib/DebugLib.h"
}


/* ************************************************************************** */
/*                                                                            */
/* Include header files - Project defined                                     */
/*                                                                            */
/* ************************************************************************** */
#include "XNFfaxnum.h"
#include "header.h"
#include "822parser.h"
extern "C"
{
  #include "ELib.h"
}


/* ************************************************************************** */
/*                                                                            */
/* New types - Private to this file                                           */
/*                                                                            */
/* ************************************************************************** */
class xnf_faxnum_registry : public header_registry
{
  public:
    xnf_faxnum_registry();
    header* create_header(bool filebased, char *membase, uint32 offset,
                          uint32 length, bool owner);
    header* create_header(header& h);
};


/* ************************************************************************** */
/*                                                                            */
/* Globals to this file                                                       */
/*                                                                            */
/* ************************************************************************** */
const char          NFE_HDR_XNF_FAXNUM_STRING[] = "X-NetFax-Fax-Number";	// The header class' header fieldname
xnf_faxnum_registry xnfdfr;							// The registry object for this header class


/* ************************************************************************** */
/*                                                                            */
/* Function Prototypes - Private to this file                                 */
/*                                                                            */
/* ************************************************************************** */


/* ************************************************************************** */
/*                                                                            */
/* Object methods                                                             */
/*                                                                            */
/* ************************************************************************** */
xnf_faxnum_registry::xnf_faxnum_registry() : header_registry()
{
  reg_name = NFE_HDR_XNF_FAXNUM_STRING;
}


header* xnf_faxnum_registry::create_header(header& h)
{
  return new XNFfaxnum(h);
}


header* xnf_faxnum_registry::create_header(bool filebased, char *membase,
                                           uint32 offset, uint32 length, bool owner)
{
  return new XNFfaxnum(filebased, membase, offset, length, owner);
}


/* ************************************************************************** */
/*
   METHOD:         Constructor for a XNFfaxnum object
   DESCRIPTION:
   DEPENDENCIES:
   DEPENDED ON BY:
   INPUT PARAMS:
   OUTPUT PARAMS:  NONE
   RETURN VALUE:   NONE
   CONSTANTS:      NONE
   VARIABLES:      NONE
 */
/* ************************************************************************** */
XNFfaxnum::XNFfaxnum(bool f, char *membase, uint32 offset, uint32 length,
                     char *org, bool owner)
          :header(f, membase, offset, length, owner)
{
  type = xnfdfr.GetType();
  if ((owner) && (length==0))
  {
    SetName(NFE_HDR_XNF_FAXNUM_STRING);
    if (org)
      SetBody(org);
  }
}


XNFfaxnum::XNFfaxnum(bool f, char *membase, uint32 offset, uint32 length,
                     bool owner)
          :header(f, membase, offset, length, owner)
{
  type = xnfdfr.GetType();
  if ((owner) && (length==0))
  {
    SetName(NFE_HDR_XNF_FAXNUM_STRING);
  }
}


// copy constructor
XNFfaxnum::XNFfaxnum(const XNFfaxnum &object) : header(object)
{
}


// copy constructor from header object
XNFfaxnum::XNFfaxnum(const header &object) : header(object)
{
  type = xnfdfr.GetType();
}


XNFfaxnum &XNFfaxnum::operator=(const XNFfaxnum &object)
{
  header::operator=(object);

  return *this;
}


XNFfaxnum &XNFfaxnum::operator=(const header &object)
{
  header::operator=(object);

  if (this != &object)
  {
    type = xnfdfr.GetType();
  }

  return *this;
}


#ifdef DISPLAY
void XNFfaxnum::Display(void)
{
  printf("NFfaxnum:\n");
  header::Display();
  printf("\n");
}
#endif
