/* > flashprog.h
 *
 *      AppFlash.c header.
 */

#define DEBUG 1

#ifdef DEBUG
#  define DEBUGFN(x) (x)
#else
#  define DEBUGFN(x)
#endif

/* *-command handlers */
int appflash_writeupdatecmd (char *filename, int mode, char swicall);
int appflash_erasecmd (void);
int appflash_writewordcmd (char *address_str);

/* SWI handlers */
_kernel_oserror *appflash_verify_flashrom_swi (_kernel_swi_regs *r);
_kernel_oserror *appflash_update_flash_swi (_kernel_swi_regs *r);


/* Status codes */
#define AppFlash_OK                     0
#define AppFlash_Timeout                1
#define AppFlash_WrongManufacturer      2
#define AppFlash_WrongDevice            3
#define AppFlash_LoadError              4
#define AppFlash_EraseFailed            5
#define AppFlash_WriteFailed            6
#define AppFlash_FileChecksumFail       7

/* Defines for AppFlash_Checksum */
#define AppFlash_Checksum_OK            0
#define AppFlash_Checksum_Fail          1

/* Modes */
enum {Update, Write};
