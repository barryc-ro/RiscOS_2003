/*name and version number:@(#)dpv17wa.h	1.6*/
/*date of get: 		  09/06/00 16:58:58*/
/*date of delta:	  05/18/00 18:22:51*/
/****************************************************************
Description:

  DSP download code for drop-out bridging and for V.21 ch2
  detection.

  NOTE: This workaround applies to all fax non-V34 fax modulations.
  		The "V17" convention is a misnomer from the early days when
		this fix was only for V17 fax rates.

  This code contains two sections of DSP code:

	Section    Start   Version
	----------------------------
    .V17DOWA   0x1800  1.17.3.8
	.V17TDWA   0x1D00  1.17.3.8
	.FXWAVER   0x2700  1.17.3.8 (this is the version number)

Version Number:
	Read the version number from 0x2700 and 0x2701.
	ROM compatability is in 0x2700 (in this case 1.17).
	Version is in 0x2701 (in this case 3.8).

Usage:

  Prior to issuing startup command for fax, download and link
  this code as shown below:

  	DOWNLOAD_DSP(wDpV17wa);
	dp_write_dsp_ram(0xf20, 0xdd96);

  During a fax session, the wDPV17wa download module need only
  be downloaded prior to the initial fax startup.  The code will
  stay resident during interim V.21 tx/rx transfers.  The write
  to 0xf20 to 'link' the code must be done prior to each fax
  startup. (For simplicity, it may be easiest to download the
  code prior to each startup.)

  During the drop-out, the DSP will run tone detectors to look
  for V.21 CH2 frequencies and update the status bit at 0x3b[11]
  to indicate V.21 Ch2 has been detected.

  For Venus, this download can be added to the dp_download_fax()
  function in file dpiov.c.  The write to 0xf20 can then be added
  to the dp_fax_startup() function in dpfax.c in the fax-receive
  specific setup.

  After using V.17 and prior to starting up V.29, the vectors
  used by this DSP download code must be reset to null as shown
  below (note that this is only required for v17 modes):

    dp_write_dsp_ram(0xf20, 0x8ece);	// null to DPRAM_baud
	dp_write_dsp_ram(0xf22, 0x8ece);	// null to vec1

Changes since last version:

  - Moved V17TDWA from 0x1c00 to 0x1A00 to make room for Perseus.

  DSP code complements of John Guarini.
  Usage comments by Sam Hoke.

*****************************************************************/
const word wDpV17wa[] =
#ifndef COMPRESS_TABLES
{
0x1D00, 0x027B, 0xD05F, /* Address, size, checksum */
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x609E, 0x1880, 0x3CD0,
0xC171, 0x8224, 0xD003,
0x0DA5, 0x5050, 0xDDBD,
0x6050, 0x8F01, 0x5080,
0xD820, 0xC300, 0x0DAF,
0x1880, 0x3CD0, 0xC171,
0xD389, 0xD003, 0x0DBA,
0x5050, 0xDE21, 0x6050,
0x8F2D, 0x5000, 0x0F20,
0x5050, 0x8ECE, 0x6050,
0x5000, 0x1D00, 0x12F0,
0x6051, 0x1200, 0x6050,
0x30CD, 0x789C, 0xC000,
0xD003, 0x0DD1, 0x5080,
0x2717, 0xC300, 0x188A,
0x5050, 0x0200, 0x6050,
0x1B9F, 0x38D4, 0x9E0E,
0x9E0E, 0x20D4, 0x5020,
0x0221, 0x3CD8, 0x1C5A,
0xE0D8, 0x8F01, 0x5080,
0x834C, 0xC300, 0x5080,
0x2000, 0xC300, 0x8E84,
0x8EDB, 0xD002, 0x0E1E,
0x187F, 0x1BB4, 0x7850,
0x6054, 0x5100, 0xDDE4,
0x5080, 0x8323, 0xC200,
0x5080, 0x834C, 0xC300,
0x52C0, 0xC016, 0x5080,
0x4BBF, 0xC300, 0xC7D1,
0x0004, 0xD002, 0x0DFB,
0x8E84, 0x8EDB, 0xD003,
0x0E1E, 0x19B4, 0x7850,
0x5100, 0xDDBD, 0x5080,
0x8323, 0xC200, 0x5080,
0x8327, 0xC300, 0x5100,
0xDE03, 0x5080, 0x8323,
0xC200, 0x5080, 0x834C,
0xC300, 0x8EDF, 0xD003,
0x0E10, 0x19AE, 0x3CD0,
0x992E, 0xE0D0, 0xD002,
0x0E16, 0x0E1E, 0x5080,
0xDDF4, 0x608E, 0x5080,
0xDE99, 0xC300, 0x5000,
0x0F22, 0x5050, 0x8ECE,
0x6050, 0x5080, 0x8285,
0xC200, 0x5080, 0x8286,
0xC200, 0xD003, 0x0E2E,
0x5050, 0x0180, 0x5080,
0xC9AD, 0xC300, 0x1B9F,
0x38D4, 0x9E0E, 0x9E0E,
0x20D4, 0x8F2D, 0x5080,
0x3F4B, 0xC300, 0x5080,
0xDE84, 0xC300, 0x8EDB,
0xD002, 0x0E81, 0x187F,
0x1BB4, 0x7850, 0x6054,
0x5100, 0xDE42, 0x5110,
0x00F5, 0x5080, 0xD3DE,
0xC200, 0x5080, 0x3F4B,
0xC300, 0x52C0, 0xC016,
0x5080, 0x4BBF, 0xC300,
0xC7D1, 0x0004, 0xD002,
0x0E63, 0x8E84, 0x8EDB,
0xD003, 0x0E81, 0x1240,
0x1D9E, 0x6058, 0x5050,
0x0200, 0x5080, 0xC9AD,
0xC300, 0x19B4, 0x7850,
0x5110, 0x00F5, 0x5100,
0xDE21, 0x5080, 0xD3DE,
0xC200, 0x8F54, 0x5100,
0xDE6B, 0x5110, 0x00F5,
0x5080, 0xD3DE, 0xC200,
0x5080, 0x3F4B, 0xC300,
0x8EDF, 0xD003, 0x0E78,
0x19AE, 0x3CD0, 0x992E,
0xE0D0, 0xD002, 0x0E7E,
0x0E81, 0x5080, 0xDE52,
0x608E, 0x5080, 0xDE99,
0xC300, 0x5080, 0xD0C0,
0xC200, 0x5080, 0xD3DB,
0xC200, 0x609E, 0x8EDB,
0xD002, 0x0EB5, 0x19AE,
0x3CD0, 0x992E, 0xE0D0,
0xD002, 0x0E99, 0x185E,
0x5020, 0x021E, 0xB0C0,
0x5110, 0x2D4E, 0x3040,
0xBC98, 0x3360, 0xD010,
0x0ED8, 0x5050, 0x0400,
0x1D9E, 0x6058, 0x1200,
0x1C58, 0x6058, 0x1280,
0x1C8A, 0x6058, 0x1200,
0x1C59, 0x6058, 0x1CAF,
0x6058, 0x5020, 0x0228,
0x6058, 0x1DAD, 0x6058,
0x5010, 0x021E, 0x185E,
0x38D5, 0x38C5, 0x20D1,
0x20C1, 0x0ED8, 0x185E,
0x1A5B, 0x5020, 0x021E,
0xB0C0, 0xB8D4, 0x3040,
0xBC98, 0x3360, 0xD000,
0x0ED8, 0x5000, 0x0A5F,
0x1BAE, 0x7850, 0x6054,
0x1201, 0x1C58, 0x6058,
0x1200, 0x5020, 0x0228,
0x6058, 0x1D9E, 0x6058,
0x1C8A, 0x6058, 0x1201,
0x1DAD, 0x6058, 0x1CAF,
0x6058, 0x13FF, 0x1C59,
0x6058, 0x5080, 0x577E,
0xC200, 0x19AD, 0x3CD0,
0x99CE, 0xC000, 0x609E,
0x52C0, 0xC016, 0x5080,
0x4BBF, 0xC300, 0xC7D1,
0x0004, 0xD002, 0x0EF7,
0x5000, 0x1D01, 0x3CD0,
0x992E, 0xE0D2, 0xB8D1,
0x31E0, 0xD000, 0x0EFB,
0x1200, 0x6050, 0x5110,
0x0001, 0x0EFD, 0x5000,
0x1D01, 0x1200, 0x6050,
0x5110, 0x0000, 0x3180,
0x30CD, 0x789C, 0xC000,
0x609E, 0x5000, 0x0D34,
0x1B9F, 0x5150, 0x0000,
0x5080, 0x852F, 0xC300,
0x5010, 0x0A90, 0x5150,
0xFFB9, 0x5080, 0x852F,
0xC300, 0x5010, 0x0AD8,
0x5150, 0xFFB9, 0x5080,
0x852F, 0xC300, 0x1AD4,
0x5150, 0x0000, 0x5080,
0x852F, 0xC300, 0x1A5A,
0x5150, 0x0000, 0x5080,
0x852F, 0xC300, 0x1B2A,
0x5150, 0xFFDE, 0x5080,
0x852F, 0xC300, 0x30CD,
0x789C, 0xC000, 0x609E,
0x5000, 0x1D02, 0x1B9F,
0x5150, 0x0000, 0x5080,
0x852F, 0xC300, 0x5010,
0x0A90, 0x5150, 0xFFB9,
0x5080, 0x852F, 0xC300,
0x5010, 0x0AD8, 0x5150,
0xFFB9, 0x5080, 0x852F,
0xC300, 0x1AD4, 0x5150,
0x0000, 0x5080, 0x852F,
0xC300, 0x5010, 0x0221,
0x5150, 0x0000, 0x5080,
0x852F, 0xC300, 0x30CD,
0x789C, 0xC000, 0x609E,
0x5000, 0x1D02, 0x1B9F,
0x5150, 0x0000, 0x5080,
0x8528, 0xC300, 0x5010,
0x0A90, 0x5150, 0xFFB9,
0x5080, 0x8528, 0xC300,
0x5010, 0x0AD8, 0x5150,
0xFFB9, 0x5080, 0x8528,
0xC300, 0x1AD4, 0x5150,
0x0000, 0x5080, 0x8528,
0xC300, 0x5010, 0x0221,
0x5150, 0x0000, 0x5080,
0x8528, 0xC300, 0x30CD,
0x789C, 0xC000,

0x1800, 0x0110, 0x7370, /* Address, size, checksum */
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x0000,
0x0000, 0x0000, 0x609E,
0x5110, 0xF3FF, 0x890B,
0x8900, 0x5000, 0x1818,
0x12D8, 0x6050, 0x5000,
0x1812, 0x5080, 0xD843,
0x7106, 0xF8C0, 0x6101,
0x1200, 0x5000, 0x1819,
0x7083, 0x6051, 0x5110,
0x4000, 0xA0D1, 0x5000,
0x181D, 0x7003, 0x5000,
0x0F22, 0x5050, 0xD8D3,
0x6050, 0x30CD, 0x789C,
0xC000, 0x08A1, 0x0000,
0xF75F, 0x10D6, 0x085B,
0xFFB9, 0x609E, 0x5150,
0xFFFB, 0x5000, 0x1812,
0x5010, 0x1800, 0x5020,
0x180C, 0xB0C4, 0xB8D5,
0x5080, 0xB772, 0xC300,
0x5000, 0x181C, 0xB0C0,
0x5110, 0x0666, 0x3040,
0x990E, 0x4910, 0x3040,
0x990E, 0x5000, 0x180D,
0x5010, 0x181D, 0x38D2,
0xC16D, 0xD001, 0x0880,
0x38D1, 0xB8D1, 0x3CD0,
0xC369, 0x9DC0, 0x5100,
0x1000, 0x3040, 0x990E,
0xC369, 0xD001, 0x0880,
0x3CD4, 0x992E, 0xE0D4,
0xC171, 0x0003, 0xD000,
0x0885, 0x5110, 0x0400,
0x8906, 0x0883, 0x5110,
0xFBFF, 0x890B, 0x1200,
0x6054, 0x5000, 0x1810,
0x5010, 0x181E, 0x38D2,
0xC16D, 0xD001, 0x08A4,
0x38D1, 0xB8D1, 0x3CD0,
0xC369, 0x9DC0, 0x5100,
0x1000, 0x3040, 0x990E,
0xC369, 0xD001, 0x08A4,
0x3CD4, 0x992E, 0xE0D4,
0xC171, 0x0003, 0xD000,
0x08A9, 0x5110, 0x0800,
0x8906, 0x08A7, 0x5110,
0xF7FF, 0x890B, 0x1200,
0x6054, 0x5110, 0x4000,
0x5000, 0x181C, 0xA0D0,
0x1200, 0x5000, 0x1819,
0x6050, 0x8900, 0x30CD,
0x789C, 0xC000, 0x609E,
0x5150, 0xFFF5, 0x5000,
0x1800, 0x38D1, 0x9FCE,
0x9FE0, 0xC371, 0x2CCD,
0xD010, 0x08C5, 0xD00B,
0x08BB, 0x08D0, 0x5240,
0x000C, 0x5000, 0x1800,
0x7180, 0x3CD0, 0x980E,
0xE0D1, 0x5000, 0x181C,
0x7001, 0x30CD, 0x789C,
0xC000, 0x609E, 0x5130,
0x0002, 0x19B1, 0xB0C0,
0x5000, 0x181C, 0x1C9B,
0xB8D0, 0x3040, 0x990E,
0x980E, 0xE0D9, 0xE0CA,
0x5150, 0xFFFB, 0x11FE,
0x1203, 0x5000, 0x1812,
0x5010, 0x1800, 0xB8D1,
0x3CD5, 0x5080, 0xB765,
0xC300, 0x5000, 0x1819,
0x3CD0, 0x992E, 0xE0D2,
0xB8D0, 0x3160, 0xD001,
0x08FC, 0xC151, 0x0001,
0xD002, 0x88B6, 0x08FD,
0x8849, 0x30CD, 0x789C,
0xC000, 0x1200, 0x5020,
0x1800, 0x708C, 0x6059,
0xC000, 0x1C3B, 0x38D8,
0x3700, 0x20D8, 0xC000,
0x1C3B, 0x38D8, 0x37C0,
0x20D8, 0xC000,

0x2700, 0x0002, 0x2019, /* Address, size, checksum */
0x1011, 0x3008
};
#else
{
//Zero tables
0x0396,0x0393,0x02FD,0x0115,0x00F5,0x0000,
//Flag Table Size
0x002E,
//Flag Table
0x5568,0x5559,0x57F3,0x57F7,0x5D4F,0x8F7B,
0xADAC,0x2795,0x6DAD,0x6BD5,0xD5D5,0x23DE,0xAB5F,0x95AA,
0x6D27,0x93CB,0xDFDA,0x86B5,0x2D90,0xBF7F,0xFEB6,0xBB5E,
0xFBD7,0x6ADC,0x75D5,0xCFD5,0x56AD,0xEFDD,0x56E7,0xEEAB,
0x18F7,0xDA59,0xBD4F,0xEAF0,0x5FA6,0x5E74,0xC9BF,0xE745,
0x9BF5,0xD77C,0x2BD7,0xF9E6,0xF7C9,0xDB75,0x9F1D,0x17BD,
// Index Table
0x1D00,0x027B,0xD05F,0x801B,0x0918,0x2428,0x0E82,0x0DA5,
0xBD19,0x15DD,0x8F01,0x2000,0x03D8,0x0DAF,0x1880,0x2809,
0xD389,0xBA0E,0x190D,0xDE21,0x2D15,0x018F,0x0F20,0xCE19,
0x158E,0x0001,0xF01D,0x4312,0x1514,0x2A1E,0x0E06,0x0DD1,
0x1700,0x0327,0x188A,0x4819,0x9F15,0x351B,0x5252,0x0541,
0x17C7,0x1C5A,0x0126,0x008F,0x834C,0x0003,0x03BD,0x8E84,
0x8EDB,0x1E07,0xE90E,0x1BB4,0x4DC4,0xE40F,0x00DD,0x8323,
0x005C,0x834C,0x2003,0x00AF,0x4BBF,0x6603,0x0722,0x0DFB,
0x8E84,0x8EDB,0x1E0E,0xB40E,0xC419,0xBD0F,0x00DD,0x8323,
0x005C,0x8327,0x0F03,0xDE03,0x2300,0x5C83,0x4C00,0x0383,
0x8EDF,0x100E,0xAE0E,0x0919,0x123E,0x1607,0x1E0E,0x000E,
0xDDF4,0x608E,0x9900,0x03DE,0x2201,0x190F,0x8ECE,0x0015,
0x8285,0x005C,0x8286,0x0E5C,0x0E2E,0x8019,0x0001,0xC9AD,
0x9F03,0x351B,0x5252,0x2D41,0x008F,0x3F4B,0x0003,0xDE84,
0xDB03,0x078E,0x0E81,0xB4E9,0xC41B,0x0F4D,0xDE42,0xF502,
0x0000,0xD3DE,0x005C,0x3F4B,0x2003,0x00AF,0x4BBF,0x6603,
0x0722,0x0E63,0x8E84,0x8EDB,0x810E,0x400E,0xB212,0x190B,
0x0048,0xC9AD,0xB403,0xC419,0xF502,0x0F00,0xDE21,0xDE00,
0x5CD3,0x8F54,0x6B0F,0x02DE,0x00F5,0xDE00,0x5CD3,0x4B00,
0x033F,0x8EDF,0x780E,0xAE0E,0x0919,0x123E,0x7E07,0x810E,
0x000E,0xDE52,0x608E,0x9900,0x03DE,0xC000,0x5CD0,0xDB00,
0x5CD3,0xDB1B,0x078E,0x0EB5,0x19AE,0x3E09,0x0712,0x0E99,
0x185E,0x1E05,0xC002,0x02B0,0x2D4E,0x9831,0x30BC,0xD842,
0x190E,0xB25D,0x140B,0x0BCA,0x1280,0x0B79,0x5914,0x0B1C,
0x1CAF,0x050B,0x0228,0xAD0B,0x0B1D,0x1E04,0x5E02,0xD518,
0xC538,0x7438,0x20C1,0x0ED8,0x185E,0x1A5B,0x1E05,0xC002,
0x73B0,0x9831,0x30BC,0xD810,0x010E,0x0A5F,0x1BAE,0x4DC4,
0xCA2F,0x140B,0x2805,0x0B02,0x0BB2,0x0B79,0xAD2F,0x0B1D,
0x1CAF,0xA20B,0x1C59,0x000B,0x577E,0xAD5C,0x0919,0x0611,
0x201B,0x00AF,0x4BBF,0x6603,0x0722,0x0EF7,0x0101,0x091D,
0xD23E,0x7CE0,0x103D,0x0EFB,0x1514,0x0A02,0x0EFD,0x0101,
0x141D,0x0215,0x8008,0x1E31,0x062A,0x011B,0x0D34,0x1B9F,
0x0836,0x2F00,0x0385,0x9004,0x360A,0xFFB9,0x2F00,0x0385,
0xD804,0x360A,0xFFB9,0x2F00,0x0385,0x1AD4,0x0836,0x2F00,
0x0385,0x1A5A,0x0836,0x2F00,0x0385,0x1B2A,0xDE36,0x00FF,
0x852F,0x1E03,0x062A,0x011B,0x1D02,0x1B9F,0x0836,0x2F00,
0x0385,0x9004,0x360A,0xFFB9,0x2F00,0x0385,0xD804,0x360A,
0xFFB9,0x2F00,0x0385,0x1AD4,0x0836,0x2F00,0x0385,0xC704,
0x0836,0x2F00,0x0385,0x2A1E,0x1B06,0x0201,0x9F1D,0x361B,
0x0008,0x8528,0x0403,0x0A90,0xB936,0x00FF,0x8528,0x0403,
0x0AD8,0xB936,0x00FF,0x8528,0xD403,0x361A,0x0008,0x8528,
0x0403,0x36C7,0x0008,0x8528,0x1E03,0x062A,0x1800,0x0110,
0x7370,0x021B,0xF3FF,0x890B,0x8900,0x1801,0xD818,0x1512,
0x1201,0x0018,0xD843,0x7106,0x0155,0x1461,0x1901,0xCD18,
0x0243,0x9753,0x1D01,0x0318,0x0170,0x0F22,0xD319,0x15D8,
0x2A1E,0xA106,0x0808,0xF75F,0x10D6,0x085B,0xFFB9,0x361B,
0x01E3,0x1812,0x0004,0x0518,0x180C,0x99F3,0x7200,0x03B7,
0x1C01,0xC018,0x02B0,0x0666,0x5131,0x3132,0x0151,0x180D,
0x1D04,0xD218,0x6D38,0x1AC1,0x0880,0x7CEB,0x6909,0xC0C3,
0x0F9D,0x3185,0x6951,0x1AC3,0x0880,0x3E34,0x283B,0x1018,
0x0885,0x5D02,0x8906,0x0883,0xFF02,0x0BFB,0x1489,0x014D,
0x1810,0x1E04,0xD218,0x6D38,0x1AC1,0x08A4,0x7CEB,0x6909,
0xC0C3,0x0F9D,0x3185,0x6951,0x1AC3,0x08A4,0x3E34,0x283B,
0x1018,0x08A9,0x8D02,0x8906,0x08A7,0xFF02,0x0BF7,0x1489,
0x024D,0x0153,0x181C,0x1423,0x1901,0x1518,0x8900,0x2A1E,
0x1B06,0xF536,0x01FF,0x1800,0x33EB,0x2593,0x2CCD,0xC542,
0x4508,0x08BB,0x08D0,0x5240,0x0167,0x1800,0x7180,0x2B09,
0x0146,0x181C,0x7001,0x2A1E,0x1B06,0x0C16,0x19B1,0xB0C0,
0x1C01,0x9B18,0x5B1C,0x5131,0x882B,0xE0CA,0xE336,0x86A9,
0x1201,0x0418,0x1800,0x7F7C,0x6500,0x03B7,0x1901,0x0918,
0xD23E,0x5BE0,0x1A1D,0x08FC,0x0A7D,0xB607,0xFD88,0x4908,
0x1E88,0x062A,0x0514,0x1800,0x708C,0x06A5,0x1C3B,0xA32C,
0x066E,0x1C3B,0x642C,0x066E,0x2700,0x190C,0x1120,0x0810,
0x0030
};
#endif

