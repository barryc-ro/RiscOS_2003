/*name and version number:@(#)v_hcmd.h	1.6*/
/*date of get: 		  09/06/00 16:59:29*/
/*date of delta:	  03/23/00 23:13:38*/
/*****************************************************************************
** File        : v_hcmd.h                                                  *
** Version     : 2.0                                                         *
**---------------------------------------------------------------------------*
** Description :                                                             *
**   Include file for any module wishing to use the command interface to the *
** 2181 host.                                                                *
**---------------------------------------------------------------------------*
**                               HISTORY                                     *
** Date            Ver   Dev  Comments                                       *
** 24th Oct  1998  1.0   RGT  Initial Revision                               *
**                                                                           *
** 31st Oct  1998  1.1   RGT  Added in new host command interface structures *
**                            and function prototypes                        *
**                                                                           *
**[Release 2]----------------------------------------------------------------*
** Date            Ver   Dev  Comments                                       *
** 16th Feb  1999  1.2   RGT  Added in constants for new NEGOTIATED_PARAM    *
**                            host command, plus host representations of     *
**                            all supported coders.                          *
**                                                                           *
** 20th Apr  1999  2.0   RGT  Re-architected the module. Code now conforms to*
**                            an acceptable structure - most holes in the    *
**                            interface have been plugged with a command     *
**                            parser. Also added a DTMF queue for dialing    *
**                            out (T1 CAS).                                  *
**                                                                           *
******************************************************************************/

#ifndef __HOST_CMD_H__
	#define __HOST_CMD_H__

	#include <v_config.h>


/****************************************************************************
          ####   ###   #   #   ###  #####   ###  #   #  #####  ###
         #      #   #  ##  #  #       #    #   # ##  #    #   #
         #      #   #  # # #   ###    #    ##### # # #    #    ###
         #      #   #  #  ##      #   #    #   # #  ##    #       #
          ####   ###   #   #  ####    #    #   # #   #    #   ####
*****************************************************************************/

	/**********************************************************
	** Miscellaneous Constants for the host command interface *
	***********************************************************/
	#define DSP_INFO_BUF_SIZE		26 		// Size of DSP Info Buffer (QoS)

	/**********************************************
	** ORIGINAL RAS-BASED DSP STATUS IDENTIFIERS **
	***********************************************/
		#define DP2_STATS_RXBAUD                0
		#define DP2_STATS_TXBAUD                1
		#define DP2_STATS_RXSRATE               2
		#define DP2_STATS_TXSRATE               3

		#define DP2_STATS_RENEGOTIATE_REMOTE    15
		#define DP2_STATS_RENEGOTIATE_LOCAL     16

		#define DP2_STATS_RETRAIN_REMOTE        18
		#define DP2_STATS_RETRAIN_LOCAL         19

		#define DP2_STATS_DIGITAL_LOSS          20
		#define DP2_STATS_ROBBED_BIT            21

		#define DP2_STATS_CONTROLLER_ALIVE_LO   22
		#define DP2_STATS_CONTROLLER_ALIVE_HI   23

		#define DP2_STATS_DSP_ALIVE_LO          24
		#define DP2_STATS_DSP_ALIVE_HI          25


/****************************************************************************
** C O M M A N D    I . D.    D E F I N I T I O N S                         *
** C O M M A N D    I . D.    D E F I N I T I O N S                         *
** C O M M A N D    I . D.    D E F I N I T I O N S                         *
*****************************************************************************/
	/**********************************************
	**       ORIGINAL RAS-BASED COMMANDS         **
	***********************************************/
		// #define RESET 					1 conflicts with v42bis.h
		#define DISCONNECT 				2
		#define ANSWER_INCOMING 		3 
		#define ORIGINATE_OUTGOING 		4
		#define MDM_STATE	 			5
		#define CONFIGURE_MODEM 		6		// Not used
		#define MODEM_READY 			7
		#define PREPARE_FOR_DOWNLOAD 	8		// Not used
		#define BREAK 					9		// Not used
		#define QUERY_MODEM_ID 			0x0A
		#define MODEM_ID 				0X0B
		#define QUERY_MODEM_PROFILE 	0x0C
		#define MODEM_PROFILE 			0x0D
		#define INCOMING_RING			0x0E	// Not used
		#define ALIVE_INDICATOR			0x0F	// Not used
		#define ALARM_EVENT_MESSAGE		0x10	// Not used
		#define SEND_TONE_DIGIT			0x11	// Not used
		#define DETECT_TONE_DIGIT		0x12	// Not used
		#define STOP_DETECT_TONE		0x13	// Not used
		#define SEND_TONE_TILL_ACK		0x14	// Not used

		#define BAD_COMMAND 			0xFE	// Not used
		#define	EOC						0xFF

	/******************************************
	**     NEW VOICE OVER IP COMMANDS        **
	*******************************************/
		#define GENERATE_TONE			0x42
		#define TONE_DETECTED			0x43
		#define NEGOTIATED_PARAMS		0x44
		#define DTMF_GENERATION			0x45
		#define MEDIA_TRANSITION		0x50	// Not used
		#define QOS_DATA				0x51	// Not used



/****************************************************************************
** C O M M A N D    P A R A M E T E R    I . D .    D E F I N I T I O N S   *
** C O M M A N D    P A R A M E T E R    I . D .    D E F I N I T I O N S   *
** C O M M A N D    P A R A M E T E R    I . D .    D E F I N I T I O N S   *
*****************************************************************************/
	/**********************************************
	**      ORIGINAL RAS-BASED PARAMETERS        **
	***********************************************/
		#define HCMD_PARAM_ID_LINE_SPEED	0x0B
		#define HCMD_PARAM_ID_CALL_STATUS	0x15
		#define HCMD_PARAM_ID_Z80_FIRMWARE	0x17

	/******************************************
	**     NEW VOICE OVER IP PARAMETERS      **
	*******************************************/
		#define HCMD_PARAM_ID_TONE_DIGITS	0x01
		#define HCMD_PARAM_ID_COMPANDER		0x1c
		#define HCMD_PARAM_ID_DIGIT_STRING	0x30
		#define HCMD_PARAM_ID_ON_DURATION	0x31
		#define HCMD_PARAM_ID_OFF_DURATION	0x32
		#define HCMD_PARAM_ID_ECHO			0xF0
		#define HCMD_PARAM_ID_FRAMES		0xF1
		#define HCMD_PARAM_ID_MIN_JITTER	0xF2
		#define HCMD_PARAM_ID_MAX_JITTER	0xF3
		#define HCMD_PARAM_ID_NEGOT_PARAMS	0xF4



/****************************************************************************
** C O M M A N D    P A R A M E T E R    A R G .    D E F I N I T I O N S   *
** C O M M A N D    P A R A M E T E R    A R G .    D E F I N I T I O N S   *
** C O M M A N D    P A R A M E T E R    A R G .    D E F I N I T I O N S   *
*****************************************************************************/
	/**********************************************
	**  ORIGINAL RAS-BASED PARAMETER ARGUMENTS   **
	***********************************************/
		#define HCMD_PARAM_ARG_DISCONNECT	0x00
		#define HCMD_PARAM_ARG_NEGOTIATE	0x02
		#define HCMD_PARAM_ARG_DATAMODE		0x03
		#define HCMD_PARAM_ARG_TEARDOWN		0x04	// Not used
		#define HCMD_PARAM_ARG_FALLFORWARD	0x05	// Not used
		#define HCMD_PARAM_ARG_FALLBACK		0x06	// Not used
		#define HCMD_PARAM_ARG_TONEDETECTED	0x07	// Not used


	/*****************************************
	** VOICE OVER IP PARAMETER ARGUMENTS    **
	******************************************/
		#define HOST_CODER_G711_ALAW	0x00
		#define HOST_CODER_G711_ULAW	0x01
		#define HOST_CODER_G729			0x02


/****************************************************************************
            #####  #   #  ####   #####  ####   #####  #####  ###
              #    #   #  #   #  #      #   #  #      #     #
              #     ###   ####   ###    #   #  ###    ###    ###
              #      #    #      #      #   #  #      #         #
              #      #    #      #####  ####   #####  #     ####
*****************************************************************************/
#ifndef ASSEMBLER
	#include <v_defs.h>

/***********************************************************************
** DTMF QUEUE StRUCTURE:                                               *
****** DTMF Queue Structure for holding a string of DTMF digits passed *
	** down from the 486. These shall be streamed out gradually to the *
	** core under the control of the host_command_state_machine.       *
	********************************************************************/
		typedef struct {
			struct V_DTMF_DIGIT_INFO {
				word	freq1s, freq1c, freq2s, freq2c ;
				word	digitTimer;
				word	digitLength;
				word	onDuration;
				word	offDuration;
				byte	digit;
				enum { DTMF_IDLE, DTMF_QUEUED, DTMF_PLAYING } state;
			} digits[CFG_DTMF_QUEUE_SIZE];
			byte	playIndex;
			byte	storeIndex;
		} dtmfQ_t;
#endif	// ASSEMBLER





#endif 
