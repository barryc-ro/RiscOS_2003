; > FlashErrs


; Call/return the relevant error based on the international flag.

		MACRO
$label		DoError	$cc
	[ international
$label		B$cc	MakeError
		|
$label		ORR$cc.S pc, lr, #VFlag
	]
		MEND


; Define error messages.

	[ international
		^ ErrorBase_SerialFlash

		AddError	SerialFlash_DeviceUnavailable, "E01"
		AddError	SerialFlash_InvalidPage, "E02"
		AddError	SerialFlash_PageBlockTooSmall, "E03"
		AddError	SerialFlash_BadSWI, "E04"
		ASSERT	@ <= ErrorBase_SerialFlash + ?ErrorBase_SerialFlash

		|
		^ ErrorBase_SerialFlash

		AddError	SerialFlash_DeviceUnavailable, "Flash device unavailable"
		AddError	SerialFlash_InvalidPage, "Invalid page specified"
		AddError	SerialFlash_PageBlockTooSmall, "Page memory block too small"
		AddError	SerialFlash_BadSWI, "SWI not known"
		ASSERT	@ <= ErrorBase_SerialFlash + ?ErrorBase_SerialFlash

	]
		END

