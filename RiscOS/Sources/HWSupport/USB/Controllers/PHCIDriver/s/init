;
; 		Copyright 2001 Pace Microtechnology plc
;

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; Global header files
;
                GET     Hdr:ListOpts
		OPT	OptNoList
                GET     Hdr:NdrDebug		; definition of true
                GET     Hdr:Macros		; system wide macro definitions
                GET     Hdr:System		; swis and hardware declarations
		GET	Hdr:Machine.<Machine>	; for machine-specific flags
                GET     Hdr:ModHand		; Module handler reason codes
                GET     Hdr:FSNumbers           ; for NewErrors
                GET     Hdr:NewErrors           ; for global errors
                GET     Hdr:HighFSI		; high level filing system
                GET     Hdr:DevNos		; device no for new IRQ handling
                GET     Hdr:Services		; service call info
                GET     Hdr:Symbols		; constants TRUE, FALSE, VFlag
                GET     Hdr:MsgTrans		; MessageTrans constants
                GET     Hdr:Proc                ; ENTRY and EXIT macros
		GET	Hdr:Buffer
                GET     Hdr:ResourceFS
                GET     Hdr:DeviceFS		; reason code definitions
                GET     Hdr:Podule
		GET     Hdr:IO.IOEB
                GET     <Lib$Dir>.USB.Hdr.OHCIReg
		$GetIO				; I need IOMD declarations etc

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; Global variables
;
		OPT 	OptList
 		 	GBLL	debug
		 	GBLL	border_handshake
			GBLL	counting
                        GBLL    debug_devicecall
                        GBLL    debugmodule

debug 		 	SETL	false	; to include debug macros
border_handshake 	SETL	false	; to flash border when handshaking
counting		SETL	false	; to count stuff
debug_module            SETL    true
debug_devicecall        SETL    true
debugmodule             SETL    true

XDebugIt_WriteC     *   0x4ba82 + Auto_Error_SWI_bit

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; Debug header files
;
		GBLS	conditional_get
 [ :DEF:debugging
debug           SETL    true
conditional_get	SETS	"GET 	Hdr:Debug"		; Standard debug macros
 |
conditional_get SETS	""
 ]
		$conditional_get

                GBLL    standalonemessages
 [ :DEF: standalone
standalonemessages SETL standalone
 |
standalonemessages SETL {FALSE}
 ]


; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; User header files
;

                GET     VersionASM
                GET     Hdr.Registers
		GET 	s.errors	; error handling stuff
		GET	s.macros	; some useful macros
                GET     s.main		; module interfaces
		GET 	s.hardware	; hardware detection and irq stuff
		GET 	s.interrupts	; handle irqs
		GET	s.devicecall 	; handle devicefs stuff

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; Debug routine code
;
 [ debug
      		InsertNDRDebugRoutines     ; ensure this is after module header !
 ]

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

                END
