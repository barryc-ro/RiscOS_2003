/************************************************************************/
/*                  Copyright 1996 Acorn Computers Ltd                  */
/*                                                                      */
/*  This material is the confidential trade secret and proprietary      */
/*  information of Acorn Computers. It may not be reproduced, used      */
/*  sold, or transferred to any third party without the prior written   */
/*  consent of Acorn Computers. All rights reserved.                    */
/*                                                                      */
/************************************************************************/

/*
 * Debug routines
 *
 * Modification History
 *---------------------
 *
 */

#ifdef _DEBUG
//#define DB_FILE

#include <stdio.h>
#include <stdarg.h>
#include <string.h>

static char strDebugFile[30];

/*
 * take a copy of the filename and clean the file.
 */
void
DebugFileInit(char *strFilename)
{
#ifdef DB_FILE
  FILE *fileDebug=NULL;
#endif

  if (strFilename!=NULL)
  {
    strncpy(strDebugFile,strFilename,sizeof(strDebugFile));
#ifdef DB_FILE
    fileDebug = fopen(strFilename,"w");
    fclose(fileDebug);
#endif
  }
}

/*
 * append the given string to the debug file
 */
void
DebugPrint(char *format, ...)
{
#ifdef DB_FILE
  FILE *fileDebug=NULL;
#endif
  va_list list;

  if (strlen(strDebugFile))
  {
#ifdef DB_FILE
    fileDebug = fopen(strDebugFile,"a");
#endif
    va_start (list, format);
#ifdef DB_FILE
    vfprintf(fileDebug, format, list);
#else
    vprintf(format, list);
#endif
    //vprintf(format, list);
    va_end(list);
#ifdef DB_FILE
    fclose(fileDebug);
#endif
  }

}
#else

void
DebugFileInit(char *strFilename)
{
}

void
DebugPrint(char *format, ...)
{
}

#endif
