#include "kernel.h"
#include "driver.h"
#include "codetables.h"

code_table_t tv_tables[119];
code_table_t vcr_tables[81];
code_table_t cable_tables[68];
code_table_t sat_tables[12];


void calc(code_table_t *t, unsigned char *tab, unsigned char *next_tab, unsigned char *cod)
{
    unsigned int npc = ((((tab[0]&0x30)>>4)+1)*(((tab[1]&0xf8)>>3)+1)+3)>>2;
    t->header_size = (cod-tab)*2;
    t->data_size = npc;
    t->num_commands = (2*(next_tab-cod))/npc;
    t->header = tab;
    t->data = cod;
}


void work_it_out(void)
{
    calc(&tv_tables[0],T00TAB,T01TAB,T00COD);
    calc(&tv_tables[1],T01TAB,T02TAB,T01COD);
    calc(&tv_tables[2],T02TAB,T03TAB,T02COD);
    calc(&tv_tables[3],T03TAB,T04TAB,T03COD);
    calc(&tv_tables[4],T04TAB,T05TAB,T04COD);
    calc(&tv_tables[5],T05TAB,T06TAB,T05COD);
    calc(&tv_tables[6],T06TAB,T07TAB,T06COD);
    calc(&tv_tables[7],T07TAB,T08TAB,T07COD);
    calc(&tv_tables[8],T08TAB,T09TAB,T08COD);
    calc(&tv_tables[9],T09TAB,T10TAB,T09COD);
    calc(&tv_tables[10],T10TAB,T11TAB,T10COD);
    calc(&tv_tables[11],T11TAB,T12TAB,T11COD);
    calc(&tv_tables[12],T12TAB,T13TAB,T12COD);
    calc(&tv_tables[13],T13TAB,T14TAB,T13COD);
    calc(&tv_tables[14],T14TAB,T15TAB,T14COD);
    calc(&tv_tables[15],T15TAB,T16TAB,T15COD);
    calc(&tv_tables[16],T16TAB,T17TAB,T16COD);
    calc(&tv_tables[17],T17TAB,T18TAB,T17COD);
    calc(&tv_tables[18],T18TAB,T19TAB,T18COD);
    calc(&tv_tables[19],T19TAB,T20TAB,T19COD);
    calc(&tv_tables[20],T20TAB,T21TAB,T20COD);
    calc(&tv_tables[21],T21TAB,T22TAB,T21COD);
    calc(&tv_tables[22],T22TAB,T23TAB,T22COD);
    calc(&tv_tables[23],T23TAB,T24TAB,T23COD);
    calc(&tv_tables[24],T24TAB,T25TAB,T24COD);
    calc(&tv_tables[25],T25TAB,T26TAB,T25COD);
    calc(&tv_tables[26],T26TAB,T27TAB,T26COD);
    calc(&tv_tables[27],T27TAB,T28TAB,T27COD);
    calc(&tv_tables[28],T28TAB,T29TAB,T28COD);
    calc(&tv_tables[29],T29TAB,T30TAB,T29COD);
    calc(&tv_tables[30],T30TAB,T31TAB,T30COD);
    calc(&tv_tables[31],T31TAB,T32TAB,T31COD);
    calc(&tv_tables[32],T32TAB,T33TAB,T32COD);
    calc(&tv_tables[33],T33TAB,T34TAB,T33COD);
    calc(&tv_tables[34],T34TAB,T35TAB,T34COD);
    calc(&tv_tables[35],T35TAB,T36TAB,T35COD);
    calc(&tv_tables[36],T36TAB,T37TAB,T36COD);
    calc(&tv_tables[37],T37TAB,T38TAB,T37COD);
    calc(&tv_tables[38],T38TAB,T39TAB,T38COD);
    calc(&tv_tables[39],T39TAB,T40TAB,T39COD);
    calc(&tv_tables[40],T40TAB,T41TAB,T40COD);
    calc(&tv_tables[41],T41TAB,T42TAB,T41COD);
    calc(&tv_tables[42],T42TAB,T43TAB,T42COD);
    calc(&tv_tables[43],T43TAB,T44TAB,T43COD);
    calc(&tv_tables[44],T44TAB,T45TAB,T44COD);
    calc(&tv_tables[45],T45TAB,T46TAB,T45COD);
    calc(&tv_tables[46],T46TAB,T47TAB,T46COD);
    calc(&tv_tables[47],T47TAB,T48TAB,T47COD);
    calc(&tv_tables[48],T48TAB,T49TAB,T48COD);
    calc(&tv_tables[49],T49TAB,T50TAB,T49COD);
    calc(&tv_tables[50],T50TAB,T51TAB,T50COD);
    calc(&tv_tables[51],T51TAB,T52TAB,T51COD);
    calc(&tv_tables[52],T52TAB,T53TAB,T52COD);
    calc(&tv_tables[53],T53TAB,T54TAB,T53COD);
    calc(&tv_tables[54],T54TAB,T55TAB,T54COD);
    calc(&tv_tables[55],T55TAB,T56TAB,T55COD);
    calc(&tv_tables[56],T56TAB,T57TAB,T56COD);
    calc(&tv_tables[57],T57TAB,T58TAB,T57COD);
    calc(&tv_tables[58],T58TAB,T59TAB,T58COD);
    calc(&tv_tables[59],T59TAB,T60TAB,T59COD);
    calc(&tv_tables[60],T60TAB,T61TAB,T60COD);
    calc(&tv_tables[61],T61TAB,T62TAB,T61COD);
    calc(&tv_tables[62],T62TAB,T63TAB,T62COD);
    calc(&tv_tables[63],T63TAB,T64TAB,T63COD);
    calc(&tv_tables[64],T64TAB,T65TAB,T64COD);
    calc(&tv_tables[65],T65TAB,T66TAB,T65COD);
    calc(&tv_tables[66],T66TAB,T67TAB,T66COD);
    calc(&tv_tables[67],T67TAB,T68TAB,T67COD);
    calc(&tv_tables[68],T68TAB,T69TAB,T68COD);
    calc(&tv_tables[69],T69TAB,T70TAB,T69COD);
    calc(&tv_tables[70],T70TAB,T71TAB,T70COD);
    calc(&tv_tables[71],T71TAB,T72TAB,T71COD);
    calc(&tv_tables[72],T72TAB,T73TAB,T72COD);
    calc(&tv_tables[73],T73TAB,T74TAB,T73COD);
    calc(&tv_tables[74],T74TAB,T75TAB,T74COD);
    calc(&tv_tables[75],T75TAB,T76TAB,T75COD);
    calc(&tv_tables[76],T76TAB,T77TAB,T76COD);
    calc(&tv_tables[77],T77TAB,T78TAB,T77COD);
    calc(&tv_tables[78],T78TAB,T79TAB,T78COD);
    calc(&tv_tables[79],T79TAB,T80TAB,T79COD);
    calc(&tv_tables[80],T80TAB,T81TAB,T80COD);
    calc(&tv_tables[81],T81TAB,T82TAB,T81COD);
    calc(&tv_tables[82],T82TAB,T83TAB,T82COD);
    calc(&tv_tables[83],T83TAB,T84TAB,T83COD);
    calc(&tv_tables[84],T84TAB,T85TAB,T84COD);
    calc(&tv_tables[85],T85TAB,T86TAB,T85COD);
    calc(&tv_tables[86],T86TAB,T87TAB,T86COD);
    calc(&tv_tables[87],T87TAB,T88TAB,T87COD);
    calc(&tv_tables[88],T88TAB,T89TAB,T88COD);
    calc(&tv_tables[89],T89TAB,T90TAB,T89COD);
    calc(&tv_tables[90],T90TAB,T91TAB,T90COD);
    calc(&tv_tables[91],T91TAB,T92TAB,T91COD);
    calc(&tv_tables[92],T92TAB,T93TAB,T92COD);
    calc(&tv_tables[93],T93TAB,T94TAB,T93COD);
    calc(&tv_tables[94],T94TAB,T95TAB,T94COD);
    calc(&tv_tables[95],T95TAB,T96TAB,T95COD);
    calc(&tv_tables[96],T96TAB,T97TAB,T96COD);
    calc(&tv_tables[97],T97TAB,T98TAB,T97COD);
    calc(&tv_tables[98],T98TAB,T99TAB,T98COD);
    calc(&tv_tables[99],T99TAB,T100TAB,T99COD);
    calc(&tv_tables[100],T100TAB,T101TAB,T100COD);
    calc(&tv_tables[101],T101TAB,T102TAB,T101COD);
    calc(&tv_tables[102],T102TAB,T103TAB,T102COD);
    calc(&tv_tables[103],T103TAB,T104TAB,T103COD);
    calc(&tv_tables[104],T104TAB,T105TAB,T104COD);
    calc(&tv_tables[105],T105TAB,T106TAB,T105COD);
    calc(&tv_tables[106],T106TAB,T107TAB,T106COD);
    calc(&tv_tables[107],T107TAB,T108TAB,T107COD);
    calc(&tv_tables[108],T108TAB,T109TAB,T108COD);
    calc(&tv_tables[109],T109TAB,T110TAB,T109COD);
    calc(&tv_tables[110],T110TAB,T111TAB,T110COD);
    calc(&tv_tables[111],T111TAB,T112TAB,T111COD);
    calc(&tv_tables[112],T112TAB,T113TAB,T112COD);
    calc(&tv_tables[113],T113TAB,T114TAB,T113COD);
    calc(&tv_tables[114],T114TAB,T115TAB,T114COD);
    calc(&tv_tables[115],T115TAB,T116TAB,T115COD);
    calc(&tv_tables[116],T116TAB,T117TAB,T116COD);
    calc(&tv_tables[117],T117TAB,T118TAB,T117COD);
    calc(&tv_tables[118],T118TAB,T118END,T118COD);
    calc(&vcr_tables[0],V00TAB,V01TAB,V00COD);
    calc(&vcr_tables[1],V01TAB,V02TAB,V01COD);
    calc(&vcr_tables[2],V02TAB,V03TAB,V02COD);
    calc(&vcr_tables[3],V03TAB,V04TAB,V03COD);
    calc(&vcr_tables[4],V04TAB,V05TAB,V04COD);
    calc(&vcr_tables[5],V05TAB,V06TAB,V05COD);
    calc(&vcr_tables[6],V06TAB,V07TAB,V06COD);
    calc(&vcr_tables[7],V07TAB,V08TAB,V07COD);
    calc(&vcr_tables[8],V08TAB,V09TAB,V08COD);
    calc(&vcr_tables[9],V09TAB,V10TAB,V09COD);
    calc(&vcr_tables[10],V10TAB,V11TAB,V10COD);
    calc(&vcr_tables[11],V11TAB,V12TAB,V11COD);
    calc(&vcr_tables[12],V12TAB,V13TAB,V12COD);
    calc(&vcr_tables[13],V13TAB,V14TAB,V13COD);
    calc(&vcr_tables[14],V14TAB,V15TAB,V14COD);
    calc(&vcr_tables[15],V15TAB,V16TAB,V15COD);
    calc(&vcr_tables[16],V16TAB,V17TAB,V16COD);
    calc(&vcr_tables[17],V17TAB,V18TAB,V17COD);
    calc(&vcr_tables[18],V18TAB,V19TAB,V18COD);
    calc(&vcr_tables[19],V19TAB,V20TAB,V19COD);
    calc(&vcr_tables[20],V20TAB,V21TAB,V20COD);
    calc(&vcr_tables[21],V21TAB,V22TAB,V21COD);
    calc(&vcr_tables[22],V22TAB,V23TAB,V22COD);
    calc(&vcr_tables[23],V23TAB,V24TAB,V23COD);
    calc(&vcr_tables[24],V24TAB,V25TAB,V24COD);
    calc(&vcr_tables[25],V25TAB,V26TAB,V25COD);
    calc(&vcr_tables[26],V26TAB,V27TAB,V26COD);
    calc(&vcr_tables[27],V27TAB,V28TAB,V27COD);
    calc(&vcr_tables[28],V28TAB,V29TAB,V28COD);
    calc(&vcr_tables[29],V29TAB,V30TAB,V29COD);
    calc(&vcr_tables[30],V30TAB,V31TAB,V30COD);
    calc(&vcr_tables[31],V31TAB,V32TAB,V31COD);
    calc(&vcr_tables[32],V32TAB,V33TAB,V32COD);
    calc(&vcr_tables[33],V33TAB,V34TAB,V33COD);
    calc(&vcr_tables[34],V34TAB,V35TAB,V34COD);
    calc(&vcr_tables[35],V35TAB,V36TAB,V35COD);
    calc(&vcr_tables[36],V36TAB,V37TAB,V36COD);
    calc(&vcr_tables[37],V37TAB,V38TAB,V37COD);
    calc(&vcr_tables[38],V38TAB,V39TAB,V38COD);
    calc(&vcr_tables[39],V39TAB,V40TAB,V39COD);
    calc(&vcr_tables[40],V40TAB,V41TAB,V40COD);
    calc(&vcr_tables[41],V41TAB,V42TAB,V41COD);
    calc(&vcr_tables[42],V42TAB,V43TAB,V42COD);
    calc(&vcr_tables[43],V43TAB,V44TAB,V43COD);
    calc(&vcr_tables[44],V44TAB,V45TAB,V44COD);
    calc(&vcr_tables[45],V45TAB,V46TAB,V45COD);
    calc(&vcr_tables[46],V46TAB,V47TAB,V46COD);
    calc(&vcr_tables[47],V47TAB,V48TAB,V47COD);
    calc(&vcr_tables[48],V48TAB,V49TAB,V48COD);
    calc(&vcr_tables[49],V49TAB,V50TAB,V49COD);
    calc(&vcr_tables[50],V50TAB,V51TAB,V50COD);
    calc(&vcr_tables[51],V51TAB,V52TAB,V51COD);
    calc(&vcr_tables[52],V52TAB,V53TAB,V52COD);
    calc(&vcr_tables[53],V53TAB,V54TAB,V53COD);
    calc(&vcr_tables[54],V54TAB,V55TAB,V54COD);
    calc(&vcr_tables[55],V55TAB,V56TAB,V55COD);
    calc(&vcr_tables[56],V56TAB,V57TAB,V56COD);
    calc(&vcr_tables[57],V57TAB,V58TAB,V57COD);
    calc(&vcr_tables[58],V58TAB,V59TAB,V58COD);
    calc(&vcr_tables[59],V59TAB,V60TAB,V59COD);
    calc(&vcr_tables[60],V60TAB,V61TAB,V60COD);
    calc(&vcr_tables[61],V61TAB,V62TAB,V61COD);
    calc(&vcr_tables[62],V62TAB,V63TAB,V62COD);
    calc(&vcr_tables[63],V63TAB,V64TAB,V63COD);
    calc(&vcr_tables[64],V64TAB,V65TAB,V64COD);
    calc(&vcr_tables[65],V65TAB,V66TAB,V65COD);
    calc(&vcr_tables[66],V66TAB,V67TAB,V66COD);
    calc(&vcr_tables[67],V67TAB,V68TAB,V67COD);
    calc(&vcr_tables[68],V68TAB,V69TAB,V68COD);
    calc(&vcr_tables[69],V69TAB,V70TAB,V69COD);
    calc(&vcr_tables[70],V70TAB,V71TAB,V70COD);
    calc(&vcr_tables[71],V71TAB,V72TAB,V71COD);
    calc(&vcr_tables[72],V72TAB,V73TAB,V72COD);
    calc(&vcr_tables[73],V73TAB,V74TAB,V73COD);
    calc(&vcr_tables[74],V74TAB,V75TAB,V74COD);
    calc(&vcr_tables[75],V75TAB,V76TAB,V75COD);
    calc(&vcr_tables[76],V76TAB,V77TAB,V76COD);
    calc(&vcr_tables[77],V77TAB,V78TAB,V77COD);
    calc(&vcr_tables[78],V78TAB,V79TAB,V78COD);
    calc(&vcr_tables[79],V79TAB,V80TAB,V79COD);
    calc(&vcr_tables[80],V80TAB,V80END,V80COD);
    calc(&cable_tables[0],C00TAB,C01TAB,C00COD);
    calc(&cable_tables[1],C01TAB,C02TAB,C01COD);
    calc(&cable_tables[2],C02TAB,C03TAB,C02COD);
    calc(&cable_tables[3],C03TAB,C04TAB,C03COD);
    calc(&cable_tables[4],C04TAB,C05TAB,C04COD);
    calc(&cable_tables[5],C05TAB,C06TAB,C05COD);
    calc(&cable_tables[6],C06TAB,C07TAB,C06COD);
    calc(&cable_tables[7],C07TAB,C08TAB,C07COD);
    calc(&cable_tables[8],C08TAB,C09TAB,C08COD);
    calc(&cable_tables[9],C09TAB,C10TAB,C09COD);
    calc(&cable_tables[10],C10TAB,C11TAB,C10COD);
    calc(&cable_tables[11],C11TAB,C12TAB,C11COD);
    calc(&cable_tables[12],C12TAB,C13TAB,C12COD);
    calc(&cable_tables[13],C13TAB,C14TAB,C13COD);
    calc(&cable_tables[14],C14TAB,C15TAB,C14COD);
    calc(&cable_tables[15],C15TAB,C16TAB,C15COD);
    calc(&cable_tables[16],C16TAB,C17TAB,C16COD);
    calc(&cable_tables[17],C17TAB,C18TAB,C17COD);
    calc(&cable_tables[18],C18TAB,C19TAB,C18COD);
    calc(&cable_tables[19],C19TAB,C20TAB,C19COD);
    calc(&cable_tables[20],C20TAB,C21TAB,C20COD);
    calc(&cable_tables[21],C21TAB,C22TAB,C21COD);
    calc(&cable_tables[22],C22TAB,C23TAB,C22COD);
    calc(&cable_tables[23],C23TAB,C24TAB,C23COD);
    calc(&cable_tables[24],C24TAB,C25TAB,C24COD);
    calc(&cable_tables[25],C25TAB,C26TAB,C25COD);
    calc(&cable_tables[26],C26TAB,C27TAB,C26COD);
    calc(&cable_tables[27],C27TAB,C28TAB,C27COD);
    calc(&cable_tables[28],C28TAB,C29TAB,C28COD);
    calc(&cable_tables[29],C29TAB,C30TAB,C29COD);
    calc(&cable_tables[30],C30TAB,C31TAB,C30COD);
    calc(&cable_tables[31],C31TAB,C32TAB,C31COD);
    calc(&cable_tables[32],C32TAB,C33TAB,C32COD);
    calc(&cable_tables[33],C33TAB,C34TAB,C33COD);
    calc(&cable_tables[34],C34TAB,C35TAB,C34COD);
    calc(&cable_tables[35],C35TAB,C36TAB,C35COD);
    calc(&cable_tables[36],C36TAB,C37TAB,C36COD);
    calc(&cable_tables[37],C37TAB,C38TAB,C37COD);
    calc(&cable_tables[38],C38TAB,C39TAB,C38COD);
    calc(&cable_tables[39],C39TAB,C40TAB,C39COD);
    calc(&cable_tables[40],C40TAB,C41TAB,C40COD);
    calc(&cable_tables[41],C41TAB,C42TAB,C41COD);
    calc(&cable_tables[42],C42TAB,C43TAB,C42COD);
    calc(&cable_tables[43],C43TAB,C44TAB,C43COD);
    calc(&cable_tables[44],C44TAB,C45TAB,C44COD);
    calc(&cable_tables[45],C45TAB,C46TAB,C45COD);
    calc(&cable_tables[46],C46TAB,C47TAB,C46COD);
    calc(&cable_tables[47],C47TAB,C48TAB,C47COD);
    calc(&cable_tables[48],C48TAB,C49TAB,C48COD);
    calc(&cable_tables[49],C49TAB,C50TAB,C49COD);
    calc(&cable_tables[50],C50TAB,C51TAB,C50COD);
    calc(&cable_tables[51],C51TAB,C52TAB,C51COD);
    calc(&cable_tables[52],C52TAB,C53TAB,C52COD);
    calc(&cable_tables[53],C53TAB,C54TAB,C53COD);
    calc(&cable_tables[54],C54TAB,C55TAB,C54COD);
    calc(&cable_tables[55],C55TAB,C56TAB,C55COD);
    calc(&cable_tables[56],C56TAB,C57TAB,C56COD);
    calc(&cable_tables[57],C57TAB,C58TAB,C57COD);
    calc(&cable_tables[58],C58TAB,C59TAB,C58COD);
    calc(&cable_tables[59],C59TAB,C60TAB,C59COD);
    calc(&cable_tables[60],C60TAB,C61TAB,C60COD);
    calc(&cable_tables[61],C61TAB,C62TAB,C61COD);
    calc(&cable_tables[62],C62TAB,C63TAB,C62COD);
    calc(&cable_tables[63],C63TAB,C64TAB,C63COD);
    calc(&cable_tables[64],C64TAB,C65TAB,C64COD);
    calc(&cable_tables[65],C65TAB,C66TAB,C65COD);
    calc(&cable_tables[66],C66TAB,C67TAB,C66COD);
    calc(&cable_tables[67],C67TAB,C67END,C67COD);
    calc(&sat_tables[0],S00TAB,S01TAB,S00COD);
    calc(&sat_tables[1],S01TAB,S02TAB,S01COD);
    calc(&sat_tables[2],S02TAB,S03TAB,S02COD);
    calc(&sat_tables[3],S03TAB,S04TAB,S03COD);
    calc(&sat_tables[4],S04TAB,S05TAB,S04COD);
    calc(&sat_tables[5],S05TAB,S06TAB,S05COD);
    calc(&sat_tables[6],S06TAB,S07TAB,S06COD);
    calc(&sat_tables[7],S07TAB,S08TAB,S07COD);
    calc(&sat_tables[8],S08TAB,S09TAB,S08COD);
    calc(&sat_tables[9],S09TAB,S10TAB,S09COD);
    calc(&sat_tables[10],S10TAB,S11TAB,S10COD);
    calc(&sat_tables[11],S11TAB,S11END,S11COD);
}
