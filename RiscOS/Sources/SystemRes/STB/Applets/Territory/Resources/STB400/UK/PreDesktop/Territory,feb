| Set-up the component which installs specific territory support
Set NetTime$DST European
Set STB$TimeZone "0:0"
Set STB$Territory UK

Run STBChoices:Territory.Config
Run STBResources:!Territory

| NetTime does not necessarily set the time immediately, so we will use the RTime utilitiy (once only) here
If "<STB$InitialTimeServer>" <> "" Then Set InetDBase$Path Root:!STBBoot.Resources.!Internet.files.
If "<STB$InitialTimeServer>" <> "" Then Do Run Root:!STBBoot.Resources.!Internet.bin.RTime -host <STB$InitialTimeServer>

| If we got a DHCP response or the <STB$TimeServer> system variable exists, get the time from a network time server.
| If the <STB$TimeZone> system variable exists, then set the STB time zone.
If "<STB$TimeServer>"  <> "" Then Set NetTime$Server <STB$TimeServer>
If "<STB$NTPServer>"   <> "" AND "<Inet$NTPServer>" = "" Then Set Inet$NTPServer <STB$NTPServer>
If "<STB$TimeZone>"    <> "" Then Do Configure TimeZone <STB$TimeZone>
SetEval NetTime_Kick 1
RMEnsure NetTime 0.23 SetEval NetTime_Kick 0
RMCheck  NetTime 0.23 Network.NetTime
RMEnsure NetTime 0.23 NetTime_Kick
If NetTime_Kick Then NetTime_Kick
NetTime_Kick
UnSet NetTime_Kick
