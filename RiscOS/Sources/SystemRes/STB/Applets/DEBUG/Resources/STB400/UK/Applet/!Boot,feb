| >!DEBUG.!Boot
| Copyright © Pace Micro Technology plc, 2000
| All rights reserved.

If "<OS$Version>"  = "" Then Obey
If "<Debug$State>" = "" Then Obey

Set STBDebug$Dir  <Obey$Dir>
Set STBDebug$Path <STBDebug$Dir>.

IconSprites STBDebug:Sprites22
RMEnsure DragASprite  0.11 RMLoad System:Modules.DragASprit
RMEnsure DragAnObject 0.04 RMLoad System:Modules.DragAnObj
RMEnsure MemInfo      0.05 RMLoad System:Modules.MemInfo

| Make JavaScript error messages more meaningful
Set NCFresco$ConfigJavascriptErrorboxStyle 1

| Set some useful WWW browser behaviour
SetMacro Alias$URLOpen_COMMAND /STBDebug:Command %*0
SetMacro Alias$URLOpen_DiffNVRAM /STBDebug:!DiffNVRAM %%*0
SetMacro Alias$URLOpen_GOS GOS|M||%%*0
SetMacro Alias$URLOpen_SetTime /STBDebug:SetTime -time <34>%%*0<34>
SetMacro Alias$URLOpen_StartDebug /STBDebug:!AHVCdebug %%*0
SetMacro Alias$URLOpen_ShowDebug /STBDebug:!PDebugTW %%*0
SetMacro Alias$URLOpen_CMOSDump /STBDebug:CMOSdump %%*0
SetMacro Alias$URLOpen_CMOSDiff /STBDebug:CMOSdiff %%*0
SetMacro Alias$URLOpen_TaskManager /STBDebug:OpenTMWin %%*0

If OS$Version > 220 Then SetMacro Alias$URLOpen_Dir Filer_OpenDir %%*1
If "<Debug$State>" = "High" Then Set NCFresco$Welcome "Cache:images.STBInfo/html"

| Enable extra RiscOS keyboard mappings in NCFresco (ie: Ctrl-F2 to quit)
If "<Debug$State>" = "High" Then Set NCFresco$ConfigModeKeyboard 0

| Increase the auto repeat a little
If "<Debug$State>" = "High" Then Fx 12 4
If "<Debug$State>" = "High" Then Fx 11 22

| Enable copy mode
Fx 4 0

| Load a debug version of the TrapError module
Set TrapError$File <Choices$Write>.TrapErr

| Set the Java and NCFresco error paths
If "<Debug$State>" = "High" AND "<NCFresco$Errors>" = "" Then Set NCFresco$Errors 2><Choices$Write>.NCFErr
If "<Debug$State>" = "High" AND "<Java$Out>" = "" Then Set Java$Out <Choices$Write>.javaout
If "<Debug$State>" = "High" AND "<Java$Err>" = "" Then Set Java$Err <Choices$Write>.javaerr

| Start the STBSummary debugging program
If "<Debug$State>" = "High" Then Run STBResources:!STBSummry
