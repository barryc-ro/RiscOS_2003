; generated by Norcroft RISC OS ARM C vsn 5.00d (Acorn Computers Ltd) <alpha test> [Aug 18 1994]

        AREA |C$$code|, CODE, READONLY
|x$codeseg|

        DCB     &53,&65,&6e,&64
        DCB     &00,&00,&00,&00
        DCD     &ff000008

        IMPORT  __rt_stkovf_split_small
        IMPORT  strlen
        IMPORT  xeconet_do_transmit
Send
        MOV      ip,sp
        STMDB    sp!,{a1,v1,v2,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        MOV      v1,a1
        SUB      sp,sp,#4
        LDR      v2,[pc, #L000084-.-8]
|L00002c.J4.Send|
        MOV      a4,#0
        MOV      a3,sp
        MOV      a2,#0
        MOV      a1,#1
        STMDB    sp!,{a1-a4}
        MOV      a1,v1
        BL       strlen
        MOV      a4,a1
        MOV      a3,v1
        STMDB    sp!,{a3,a4}
        MOV      a2,#&f0
        MOV      a1,#&81
        ADD      a4,v2,#&c
        LDMIA    a4,{a3,a4}
        BL       xeconet_do_transmit
        ADD      sp,sp,#&18
        TEQ      a1,#0
        BNE      |L000080.J12.Send|
        LDR      a2,[sp,#0]
        TEQ      a2,#0
        BNE      |L00002c.J4.Send|
|L000080.J12.Send|
        LDMDB    fp,{v1,v2,fp,sp,pc}^
L000084
        DCD     |x$dataseg|

        DCB     &74,&72,&61,&63
        DCB     &65,&5f,&69,&6e
        DCB     &69,&74,&69,&61
        DCB     &6c,&69,&73,&65
        DCB     &00,&00,&00,&00
        DCD     &ff000014

        IMPORT  getenv
        IMPORT  memcpy
        IMPORT  strcpy
        IMPORT  xosfind_openout
        IMPORT  xosfile_set_type
        IMPORT  xeconet_read_station_number
        EXPORT  trace_initialise
trace_initialise
        MOV      ip,sp
        STMDB    sp!,{a1,v1-v3,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        SUB      sp,sp,#&54
        MOV      v2,#0
        BL       getenv
        TEQ      a1,#0
        BNE      |L0000e0.J4.trace_initialise|
        MOV      a1,sp
        ADD      a2,pc,#L0000dc-.-8
        MOV      a3,#2
        BL       memcpy
        B        |L0000ec.J6.trace_initialise|
L0000dc
        DCB     &74,&00,&00,&00
|L0000e0.J4.trace_initialise|
        MOV      a2,a1
        MOV      a1,sp
        BL       strcpy
|L0000ec.J6.trace_initialise|
        LDRB     a1,[sp,#0]
        ADD      v3,sp,#1
        LDR      v1,[pc, #L000084-.-8]
        CMP      a1,#&65
        BEQ      |L0001ac.J17.trace_initialise|
        BGT      |L000138.J18.trace_initialise|
        CMP      a1,#&4e
        BEQ      |L00019c.J15.trace_initialise|
        BGT      |L000124.J21.trace_initialise|
        TEQ      a1,#&45
        BEQ      |L0001ac.J17.trace_initialise|
        TEQ      a1,#&46
        BNE      |L0001d0.J34.trace_initialise|
        B        |L000160.J16.trace_initialise|
|L000124.J21.trace_initialise|
        TEQ      a1,#&53
        BEQ      |L0001a4.J14.trace_initialise|
        TEQ      a1,#&54
        BNE      |L0001d0.J34.trace_initialise|
        B        |L000158.J13.trace_initialise|
|L000138.J18.trace_initialise|
        TEQ      a1,#&66
        BEQ      |L000160.J16.trace_initialise|
        TEQ      a1,#&6e
        BEQ      |L00019c.J15.trace_initialise|
        TEQ      a1,#&73
        BEQ      |L0001a4.J14.trace_initialise|
        TEQ      a1,#&74
        BNE      |L0001d0.J34.trace_initialise|
|L000158.J13.trace_initialise|
        MOV      a1,#2
        B        |L0001cc.J41.trace_initialise|
|L000160.J16.trace_initialise|
        MOV      a2,v3
        LDR      a4,[pc, #L000084-.-8]
        MOV      a3,#0
        MOV      a1,#&f
        BL       xosfind_openout
        MOVS     v2,a1
        BNE      |L0001d0.J34.trace_initialise|
        MOV      a1,v3
        MOV      a2,#&1000
        SUB      a2,a2,#1
        BL       xosfile_set_type
        MOVS     v2,a1
        MOVEQ    a1,#1
        BEQ      |L0001cc.J41.trace_initialise|
        B        |L0001d0.J34.trace_initialise|
|L00019c.J15.trace_initialise|
        MOV      a1,#3
        B        |L0001cc.J41.trace_initialise|
|L0001a4.J14.trace_initialise|
        MOV      a1,#0
        B        |L0001cc.J41.trace_initialise|
|L0001ac.J17.trace_initialise|
        MOV      a1,v3
        LDR      a4,[pc, #L0001dc-.-8]
        LDR      a3,[pc, #L0001e0-.-8]
        MOV      a2,#0
        BL       xeconet_read_station_number
        MOVS     v2,a1
        BNE      |L0001d0.J34.trace_initialise|
        MOV      a1,#4
|L0001cc.J41.trace_initialise|
        STR      a1,[v1,#4]
|L0001d0.J34.trace_initialise|
        MOV      a1,v2
        STR      a1,[v1,#8]!
        LDMDB    fp,{v1-v3,fp,sp,pc}^
L0001dc
        DCD     |x$dataseg|+&10
L0001e0
        DCD     |x$dataseg|+&c

        DCB     &74,&72,&61,&63
        DCB     &65,&5f,&74,&65
        DCB     &72,&6d,&69,&6e
        DCB     &61,&74,&65,&00
        DCD     &ff000010

        IMPORT  xosfind_close
        EXPORT  trace_terminate
trace_terminate
        MOV      ip,sp
        STMDB    sp!,{v1,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        LDR      v1,[pc, #L000084-.-8]
        LDR      a1,[v1,#4]
        TEQ      a1,#1
        LDREQB   a1,[v1,#0]
        BLEQ     xosfind_close
        LDR      a1,[v1,#8]!
        LDMDB    fp,{v1,fp,sp,pc}^

        DCB     &74,&72,&61,&63
        DCB     &65,&5f,&66,&00
        DCD     &ff000008

        IMPORT  __rt_stkovf_split_big
        IMPORT  sprintf
        IMPORT  __assert
        IMPORT  _printf
        IMPORT  xosgbpb_write
        IMPORT  xosargs_ensure
        IMPORT  xhostfs_writec
        IMPORT  vsprintf
        EXPORT  trace_f
trace_f
        MOV      ip,sp
        STMDB    sp!,{a1-a4}
        STMDB    sp!,{v1-v4,fp,ip,lr,pc}
        SUB      fp,ip,#&14
        SUB      ip,sp,#&228
        CMP      ip,sl
        BLLT     __rt_stkovf_split_big
        SUB      sp,sp,#&208
        MOV      v4,#0
        LDR      a1,[fp,#&c]
        TEQ      a1,#0
        BEQ      |L000274.J5.trace_f|
        BL       strlen
        CMP      a1,#0
        MOVHI    v3,#1
        BHI      |L000278.J4.trace_f|
|L000274.J5.trace_f|
        MOV      v3,v4
|L000278.J4.trace_f|
        LDR      v2,[pc, #L000084-.-8]
        LDR      a1,[v2,#8]
        TEQ      a1,#0
        BNE      |L00057c.J97.trace_f|
        STRB     v4,[sp,#&200]
        LDR      a3,[fp,#4]
        TEQ      a3,#0
        BEQ      |L0003c0.J10.trace_f|
        TEQ      v3,#0
        ADDEQ    a2,pc,#L000314-.-8
        ADDNE    a2,pc,#L00031c-.-8
        MOV      a1,sp
        LDR      a4,[fp,#8]
        BL       sprintf
        LDRB     a1,[sp,#&200]
        TEQ      a1,#0
        BEQ      |L0002cc.J15.trace_f|
        ADD      a2,pc,#L000324-.-8
        ADD      a1,pc,#L00033c-.-8
        MOV      a3,#&7d
        BL       __assert
|L0002cc.J15.trace_f|
        MOV      v1,v2
        LDR      a1,[v2,#4]
        TEQ      a1,#0
        MOVEQ    a2,sp
        ADDEQ    a1,pc,#L00035c-.-8
        BLEQ     _printf
        BEQ      |L0003c0.J10.trace_f|
        TEQ      a1,#1
        BEQ      |L000360.J21.trace_f|
        TEQ      a1,#2
        BEQ      |L000394.J20.trace_f|
        TEQ      a1,#4
        BNE      |L0003c0.J10.trace_f|
        MOV      a1,sp
        BL       Send
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
        B        |L0003c0.J10.trace_f|
L000314
        DCB     &25,&73,&2c,&25
        DCB     &64,&0a,&0d,&00
L00031c
        DCB     &25,&73,&2c,&25
        DCB     &64,&3a,&20,&00
L000324
        DCB     &3c,&53,&75,&70
        DCB     &70,&6f,&72,&74
        DCB     &24,&44,&69,&72
        DCB     &3e,&2e,&63,&2e
        DCB     &74,&72,&61,&63
        DCB     &65,&00,&00,&00
L00033c
        DCB     &73,&20,&5b,&54
        DCB     &52,&41,&43,&45
        DCB     &5f,&42,&55,&46
        DCB     &46,&45,&52,&5f
        DCB     &53,&49,&5a,&45
        DCB     &5d,&20,&3d,&3d
        DCB     &20,&27,&5c,&30
        DCB     &27,&00,&00,&00
L00035c
        DCB     &25,&73,&00,&00
|L000360.J21.trace_f|
        MOV      a1,sp
        BL       strlen
        MOV      a3,a1
        MOV      a2,sp
        LDRB     a1,[v1,#0]
        MOV      a4,#0
        BL       xosgbpb_write
        TEQ      a1,#0
        LDREQB   a1,[v1,#0]
        BLEQ     xosargs_ensure
        TEQEQ    a1,#0
        BNE      |L000574.J29.trace_f|
        B        |L0003c0.J10.trace_f|
|L000394.J20.trace_f|
        MOV      v1,sp
        LDRB     a1,[sp,#0]
        TEQ      a1,#0
        BEQ      |L0003c0.J10.trace_f|
|L0003a4.J32.trace_f|
        LDRB     a1,[v1,#0]
        BL       xhostfs_writec
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
        LDRB     a1,[v1,#1]!
        TEQ      a1,#0
        BNE      |L0003a4.J32.trace_f|
|L0003c0.J10.trace_f|
        TEQ      v3,#0
        BEQ      |L00057c.J97.trace_f|
        STRB     v4,[sp,#&200]
        ADD      a1,fp,#&10
        STR      a1,[sp,#&204]
        ADD      a3,sp,#&204
        MOV      a1,sp
        LDR      a2,[fp,#&c]
        BL       vsprintf
        MVN      a1,#&ff
        STR      a1,[sp,#&204]
        LDRB     a1,[sp,#&200]
        TEQ      a1,#0
        BEQ      |L000408.J42.trace_f|
        SUB      a2,pc,#.+8-L000324
        SUB      a1,pc,#.+8-L00033c
        MOV      a3,#&9e
        BL       __assert
|L000408.J42.trace_f|
        MOV      v1,v2
        LDR      a1,[v2,#4]
        TEQ      a1,#0
        MOVEQ    a2,sp
        SUBEQ    a1,pc,#.+8-L00035c
        BLEQ     _printf
        BEQ      |L00057c.J97.trace_f|
        TEQ      a1,#1
        BEQ      |L000450.J48.trace_f|
        TEQ      a1,#2
        BEQ      |L000484.J47.trace_f|
        TEQ      a1,#4
        BNE      |L00057c.J97.trace_f|
        MOV      a1,sp
        BL       Send
        TEQ      a1,#0
        BEQ      |L00057c.J97.trace_f|
        B        |L000574.J29.trace_f|
|L000450.J48.trace_f|
        MOV      a1,sp
        BL       strlen
        MOV      a3,a1
        MOV      a2,sp
        LDRB     a1,[v1,#0]
        MOV      a4,#0
        BL       xosgbpb_write
        TEQ      a1,#0
        LDREQB   a1,[v1,#0]
        BLEQ     xosargs_ensure
        TEQEQ    a1,#0
        BEQ      |L00057c.J97.trace_f|
        B        |L000574.J29.trace_f|
|L000484.J47.trace_f|
        MOV      v1,sp
        LDRB     a1,[sp,#0]
        TEQ      a1,#0
        BEQ      |L00057c.J97.trace_f|
|L000494.J58.trace_f|
        LDRB     a1,[v1,#0]
        CMP      a1,#&20
        BLT      |L0004c8.J61.trace_f|
        BL       xhostfs_writec
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
        LDRB     a1,[v1,#0]
        TEQ      a1,#&5c
        BNE      |L000550.J69.trace_f|
        BL       xhostfs_writec
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
        B        |L000550.J69.trace_f|
|L0004c8.J61.trace_f|
        TEQ      a1,#&a
        BNE      |L0004f0.J70.trace_f|
        MOV      a1,#&a
        BL       xhostfs_writec
        TEQ      a1,#0
        MOVEQ    a1,#&d
        BLEQ     xhostfs_writec
        TEQEQ    a1,#0
        BNE      |L000574.J29.trace_f|
        B        |L000550.J69.trace_f|
|L0004f0.J70.trace_f|
        MOV      a1,#&5c
        BL       xhostfs_writec
        TEQ      a1,#0
        MOVEQ    a1,#&78
        BLEQ     xhostfs_writec
        TEQEQ    a1,#0
        BNE      |L000574.J29.trace_f|
        LDRB     a1,[v1,#0]
        MOV      a2,a1,LSR #4
        ADD      a1,pc,#L000560-.-8
        LDRB     a1,[a1,a2]
        BL       xhostfs_writec
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
        LDRB     a2,[v1,#0]
        CMP      a2,#0
        RSBLT    a2,a2,#0
        AND      a2,a2,#&f
        RSBLT    a2,a2,#0
        ADD      a1,pc,#L000560-.-8
        LDRB     a1,[a1,a2]
        BL       xhostfs_writec
        TEQ      a1,#0
        BNE      |L000574.J29.trace_f|
|L000550.J69.trace_f|
        LDRB     a1,[v1,#1]!
        TEQ      a1,#0
        BNE      |L000494.J58.trace_f|
        B        |L00057c.J97.trace_f|
L000560
        DCB     &30,&31,&32,&33
        DCB     &34,&35,&36,&37
        DCB     &38,&39,&41,&42
        DCB     &43,&44,&45,&46
        DCB     &00,&00,&00,&00
|L000574.J29.trace_f|
        TEQ      a1,#0
        STRNE    a1,[v2,#8]!
|L00057c.J97.trace_f|
        LDMDB    fp,{v1-v4,fp,sp,pc}^

        DCB     &74,&72,&61,&63
        DCB     &65,&5f,&77,&61
        DCB     &69,&74,&00,&00
        DCD     &ff00000c

        IMPORT  clock
        IMPORT  __rt_sdiv
        EXPORT  trace_wait
trace_wait
        MOV      ip,sp
        STMDB    sp!,{a1-a3,v1-v4,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        MOV      v2,a1
        MOV      v1,a2
        MOV      v3,a3
        BL       clock
        ADD      a2,v3,v3,LSL #3
        ADD      a2,a2,v3,LSL #4
        ADD      v3,a1,a2,LSL #2
        BL       clock
        SUB      a2,v3,a1
        CMP      a2,#0
        LDMLEDB  fp,{v1-v4,fp,sp,pc}^
        LDR      v4,[pc, #L000084-.-8]
|L0005d4.J4.trace_wait|
        LDR      a1,[v4,#4]
        TEQ      a1,#0
        TEQNE    a1,#1
        BEQ      |L000624.J7.trace_wait|
        TEQ      a1,#2
        BNE      |L000624.J7.trace_wait|
        MOV      a1,#&64
        BL       __rt_sdiv
        MOV      a4,a1
        STMDB    sp!,{a4}
        MOV      a2,v1
        MOV      a1,v2
        ADD      a3,pc,#L000638-.-8
        MOV      a4,#&a
        BL       trace_f
        ADD      sp,sp,#4
        MOV      a1,#&d
        BL       xhostfs_writec
        TEQ      a1,#0
        LDMNEDB  fp,{v1-v4,fp,sp,pc}^
|L000624.J7.trace_wait|
        BL       clock
        SUB      a2,v3,a1
        CMP      a2,#0
        BGT      |L0005d4.J4.trace_wait|
        LDMDB    fp,{v1-v4,fp,sp,pc}^
L000638
        DCB     &25,&2d,&2a,&64
        DCB     &00,&00,&00,&00

        AREA |C$$data|,DATA

|x$dataseg|

F
        DCD     &00000000

Trace
        DCD     &00000003

Error
        DCD     &00000000

S
        DCD     &00000000

N
        DCD     &00000000

        END
