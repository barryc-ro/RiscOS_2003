; generated by Norcroft RISC OS ARM C vsn 5.00d (Acorn Computers Ltd) <alpha test> [Aug 18 1994]

        AREA |C$$code|, CODE, READONLY
|x$codeseg|

Set
        MOV      a2,#1
        STR      a2,[a1,#0]
        MOV      a1,#0
        MOVS     pc,lr

Clear
        MOV      a2,#0
        STR      a2,[a1,#0]
        MOV      a1,#0
        MOVS     pc,lr

        DCB     &53,&61,&76,&65
        DCB     &72,&00,&00,&00
        DCD     &ff000008

        IMPORT  __rt_stkovf_split_big
        IMPORT  xwimp_get_icon_state
        IMPORT  xos_byte
        IMPORT  xosfile_save_stamped
        IMPORT  xwimp_start_task
        IMPORT  riscos_error_lookup
        IMPORT  xfileraction_send_selected_directory
        IMPORT  xosgbpb_dir_entries
        IMPORT  xfileraction_send_selected_file
        IMPORT  strlen
        IMPORT  xfileractionsendstartoperation_copy
Saver
        MOV      ip,sp
        STMDB    sp!,{a1,a2,v1,v2,fp,ip,lr,pc}
        SUB      fp,ip,#4
        SUB      ip,sp,#&248
        CMP      ip,sl
        BLLT     __rt_stkovf_split_big
        SUB      sp,sp,#&228
        LDR      v2,[pc, #L0001a8-.-8]
        LDR      a1,[v2,#&c]
        STR      a1,[sp,#&200]
        MOV      a1,#7
        STR      a1,[sp,#&204]
        ADD      a1,sp,#&200
        BL       xwimp_get_icon_state
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        LDR      a1,[sp,#&218]
        TST      a1,#&200000
        BEQ      |L0000dc.J7.Saver|
        MOV      v1,#0
|L00007c.J9.Saver|
        ADD      a4,sp,#&1fc
        STMDB    sp!,{a4}
        MOV      a2,v1
        MOV      a4,#0
        MOV      a3,#0
        MOV      a1,#&a1
        BL       xos_byte
        ADD      sp,sp,#4
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        LDR      a1,[sp,#&1fc]
        ADD      a2,sp,#&108
        STRB     a1,[a2,v1]
        ADD      v1,v1,#1
        CMP      v1,#&f0
        BCC      |L00007c.J9.Saver|
        ADD      a4,sp,#&1f8
        ADD      a3,sp,#&108
        ADD      a1,pc,#L0001ac-.-8
        MOV      a2,#&f2
        ADD      a2,a2,#&f00
        BL       xosfile_save_stamped
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
|L0000dc.J7.Saver|
        LDR      a1,[v2,#&c]!
        STR      a1,[sp,#&200]
        MOV      a1,#8
        STR      a1,[sp,#&204]
        ADD      a1,sp,#&200
        BL       xwimp_get_icon_state
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        LDR      a2,[sp,#&218]
        TST      a2,#&200000
        BEQ      |L00022c.J40.Saver|
        MOV      a2,sp
        ADD      a1,pc,#L0001e4-.-8
        BL       xwimp_start_task
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        LDR      a1,[sp,#0]
        TEQ      a1,#0
        ADDEQ    a2,pc,#L0001f4-.-8
        MOVEQ    a1,#&34
        BLEQ     riscos_error_lookup
        BEQ      |L00022c.J40.Saver|
        ADD      a2,pc,#L0001fc-.-8
        BL       xfileraction_send_selected_directory
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        MOV      a1,#0
        STR      a1,[sp,#&1f8]
|L00014c.J25.Saver|
        ADD      a4,sp,#&1f8
        MOV      a3,#0
        ADD      a2,pc,#L00020c-.-8
        MOV      a1,#1
        ADD      a1,a1,#&100
        STMDB    sp!,{a1-a4}
        LDR      a4,[sp,#&208]
        ADD      a2,sp,#&14
        ADD      a1,pc,#L0001fc-.-8
        MOV      a3,#1
        BL       xosgbpb_dir_entries
        ADD      sp,sp,#&10
        TEQ      a1,#0
        BNE      |L00022c.J40.Saver|
        LDR      a1,[sp,#&1f8]
        CMN      a1,#1
        BEQ      |L000210.J31.Saver|
        ADD      a2,sp,#4
        LDR      a1,[sp,#0]
        BL       xfileraction_send_selected_file
        TEQ      a1,#0
        BEQ      |L00014c.J25.Saver|
        B        |L00022c.J40.Saver|
L0001a8
        DCD     |x$dataseg|
L0001ac
        DCB     &42,&6f,&6f,&74
        DCB     &3a,&4d,&63,&68
        DCB     &43,&6f,&6e,&66
        DCB     &69,&67,&2e,&3c
        DCB     &42,&6f,&6f,&74
        DCB     &24,&55,&6e,&69
        DCB     &71,&75,&65,&3e
        DCB     &2e,&21,&52,&4f
        DCB     &3c,&42,&6f,&6f
        DCB     &74,&24,&4f,&53
        DCB     &56,&65,&72,&73
        DCB     &69,&6f,&6e,&3e
        DCB     &43,&4d,&4f,&53
        DCB     &00,&00,&00,&00
L0001e4
        DCB     &46,&69,&6c,&65
        DCB     &72,&5f,&41,&63
        DCB     &74,&69,&6f,&6e
        DCB     &00,&00,&00,&00
L0001f4
        DCB     &4e,&6f,&57,&69
        DCB     &6d,&70,&00,&00
L0001fc
        DCB     &3c,&43,&68,&6f
        DCB     &69,&63,&65,&73
        DCB     &24,&44,&69,&72
        DCB     &3e,&00,&00,&00
L00020c
        DCB     &2a,&00,&00,&00
|L000210.J31.Saver|
        ADD      a1,pc,#L000230-.-8
        BL       strlen
        ADD      a4,a1,#1
        LDR      a1,[sp,#0]
        ADD      a3,pc,#L000230-.-8
        MOV      a2,#&1d
        BL       xfileractionsendstartoperation_copy
|L00022c.J40.Saver|
        LDMDB    fp,{v1,v2,fp,sp,pc}^
L000230
        DCB     &42,&6f,&6f,&74
        DCB     &3a,&4d,&63,&68
        DCB     &43,&6f,&6e,&66
        DCB     &69,&67,&2e,&3c
        DCB     &42,&6f,&6f,&74
        DCB     &24,&55,&6e,&69
        DCB     &71,&75,&65,&3e
        DCB     &00,&00,&00,&00

        DCB     &43,&6c,&6f,&73
        DCB     &65,&72,&00,&00
        DCD     &ff000008

        IMPORT  __rt_stkovf_split_small
        IMPORT  xwimp_get_caret_position
        IMPORT  saveas_close
        IMPORT  resource_delete_window
        IMPORT  xwimp_set_caret_position
Closer
        MOV      ip,sp
        STMDB    sp!,{a1,a2,v1,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        MOV      v1,a1
        SUB      sp,sp,#&18
        MOV      a1,sp
        BL       xwimp_get_caret_position
        TEQ      a1,#0
        MOVEQ    a2,v1
        MOVEQ    a1,#0
        BLEQ     saveas_close
        TEQEQ    a1,#0
        BNE      |L0002f8.J19.Closer|
        LDR      v1,[pc, #L0001a8-.-8]
        ADD      a2,v1,#&14
        LDMIA    a2,{a1,a2}
        BL       resource_delete_window
        TEQ      a1,#0
        BNE      |L0002f8.J19.Closer|
        LDR      a2,[sp,#0]
        LDR      a3,[v1,#&14]
        TEQ      a2,a3
        BNE      |L0002e4.J11.Closer|
        MOV      a4,#0
        MOV      a3,#0
        STMDB    sp!,{a3,a4}
        MVN      a2,#0
        LDR      a1,[v1,#&c]
        BL       xwimp_set_caret_position
        ADD      sp,sp,#8
        TEQ      a1,#0
        BNE      |L0002f8.J19.Closer|
|L0002e4.J11.Closer|
        LDR      a2,[v1,#0]
        TEQ      a2,#0
        MOVNE    a2,#1
        LDRNE    a3,[pc, #L0002fc-.-8]
        STRNE    a2,[a3,#0]
|L0002f8.J19.Closer|
        LDMDB    fp,{v1,fp,sp,pc}^
L0002fc
        IMPORT  application_quit
        DCD     application_quit

Quit
        MOV      a1,#1
        LDR      a2,[pc, #L0002fc-.-8]
        STR      a1,[a2,#0]
        MOV      a1,#0
        MOVS     pc,lr

        DCB     &53,&61,&76,&65
        DCB     &5f,&41,&73,&00
        DCD     &ff000008

        IMPORT  lookup
        IMPORT  resource_create_window
        IMPORT  xos_gs_trans
        IMPORT  saveas_open
Save_As
        MOV      ip,sp
        STMDB    sp!,{a1-a3,v1,fp,ip,lr,pc}
        SUB      fp,ip,#4
        SUB      ip,sp,#&150
        CMP      ip,sl
        BLLT     __rt_stkovf_split_big
        SUB      sp,sp,#&144
        MOV      a3,sp
        LDR      v1,[pc, #L0001a8-.-8]
        LDR      a1,[v1,#8]
        ADD      a2,pc,#L000430-.-8
        BL       lookup
        TEQ      a1,#0
        BNE      |L00042c.J17.Save_As|
        LDR      a3,[pc, #L000438-.-8]
        LDR      a2,[pc, #L00043c-.-8]
        LDR      a1,[sp,#0]
        BL       resource_create_window
        TEQ      a1,#0
        BNE      |L00042c.J17.Save_As|
        ADD      a4,sp,#4
        STMDB    sp!,{a4}
        ADD      a4,sp,#&c
        ADD      a2,sp,#&10
        SUB      a1,pc,#.+8-L000230
        MOV      a3,#&100
        BL       xos_gs_trans
        ADD      sp,sp,#4
        TEQ      a1,#0
        BNE      |L00042c.J17.Save_As|
        LDR      a1,[sp,#4]
        TST      a1,#&20000000
        ADDNE    a2,pc,#L000440-.-8
        MOVNE    a1,#&15
        BLNE     riscos_error_lookup
        BNE      |L00042c.J17.Save_As|
        MOV      a1,#0
        LDR      a2,[sp,#8]
        STRB     a1,[a2,#0]
        LDR      a2,[v1,#&14]!
        STR      a2,[sp,#&110]
        MOV      a2,#2
        STR      a2,[sp,#&114]
        MOV      a2,#3
        STR      a2,[sp,#&118]
        MOV      a2,#4
        STR      a2,[sp,#&11c]
        MOV      a2,#1
        STR      a2,[sp,#&120]
        ADD      a2,sp,#&124
        LDR      a3,[sp,#0]
        ADD      a3,a3,#8
        LDMIA    a3!,{a4,ip}
        STMIA    a2!,{a4,ip}
        LDMIA    a3,{a4,ip}
        STMIA    a2,{a4,ip}
        LDR      a2,[pc, #L000448-.-8]
        STR      a2,[sp,#&134]
        LDR      a2,[pc, #L00044c-.-8]
        STR      a2,[sp,#&138]
        ADD      a2,sp,#&c
        STR      a1,[sp,#&140]
        STR      a2,[sp,#&13c]
        LDR      a3,[pc, #L000450-.-8]
        ADD      a2,sp,#&110
        MOV      a1,#0
        BL       saveas_open
|L00042c.J17.Save_As|
        LDMDB    fp,{v1,fp,sp,pc}^
L000430
        DCB     &53,&61,&76,&65
        DCB     &41,&73,&00,&00
L000438
        DCD     main_saveas_data
L00043c
        DCD     main_saveas_w
L000440
        DCB     &42,&75,&66,&4f
        DCB     &46,&6c,&6f,&00
L000448
        DCD     Saver
L00044c
        DCD     Closer
L000450
        DCD     main_s

        DCB     &53,&74,&61,&72
        DCB     &74,&5f,&44,&69
        DCB     &61,&6c,&6f,&67
        DCB     &75,&65,&00,&00
        DCD     &ff000010

        IMPORT  xwimp_get_window_state
        IMPORT  xos_read_mode_variable
        IMPORT  xfslock_status
        IMPORT  icon_set_text
        IMPORT  xosreadsysinfo_machine_id
        IMPORT  svc_enter
        IMPORT  svc_exit
        IMPORT  xwimp_open_window
        IMPORT  callback_register
Start_Dialogue
        MOV      ip,sp
        STMDB    sp!,{v1-v6,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        SUB      sp,sp,#&68
        MOV      v2,#0
        ADD      a3,sp,#&64
        LDR      v3,[pc, #L0001a8-.-8]
        LDR      a1,[v3,#8]
        ADD      a2,pc,#L000880-.-8
        BL       lookup
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        LDR      a3,[pc, #L00088c-.-8]
        LDR      a2,[pc, #L000890-.-8]
        LDR      a1,[sp,#&64]
        BL       resource_create_window
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      v2,#1
        LDR      a1,[v3,#&c]
        STR      a1,[sp,#&20]
        ADD      a1,sp,#&20
        BL       xwimp_get_window_state
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        ADD      a3,sp,#&1c
        MOV      a4,#0
        MOV      a2,#&b
        MVN      a1,#0
        BL       xos_read_mode_variable
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        ADD      a3,sp,#&18
        MOV      a4,#0
        MOV      a2,#&c
        MVN      a1,#0
        BL       xos_read_mode_variable
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        ADD      a3,sp,#&14
        MOV      a4,#0
        MOV      a2,#4
        MVN      a1,#0
        BL       xos_read_mode_variable
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        ADD      a3,sp,#&10
        MOV      a4,#0
        MOV      a2,#5
        MVN      a1,#0
        BL       xos_read_mode_variable
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        LDR      a1,[sp,#&1c]
        ADD      a1,a1,#1
        LDR      a2,[sp,#&14]
        MOV      a2,a1,LSL a2
        STR      a2,[sp,#&1c]
        LDR      a1,[sp,#&18]
        ADD      a3,a1,#1
        LDR      a1,[sp,#&10]
        MOV      a1,a3,LSL a1
        STR      a1,[sp,#&18]
        LDR      a3,[sp,#&24]
        SUB      a3,a2,a3
        LDR      a2,[sp,#&2c]
        SUB      a2,a3,a2
        ADD      a2,a2,a2,LSR #31
        MOV      a2,a2,ASR #1
        LDR      a3,[sp,#&28]
        SUB      a3,a1,a3
        LDR      a1,[sp,#&30]
        SUB      a1,a3,a1
        ADD      a1,a1,a1,LSR #31
        MOV      a1,a1,ASR #1
        LDR      a3,[v3,#&c]
        STR      a3,[sp,#&44]
        ADD      a3,sp,#&48
        ADD      lr,sp,#&24
        LDMIA    lr!,{a4,ip}
        STMIA    a3!,{a4,ip}
        LDMIA    lr,{a4,ip}
        STMIA    a3,{a4,ip}
        LDR      a3,[sp,#&48]
        ADD      a3,a3,a2
        STR      a3,[sp,#&48]
        LDR      a3,[sp,#&4c]
        ADD      a3,a3,a1
        STR      a3,[sp,#&4c]
        LDR      a3,[sp,#&50]
        ADD      a2,a3,a2
        STR      a2,[sp,#&50]
        LDR      a2,[sp,#&54]
        ADD      a1,a2,a1
        MOV      v4,#0
        STR      a1,[sp,#&54]
        STR      v4,[sp,#&58]
        MVN      a1,#0
        STR      a1,[sp,#&60]
        STR      v4,[sp,#&5c]
        ADD      a3,sp,#4
        LDR      a1,[v3,#4]
        ADD      a2,pc,#L000894-.-8
        BL       lookup
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a3,sp
        LDR      a1,[v3,#4]
        ADD      a2,pc,#L000898-.-8
        BL       lookup
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        ADD      a1,sp,#&c
        MOV      a2,#0
        BL       xfslock_status
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        LDR      a1,[sp,#&c]
        TEQ      a1,#2
        LDRNE    a3,[sp,#0]
        LDREQ    a3,[sp,#4]
        MOV      a2,#5
        LDR      a1,[v3,#&c]
        BL       icon_set_text
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        STMDB    sp!,{a4}
        ADD      a1,sp,#&c
        MOV      a3,#0
        MOV      a2,#0
        BL       xosreadsysinfo_machine_id
        ADD      sp,sp,#4
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        LDR      a1,[sp,#8]
        ANDS     a1,a1,#&ff00
        BEQ      |L0006cc.J41.Start_Dialogue|
        TEQ      a1,#&100
        BNE      |L0006cc.J41.Start_Dialogue|
        BL       svc_enter
        MOV      a1,#&310000
        ADD      a1,a1,#&3000000
        LDR      a1,[a1,#0]
        TST      a1,#&80
        MOVNE    v1,v4
        MOVEQ    v1,#1
        BL       svc_exit
        TEQ      v1,#0
        LDRNE    a3,[sp,#4]
        BNE      |L0006d0.J40.Start_Dialogue|
|L0006cc.J41.Start_Dialogue|
        LDR      a3,[sp,#0]
|L0006d0.J40.Start_Dialogue|
        MOV      a2,#9
        LDR      a1,[v3,#&c]
        BL       icon_set_text
        MOVS     v1,a1
        ADDEQ    a1,sp,#&44
        BLEQ     xwimp_open_window
        MOVEQS   v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#0
        STMDB    sp!,{a3,a4}
        MVN      a2,#0
        LDR      a1,[v3,#&c]
        BL       xwimp_set_caret_position
        ADD      sp,sp,#8
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#2
        STMDB    sp!,{a4}
        LDR      a2,[pc, #L00089c-.-8]
        LDR      v6,[pc, #L0008a0-.-8]
        MOV      a4,#1
        MOV      a3,#0
        LDR      a1,[v6,#0]
        BL       callback_register
        ADD      sp,sp,#4
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#4
        MOV      a2,#3
        LDR      a1,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a4,#6
        STMDB    sp!,{a4}
        LDR      v5,[pc, #L0008a4-.-8]
        MOV      a2,v5
        MOV      a4,#5
        MOV      a3,#0
        LDR      a1,[v6,#0]
        BL       callback_register
        ADD      sp,sp,#&14
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#4
        MOV      a2,#3
        LDR      a1,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a4,#6
        STMDB    sp!,{a4}
        LDR      v4,[pc, #L0001a8-.-8]
        MOV      a3,v4
        LDR      a2,[pc, #L0008a8-.-8]
        MOV      a4,#5
        LDR      a1,[v6,#0]
        BL       callback_register
        ADD      sp,sp,#&14
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#4
        MOV      a2,#6
        LDR      a1,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a4,#6
        STMDB    sp!,{a4}
        LDR      a2,[pc, #L0008ac-.-8]
        MOV      a4,#5
        MOV      a3,#0
        LDR      a1,[v6,#0]
        BL       callback_register
        ADD      sp,sp,#&14
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#1
        MOV      a2,#3
        LDR      a1,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a4,#6
        STMDB    sp!,{a4}
        LDR      a2,[pc, #L0008a4-.-8]
        MOV      v5,v6
        MOV      a4,#5
        MOV      a3,#0
        LDR      a1,[v6,#0]
        BL       callback_register
        ADD      sp,sp,#&14
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#0
        MOV      a3,#1
        MOV      a2,#3
        LDR      a1,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a4,#6
        STMDB    sp!,{a4}
        MOV      v6,v4
        MOV      a3,v4
        LDR      a2,[pc, #L0008b0-.-8]
        MOV      v4,v5
        MOV      a4,#5
        LDR      a1,[v5,#0]
        BL       callback_register
        ADD      sp,sp,#&14
        MOVS     v1,a1
        B        |L0008b4.J68.Start_Dialogue|
L000880
        DCB     &4d,&63,&68,&43
        DCB     &6f,&6e,&66,&69
        DCB     &67,&00,&00,&00
L00088c
        DCD     main_mchconfig_data
L000890
        DCD     main_mchconfig_w
L000894
        DCB     &65,&6e,&00,&00
L000898
        DCB     &64,&69,&73,&00
L00089c
        IMPORT  window_open
        DCD     window_open
L0008a0
        IMPORT  application_list
        DCD     application_list
L0008a4
        DCD     Save_As
L0008a8
        DCD     Set
L0008ac
        DCD     Quit
L0008b0
        DCD     Clear
|L0008b4.J68.Start_Dialogue|
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#&d
        MOV      a3,#3
        MOV      a1,#8
        LDR      a2,[v3,#&c]
        STMDB    sp!,{a1-a4}
        LDR      a2,[pc, #L0008a4-.-8]
        MOV      a4,#4
        MOV      a3,#0
        LDR      a1,[v4,#0]
        BL       callback_register
        ADD      sp,sp,#&10
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#&d
        MOV      a3,#3
        MOV      a1,#8
        LDR      a2,[v3,#&c]
        STMDB    sp!,{a1-a4}
        MOV      a3,v6
        LDR      a2,[pc, #L0008a8-.-8]
        MOV      a4,#4
        LDR      a1,[v4,#0]
        BL       callback_register
        ADD      sp,sp,#&10
        MOVS     v1,a1
        BNE      |L000954.J6.Start_Dialogue|
        MOV      a4,#&1b
        MOV      a3,#6
        MOV      a1,#8
        LDR      a2,[v3,#&c]
        STMDB    sp!,{a1-a4}
        LDR      a2,[pc, #L0008ac-.-8]
        MOV      a4,#4
        MOV      a3,#0
        LDR      a1,[v4,#0]
        BL       callback_register
        ADD      sp,sp,#&10
        MOVS     v1,a1
        BEQ      |L00096c.J59.Start_Dialogue|
|L000954.J6.Start_Dialogue|
        TEQ      v1,#0
        BEQ      |L00096c.J59.Start_Dialogue|
        TEQ      v2,#0
        ADDNE    v3,v3,#8
        LDMNEIB  v3!,{a1,a2}
        BLNE     resource_delete_window
|L00096c.J59.Start_Dialogue|
        MOV      a1,v1
        LDMDB    fp,{v1-v6,fp,sp,pc}^

        DCB     &6d,&61,&69,&6e
        DCB     &00,&00,&00,&00
        DCD     &ff000008

        IMPORT  lookup_new
        IMPORT  resource_messages_alloc
        IMPORT  resource_templates_alloc
        IMPORT  application_initialise
        IMPORT  application
        IMPORT  application_terminate
        IMPORT  resource_templates_free
        IMPORT  resource_messages_free
        IMPORT  lookup_delete
        IMPORT  xwimp_report_error
        EXPORT  main
main
        MOV      ip,sp
        STMDB    sp!,{v1,v2,fp,ip,lr,pc}
        SUB      fp,ip,#4
        CMP      sp,sl
        BLLT     __rt_stkovf_split_small
        SUB      sp,sp,#&c
        ADD      a2,sp,#4
        LDR      a1,[pc, #L000ad0-.-8]
        LDMIA    a1,{ip,lr}
        STMIA    a2,{ip,lr}
        LDR      a1,[pc, #L000ad4-.-8]
        MOV      a2,#3
        BL       lookup_new
        MOVS     v1,a1
        BNE      |L000aac.J41.main|
        LDR      a1,[pc, #L000ad8-.-8]
        MOV      a2,#3
        BL       lookup_new
        MOVS     v1,a1
        LDR      v2,[pc, #L0001a8-.-8]
        BNE      |L000a9c.J42.main|
        LDR      a1,[v2,#4]
        ADD      a2,pc,#L000adc-.-8
        BL       resource_messages_alloc
        MOVS     v1,a1
        BNE      |L000a8c.J38.main|
        LDR      a1,[v2,#8]
        ADD      a2,pc,#L000af8-.-8
        BL       resource_templates_alloc
        MOVS     v1,a1
        BNE      |L000a7c.J34.main|
        MOV      a3,sp
        LDR      a1,[v2,#4]
        ADD      a2,pc,#L000b14-.-8
        BL       lookup
        MOVS     v1,a1
        BNE      |L000a6c.J30.main|
        ADD      a2,sp,#4
        LDR      a1,[sp,#0]
        BL       application_initialise
        MOVS     v1,a1
        BNE      |L000a6c.J30.main|
        MOV      a4,#0
        MOV      a3,#&11
        STMDB    sp!,{a3,a4}
        LDR      a2,[pc, #L0008ac-.-8]
        LDR      a1,[pc, #L0008a0-.-8]
        LDR      a1,[a1,#0]
        MOV      a4,#2
        MOV      a3,#0
        BL       callback_register
        ADD      sp,sp,#8
        MOVS     v1,a1
        BLEQ     Start_Dialogue
        MOVEQS   v1,a1
        BLEQ     application
        BL       application_terminate
        TEQ      v1,#0
        MOVEQ    v1,a1
|L000a6c.J30.main|
        LDR      a1,[v2,#8]
        BL       resource_templates_free
        TEQ      v1,#0
        MOVEQ    v1,a1
|L000a7c.J34.main|
        LDR      a1,[v2,#4]
        BL       resource_messages_free
        TEQ      v1,#0
        MOVEQ    v1,a1
|L000a8c.J38.main|
        LDR      a1,[v2,#8]
        BL       lookup_delete
        TEQ      v1,#0
        MOVEQ    v1,a1
|L000a9c.J42.main|
        LDR      a1,[v2,#4]!
        BL       lookup_delete
        TEQ      v1,#0
        MOVEQ    v1,a1
|L000aac.J41.main|
        TEQ      v1,#0
        BEQ      |L000ac8.J45.main|
        MOV      a1,v1
        MOV      a4,#0
        MOV      a2,#0
        LDR      a3,[sp,#0]
        BL       xwimp_report_error
|L000ac8.J45.main|
        MOV      a1,#0
        LDMDB    fp,{v1,v2,fp,sp,pc}^
L000ad0
        DCD     |x$dataseg|+&20
L000ad4
        DCD     main_messages
L000ad8
        DCD     main_templates
L000adc
        DCB     &3c,&4d,&63,&68
        DCB     &43,&6f,&6e,&66
        DCB     &69,&67,&24,&44
        DCB     &69,&72,&3e,&2e
        DCB     &4d,&65,&73,&73
        DCB     &61,&67,&65,&73
        DCB     &00,&00,&00,&00
L000af8
        DCB     &3c,&4d,&63,&68
        DCB     &43,&6f,&6e,&66
        DCB     &69,&67,&24,&44
        DCB     &69,&72,&3e,&2e
        DCB     &54,&65,&6d,&70
        DCB     &6c,&61,&74,&65
        DCB     &73,&00,&00,&00
L000b14
        DCB     &41,&70,&70,&00

        AREA |C$$data|,DATA

|x$dataseg|

Quit_On_Close
        DCD     &00000000

        EXPORT  main_messages
main_messages
        DCD     &00000000

        EXPORT  main_templates
main_templates
        DCD     &00000000

        EXPORT  main_mchconfig_w
main_mchconfig_w
        DCD     &00000000

        EXPORT  main_mchconfig_data
main_mchconfig_data
        DCD     &00000000

        EXPORT  main_saveas_w
main_saveas_w
        DCD     &00000000

        EXPORT  main_saveas_data
main_saveas_data
        DCD     &00000000

        EXPORT  main_s
main_s
        DCD     &00000000
        DCD     &00000502
        DCD     &00000000

        END
