| > !STBWeb.!Run
|
| World Wide Web browsing software
| (c) ANT Limited, 1995
|
IconSprites <Obey$Dir>.!Sprites
|
Set STBWeb$Dir Resources:$.Resources.STBWeb
Set STBWeb$Path <Obey$Dir>.,<STBWeb$Dir>.
|
| -----------------------------------------------------------------------
|
| You must edit the following lines to remove the | at the front and
| change the IP addresses to be those of your DNS resolvers
| change the domain name to your domain
|
IF "<Inet$Resolvers>" = "" Then Set Inet$resolvers 136.170.131.2 136.170.131.3 
IF "<Inet$LocalDomain>" = "" Then Set Inet$LocalDomain acorn.co.uk
|
| -----------------------------------------------------------------------
|
IF "<Inet$Resolvers>" = "" Then Error You must configure !STBWeb.!Run with the name of at least one DNS resolver
IF "<Inet$LocalDomain>" = "" Then Error You must configure !STBWeb.!Run with your domain name
|
If "<Inet$MimeMappings>" = "" Then SetMacro Inet$MimeMappings <STBWeb$Dir>.MimeMap
|
| -----------------------------------------------------------------------
| Operating system variables
|
SetEval STBWeb$NeedChoices "<STBWeb$ChoicesDir>" = ""
If STBWeb$NeedChoices AND "<Choices$Write>" <> "" Then SetMacro STBWeb$ChoicesDir <Choices$Write>.STBWeb
If STBWeb$NeedChoices AND "<Choices$Write>" =  "" Then SetMacro STBWeb$ChoicesDir <Wimp$ScrapDir>.STBWebC
Unset STBWeb$NeedChoices
|
If "<STBWeb$Errors>" = "" Then Set STBWeb$Errors 2> null:
If "<STBWeb$Config>" = "" Then SetMacro STBWeb$Config <STBWeb$Dir>.Config
If "<STBWeb$Cookies>" = "" Then SetMacro STBWeb$Cookies <STBWeb$ChoicesDir>.Cookies
If "<STBWeb$Help>" = "" Then SetMacro STBWeb$Help <STBWeb$Dir>.Help
If "<STBWeb$Home>" = "" Then SetMacro STBWeb$Home <STBWeb$Dir>.Welcome
If "<STBWeb$Hotlist>" = "" Then SetMacro STBWeb$Hotlist <STBWeb$ChoicesDir>.Hotlist
If "<STBWeb$Users>" = "" Then SetMacro STBWeb$Users <STBWeb$ChoicesDir>.Users
If "<STBWeb$Welcome>" = "" Then SetMacro STBWeb$Welcome <STBWeb$Dir>.Welcome
|
| -----------------------------------------------------------------------
| Set UseTB to 0 or 1 here or set to something before calling
|
If "<STBWeb$UseTB>" = "" Then SetEval STBWeb$UseTB 1
|
| -----------------------------------------------------------------------
| Boot file stuff
|
Set File$Type_695 GIF
Set File$Type_B28 URL
Set File$Type_B60 PNG
Set File$Type_B61 XBitMap
Set File$Type_B62 Gopher
Set File$Type_C85 JPEG
Set File$Type_FAF HTML
|
Set Alias$URLOpen_HTTP   /STBWeb:!Run -URL %%*0
Set Alias$URLOpen_GOPHER /STBWeb:!Run -URL %%*0
Set Alias$URLOpen_FILE   /STBWeb:!Run -URL %%*0
Set Alias$URLOpen_FTP    /STBWeb:!Run -URL %%*0
|
| -----------------------------------------------------------------------
| Network modules
|
RMEnsure Resolver       0.39 RMLoad <STBWeb$Dir>.resolver
RMEnsure Resolver       0.39 Error You need Resolver 0.39 or later
|
| -----------------------------------------------------------------------
| Toolbox modules
|
If STBWeb$UseTB Then Set STBWeb$TBOptions -t Else Set STBWeb$TBOptions ""
|
If STBWeb$UseTB Then RMEnsure ToolAction 0.12 RMLoad <STBWeb$Dir>.ToolAction
|
| -----------------------------------------------------------------------
|
If "<Wimp$ScrapDir>" = "" Then /STBWeb:SetScrap
If "<Wimp$Scrap>" = "" Then SetMacro Wimp$Scrap <Wimp$ScrapDir>.ScrapFile
CDir <Wimp$ScrapDir>
|
| Create choices directory here in case it is in the scrap directory
CDir <STBWeb$ChoicesDir>
|
| -----------------------------------------------------------------------
| Set Config Cache variables depending on cache location
|
SetEval STBWeb$ScrapFS Wimp$ScrapDir LEFT 1
If "<STBWeb$ScrapFS>" = "a" Then Set STBWeb$ScrapFS "A"
If "<STBWeb$ScrapFS>" = "c" Then Set STBWeb$ScrapFS "C"
|
UnSet STBWeb$ConfigCacheKeep
UnSet STBWeb$ConfigCacheKeepUpToDate
If "<STBWeb$ScrapFS>" = "A" Then Set STBWeb$ConfigCacheKeep Yes
If "<STBWeb$ScrapFS>" = "A" Then Set STBWeb$ConfigCacheKeepUpToDate Yes
|
UnSet STBWeb$ConfigCookieUpToDate
If "<STBWeb$ScrapFS>" = "A" Then Set STBWeb$ConfigCookieUpToDate Yes
|
UnSet STBWeb$ConfigPasswordsUpToDate
If "<STBWeb$ScrapFS>" = "A" Then Set STBWeb$ConfigPasswordsUpToDate Yes
|
| -----------------------------------------------------------------------
| Set Config Display variables depending on TV$Type
|
Unset STBWeb$ConfigDisplayMarginLeft
Unset STBWeb$ConfigDisplayMarginRight
Unset STBWeb$ConfigDisplayMarginTop
Unset STBWeb$ConfigDisplayMarginBottom
If "<TV$Type>" = "PAL" Then Set STBWeb$ConfigDisplayMarginLeft 8
If "<TV$Type>" = "PAL" Then Set STBWeb$ConfigDisplayMarginRight 8
If "<TV$Type>" = "PAL" Then Set STBWeb$ConfigDisplayMarginTop 8
If "<TV$Type>" = "PAL" Then Set STBWeb$ConfigDisplayMarginBottom 8
If "<TV$Type>" = "NTSC" Then Set STBWeb$ConfigDisplayMarginLeft 2
If "<TV$Type>" = "NTSC" Then Set STBWeb$ConfigDisplayMarginRight 2
If "<TV$Type>" = "NTSC" Then Set STBWeb$ConfigDisplayMarginTop 6
If "<TV$Type>" = "NTSC" Then Set STBWeb$ConfigDisplayMarginBottom 6
|
Unset STBWeb$ConfigDisplayScale
If "<TV$Type>" = "PAL" OR "<TV$Type>" = "NTSC" Then Set STBWeb$ConfigDisplayScale 125
|
| -----------------------------------------------------------------------
|
WimpSlot -min 128k -max 128K
|
Set Alias$STBWebRun Desktop_STBWeb <STBWeb$Errors> <STBWeb$TBOptions> %*0 <STBWeb$Welcome>
STBWebRun
