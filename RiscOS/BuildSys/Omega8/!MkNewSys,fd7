wimpslot -min 9000k
dir <obey$dir>
Echo Cleaning build tree...
amu_machine -k clean

dir <Src$Dir>.Lib.OSLib
Echo Cleaning <Src$Dir>.Lib.OSLib...
amu_machine clean_lib

dir <Src$Dir>.Lib.RISC_OSLib
Echo Cleaning <Src$Dir>.Lib.RISC_OSLib
amu_machine clean_all

dir <Src$Dir>.Internat.Messages
Echo Cleaning <Src$Dir>.Internat.Messages
amu_machine clean_all

dir <Install$Dir> { > <Install$Dir>.Fake }
Echo Cleaning <Install$Dir>
wipe * rf~c~v

| Maybe I should be using <Lib$Dir> & co. but that would get messy
dir <Build$Dir>.Export { > <Build$Dir>.Export }
Echo Cleaning <Build$Dir>.Export
wipe * rf~c~v

set mksystem$dir <obey$dir>
echo Starting build ...
time
|
echo Exporting hdrs ...
dir <mksystem$dir>
amu_machine -k export PHASE=hdrs
|
echo Exporting libs ...
dir <mksystem$dir>
amu_machine -k export PHASE=libs
time
|
echo Copying Resource files to Messages module ...
dir <mksystem$dir>
amu_machine -k resources
|
echo Building components ...
dir <mksystem$dir>
amu_machine -k rom
|
echo Installing components ...
dir <mksystem$dir>
amu_machine -k install_rom 
|
echo All done.
time
