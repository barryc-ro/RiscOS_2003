The ResGen tool
---------------

ResGen is a tool for creating resource file data in a form suitable for
use by ResourceFS from a set of input files and corresponding resource
file names.

The format of the ResGen command is:

ResGen <Area name> <Object file> { <Binary file> <Resource file> }

<Area name> is the name of an AOF AREA in which the resource file data is
to be placed. A function of this name is exported as an external symbol which
can be used in C or assembler code to access the resource data.

<Object file> is the name of the object output file to be produced.

<Binary file> is the name of a file to be included in the resource file
data.

<Resource file> is the name within the ResourceFS which is used by the
application to refer to a file within the resource file data.

A <viafile> is a file containing a list of <Binary file> <Resource file> pairs
one per line. This may be used for convenience or to circument the 256
character command line length limit.

Example usage in C
------------------

...

extern int resourcefsfiles(void);

#define ADFSPATH  "ADFSFiler$Path"
#define FILERPATH "Resources:$.Resources.ADFSFiler."

OS_ErrorBlock *init(char *envstr, int instantiation, WorkSpace **r12)
{
    ...
    s = ADFSPATH;
/* Set up ADFSFiler$Path variable which may be changed by user to point to
 * a different messages file.
 */
    if (!xos_readvarval(s, 0, -1, 0, 0))
        xos_setvarval(s, FILERPATH, sizeof(FILERPATH), 0, 0);
/* Register the block of data generated by the ResGen tool with the ResourceFS.
 * This will create a file "Resources:Resources.ADFSFiler.Messages" which
 * contains the message data.
 *
 * 'resourcefsfiles' is a function which returns the address of the resource
 * data.
 */
    xresourcefs_registerfiles(resourcefsfiles());
    ...
}

...


Extract from MakeFile to build resources
----------------------------------------

...

filer: o.adfsfiler o.messages o.lib
    link -m -o ADFSFiler o.filer o.messages o.lib

o.messages: m.messages
    resgen resourcefsfiles o.messages m.messages Resources.ADFSFiler.Messages

...
