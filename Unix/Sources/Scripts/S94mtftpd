#!/sbin/sh
#
# Multicast TFTP daemon RC startup script
#
# $Id$
#
# Copyright (C) Pace Micro Technology 1999, 2000, 2001.
# All rights reserved.
#
 

# Solaris 2.6 compatibility
killproc() {            # kill the named process(es)
        pid=`/usr/bin/ps -e |
             /usr/bin/grep -w $1 |
             /usr/bin/sed -e 's/^  *//' -e 's/ .*//'`
        [ "$pid" != "" ] && kill $pid
}

case "$1" in
'start')
        if [ -x /usr/local/bin/mtftpd ]; then
          /usr/local/bin/mtftpd
          echo Multicast TFTP service starting.
        fi
        ;;

'stop')
        if [ -x /usr/bin/pkill ]; then
          /usr/bin/pkill -9 -x -u 0 mtftpd
        else
          killproc mtftpd
        fi
        ;;

*)
        echo "Usage: $0 { start | stop }"
        exit 1
        ;;
esac
exit 0
