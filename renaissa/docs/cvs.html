<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
   <title>CVS Instructions</title>
</head>
<body bgcolor="#FFFFFF">

<center>
  <img align=center src="pics/acorn.gif" alt="Acorn" height=64 width=40>
</center>

<center><h1>CVS Instructions</h1></center>

<hr>
<blockquote>
  <pre>
    Distribution: COMPANY CONFIDENTIAL

    Project:      renaissance
    Issue:        0.02
    Author(s):    Neil Turton
    Date:         14-Nov-96
    Last Issue:   NA
  </pre>
</blockquote>
<hr>

<p><h2><a name="Contents">Contents</a></h2></p>

<ol>
<li><a href="#Contents">Contents</a></li>
<li><a href="#History">History</a></li>
<li><a href="#Operations">Basic operations</a></li>
<li><a href="#Notes">Notes</a></li>
<li><a href="#Export">Exporting a files</a></li>
<li><a href="#Checkout">Checking out a module</a></li>
<li><a href="#Commit">Commiting changes</a></li>
<li><a href="#Update">Updating files</a></li>
<li><a href="#Import">Importing a module</a></li>
</ol>

<p><h2><a name="History">History</a></h2>
<pre>
 Ver   Date      Who  Comments
 0.01  14/11/96  ndt  Document created
 0.02  20/11/96  ndt  Added note on branch numbers
</pre>

<p><h2><a name="Operations">Basic operations</a></h2>

  There are a few core operations in CVS which allow you to create,
  modify, and compile modules, or the whole build tree.  CVS is able to
  work on the whole build tree just as well as it works on individual
  modules.  There are two ways of retrieving files from the CVS
  repository, known as checking out, and exporting, which differ
  in that checking out create CVS administrive files in every directory,
  but exporting does not.  When retrieving files for compilation, especially
  for final release, the administrative files should not be present, as thay
  can easily find their way into ResourceFS.  When making modifications to
  a module, CVS will need the administrative files to merge changes back
  into the repository, when the files are commited.
</p>

<p><h2><a name="Notes">Notes</a></h2>
  CVS has a deficiency in that although files can have 'tags' attached
  to indicate that the files is present in a particular release, it is
  not possible to put a similar tags on directories.  Directories are
  created during an export or checkout, if they contain any files.  This
  behaviour seems to break most modules, as the 'rm' directories don't
  contain files.  It was decided that all empty directories should
  therefore have a file created, to force those directories to be created.
  This file is called '.cvstag'.
</p>

<p><h2><a name="Export">Exporting files</a></h2>
  Files are exported in order to build, or release a module.  Since files
  are created in empty directories, they must be deleted before the module
  is compiled.  This is fairly easy to do with a couple of commands, but
  it is made even easier by the existance of a script named cvsexport.  This
  script will call CVS to export a module, and then remove all files named
  .cvstag in the newly created directory.
</p>
<p>
  This process takes about 4 hours for the whole build tree over NFS.
</p>

<p><h2><a name="Checkout">Checking out a module</a></h2>
  Files are checked out in order to make modifications to a module.  The
  .cvstag files do not need to be deleted, as they will not interfere
  with editting.  The CVS directories should not be deleted, or you
  will not be able the commit changes you make.
</p>

<p><h2><a name="Commit">Commiting changes</a></h2>
  When changes have been made to a working copy of a module, they need to
  be committed, to make the changes to the repository.  This process is
  carried out with the "cvs commit" command.  CVS will first check that
  the files in the working directory are up to date.  If modifications
  have been made to the repository version, between the files being
  checked out, and them being committed, CVS will complain, and suggest
  using the update command, below.
</p>

<p><h2><a name="Update">Updating files</a></h2>
  Typing the command "cvs update" in a working directory will update
  the working directory to the most recent files on the branch that is
  being worked on.  If files have been modified, then the modified
  version is merged with the new version.  This command can also be
  used with options to switch to a different branch.  An example of
  this would be "cvs update -r Black".  This will update the directory
  to the Black branch, merging all local changes in.
</p>

<p><h2><a name="Import">Importing a module</a></h2>
  Importing is used to bring a module under CVS control.  To make sure
  that empty directories are created on checkout and export, the
  .cvstag files need creating.  This can be done by using the
  cvsimport script.  The script should be invoked from the module
  directory.  An example would be:
<pre>
cvsimport -b 1.1.1 RiscOS/Sources/OS_Core/HWSupport/Serial Black v360
</pre>
  This will create a module on branch number 1.1.1, with branch name
   Black, and revision name v360.
</p>
<p>
  The branch number given should normally be non-existant, as
  otherwise the branch tags on that branch become unusable.  The
  branch number should be odd, as even numbers can be used by CVS. The
  branches and tags currently in use are:
<pre>
  Number   Tag         Description
  4.1.1    Black       Used to import RiscOS 360 from the CD
  4.1.3    StrongARM   Used to import RiscOS 370 from the CD
  4.1.5    STB         Used to import NCOS 1.06 from SrcFiler
</pre>
</p>

</body>
</html>
