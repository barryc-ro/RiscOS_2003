#!/bin/sh

HERE=`pwd`

if [ "`uname -p`" = "sparc" ];
then
  ARCH=sparcsolaris
else
  ARCH=x86solaris
fi

EXPORTDIR=${HERE}/export

CLXPATH=${EXPORTDIR}/CLX
RISCOS_CLIB_HDRS=${EXPORTDIR}/CLib
TARDIR=${EXPORTDIR}/archive

rm -rf ${EXPORTDIR}
mkdir ${EXPORTDIR}
mkdir ${CLXPATH}
mkdir ${TARDIR}
mkdir ${RISCOS_CLIB_HDRS}
ln -s ${HERE}/RiscOS/Sources/Lib/RISC_OSLib/clib/h/kernel ${RISCOS_CLIB_HDRS}/kernel.h

make -f ~/Products/STBServer/Makefile CLXPATH=${CLXPATH} RISCOS_CLIB_HDRS=${RISCOS_CLIB_HDRS} TARDIR=${TARDIR} ARCH=${ARCH}
